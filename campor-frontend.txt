Directory structure:
└── dev-ayomide-campor/
    ├── README.md
    ├── eslint.config.js
    ├── index.html
    ├── package.json
    ├── postcss.config.js
    ├── tailwind.config.js
    ├── vercel.json
    ├── vite.config.js
    ├── public/
    │   ├── manifest.webmanifest
    │   └── robots.txt
    └── src/
        ├── App.css
        ├── App.jsx
        ├── index.css
        ├── main.jsx
        ├── components/
        │   ├── ProtectedRoute.jsx
        │   ├── cart/
        │   │   ├── AddToCartButton.jsx
        │   │   ├── CartDrawer.jsx
        │   │   ├── CartIcon.jsx
        │   │   └── index.js
        │   ├── categories/
        │   │   ├── CategoryManager.jsx
        │   │   └── index.js
        │   ├── chat/
        │   │   ├── ChatList.jsx
        │   │   └── index.js
        │   ├── common/
        │   │   ├── BlurText.jsx
        │   │   ├── Breadcrumb.jsx
        │   │   ├── Button.jsx
        │   │   ├── CatalogueCoverUpload.jsx
        │   │   ├── ChatIcon.jsx
        │   │   ├── CheckoutConfirmationModal.jsx
        │   │   ├── CompleteOrderModal.jsx
        │   │   ├── ConfirmationModal.jsx
        │   │   ├── ExportOptionsModal.jsx
        │   │   ├── ImageUpload.jsx
        │   │   ├── index.js
        │   │   ├── Loader.jsx
        │   │   ├── MobileSearchFilter.jsx
        │   │   ├── Modal.jsx
        │   │   ├── OrderDetailsModal.jsx
        │   │   ├── Pagination.jsx
        │   │   ├── PaginationDemo.jsx
        │   │   ├── PasswordInput.jsx
        │   │   ├── PriceRangeSlider.jsx
        │   │   ├── ProductReview.jsx
        │   │   ├── ProfileIcon.jsx
        │   │   ├── ScrollToTop.jsx
        │   │   ├── SEO.jsx
        │   │   ├── ShoppingBagIcon.jsx
        │   │   ├── SkeletonDemo.jsx
        │   │   └── SkeletonLoader.jsx
        │   ├── layout/
        │   │   ├── Footer.jsx
        │   │   ├── index.js
        │   │   ├── MobileSellerMenu.jsx
        │   │   ├── Navbar.jsx
        │   │   ├── SellerPageHeader.jsx
        │   │   └── SellerSidebar.jsx
        │   ├── products/
        │   │   ├── index.js
        │   │   ├── InventoryStatus.jsx
        │   │   └── ProductCard.jsx
        │   ├── search/
        │   │   ├── AdvancedFilters.jsx
        │   │   ├── AdvancedSearchBox.jsx
        │   │   ├── AutocompleteSearchBox.jsx
        │   │   ├── index.js
        │   │   ├── SearchHighlight.jsx
        │   │   └── SearchResults.jsx
        │   ├── seller/
        │   │   └── AcceptOrder.jsx
        │   └── wishlist/
        │       ├── index.js
        │       ├── WishlistButton.jsx
        │       └── WishlistIcon.jsx
        ├── config/
        │   ├── cloudinary.js
        │   └── marketplace.js
        ├── context/
        │   └── AuthContext.jsx
        ├── contexts/
        │   ├── CartContext.jsx
        │   ├── ChatContext.jsx
        │   └── WishlistContext.jsx
        ├── hooks/
        │   └── useImageUpload.js
        ├── layouts/
        │   ├── AuthLayout.jsx
        │   ├── ChatLayout.jsx
        │   ├── LegalLayout.jsx
        │   ├── MainLayout.jsx
        │   └── SellerLayout.jsx
        ├── pages/
        │   ├── ContactSupport.jsx
        │   ├── Freshers.jsx
        │   ├── NotFound.jsx
        │   ├── OrderDetails.jsx
        │   ├── PaymentSuccess.jsx
        │   ├── PaymentVerification.jsx
        │   ├── PrivacyPolicy.jsx
        │   ├── Profile.jsx
        │   ├── TermsAndConditions.jsx
        │   ├── UserOrders.jsx
        │   ├── auth/
        │   │   ├── AuthLanding.jsx
        │   │   ├── ContactSupport.jsx
        │   │   ├── ForgotPassword.jsx
        │   │   ├── GmailEmailTutorial.jsx
        │   │   ├── index.js
        │   │   ├── Login.jsx
        │   │   ├── PrivacyPolicy.jsx
        │   │   ├── Register.jsx
        │   │   ├── ResetPassword.jsx
        │   │   ├── TermsAndConditions.jsx
        │   │   └── Verify.jsx
        │   ├── cart/
        │   │   ├── Cart.jsx
        │   │   └── index.js
        │   ├── categories/
        │   │   └── CategoryPage.jsx
        │   ├── chat/
        │   │   ├── Chat.jsx
        │   │   └── index.js
        │   ├── checkout/
        │   │   ├── Checkout.jsx
        │   │   └── index.js
        │   ├── marketplace/
        │   │   ├── ComingSoonMarketplace.jsx
        │   │   ├── index.js
        │   │   ├── Landing.jsx
        │   │   └── ProductDetail.jsx
        │   ├── search/
        │   │   ├── index.js
        │   │   └── SearchResults.jsx
        │   ├── seller/
        │   │   ├── AddProduct.jsx
        │   │   ├── Analytics.jsx
        │   │   ├── Customers.jsx
        │   │   ├── Dashboard.jsx
        │   │   ├── EditProduct.jsx
        │   │   ├── index.js
        │   │   ├── Onboarding.jsx
        │   │   ├── Orders.jsx
        │   │   ├── Products.jsx
        │   │   ├── SellerCatalogue.jsx
        │   │   ├── Settings.jsx
        │   │   ├── ViewProduct.jsx
        │   │   └── Wallet.jsx
        │   └── wishlist/
        │       ├── index.js
        │       └── Wishlist.jsx
        ├── services/
        │   ├── algoliaService.js
        │   ├── algoliaSync.js
        │   ├── authService.js
        │   ├── autocompleteService.js
        │   ├── bankResolutionService.js
        │   ├── bankVerificationService.js
        │   ├── cartService.js
        │   ├── categoryService.js
        │   ├── chatApiService.js
        │   ├── chatService.js
        │   ├── cloudinaryService.js
        │   ├── inventoryService.js
        │   ├── newsletterService.js
        │   ├── ordersService.js
        │   ├── paymentService.js
        │   ├── paymentsService.js
        │   ├── ratingService.js
        │   ├── searchService.js
        │   ├── socketService.js
        │   ├── walletService.js
        │   └── wishlistService.js
        └── utils/
            ├── chatUtils.js
            ├── constants.js
            ├── formatting.js
            └── validators.js


Files Content:

(Files content cropped to 300k characters, download full ingest to see more)
================================================
FILE: README.md
================================================
# React + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## Expanding the ESLint configuration

If you are developing a production application, we recommend using TypeScript with type-aware lint rules enabled. Check out the [TS template](https://github.com/vitejs/vite/tree/main/packages/create-vite/template-react-ts) for information on how to integrate TypeScript and [`typescript-eslint`](https://typescript-eslint.io) in your project.

Dev Ayomide


================================================
FILE: eslint.config.js
================================================
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{js,jsx}'],
    extends: [
      js.configs.recommended,
      reactHooks.configs['recommended-latest'],
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
    },
    rules: {
      'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],
    },
  },
])



================================================
FILE: index.html
================================================
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    
    <!-- Primary Meta Tags -->
    <title>Campor - Your Campus Marketplace | Verified RUN Students Only</title>
    <meta name="title" content="Campor - Your Campus Marketplace | Verified RUN Students Only" />
    <meta name="description" content="Buy, sell, or trade with verified Redeemer's University students. Only @run.edu.ng emails accepted. Secure transactions guaranteed. Textbooks, electronics, clothing, and campus services." />
    <meta name="keywords" content="campus marketplace, student marketplace, Redeemer's University, RUN students, buy and sell, student trading, verified marketplace, campus commerce, student entrepreneurship, RUN marketplace" />
    <meta name="author" content="Campor" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    <meta name="revisit-after" content="7 days" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://campor.live/" />
    <meta property="og:title" content="Campor - Your Campus Marketplace | Verified RUN Students Only" />
    <meta property="og:description" content="Buy, sell, or trade with verified Redeemer's University students. Only @run.edu.ng emails accepted. Secure transactions guaranteed." />
    <meta property="og:image" content="https://campor.live/heroimage.png" />
    <meta property="og:site_name" content="Campor" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://campor.live/" />
    <meta name="twitter:title" content="Campor - Your Campus Marketplace | Verified RUN Students Only" />
    <meta name="twitter:description" content="Buy, sell, or trade with verified Redeemer's University students. Only @run.edu.ng emails accepted. Secure transactions guaranteed." />
    <meta name="twitter:image" content="https://campor.live/heroimage.png" />
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#2563eb" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Campor" />
    
    <!-- Preload fonts for better mobile performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap">
    </noscript>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>



================================================
FILE: package.json
================================================
{
  "name": "campor",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview",
    "setup-cloudinary": "node setup-env.js"
  },
  "dependencies": {
    "@algolia/autocomplete-js": "^1.19.4",
    "@algolia/autocomplete-plugin-query-suggestions": "^1.19.4",
    "@algolia/autocomplete-plugin-recent-searches": "^1.19.4",
    "@algolia/autocomplete-theme-classic": "^1.19.4",
    "@vercel/analytics": "^1.5.0",
    "algoliasearch": "^5.36.0",
    "axios": "^1.11.0",
    "framer-motion": "^12.23.16",
    "instantsearch.css": "^8.5.1",
    "instantsearch.js": "^4.79.2",
    "lucide-react": "^0.542.0",
    "react": "^19.1.1",
    "react-dom": "^19.1.1",
    "react-router-dom": "^7.8.0",
    "socket.io-client": "^4.8.1",
    "xlsx": "^0.18.5"
  },
  "devDependencies": {
    "@eslint/js": "^9.32.0",
    "@types/react": "^19.1.9",
    "@types/react-dom": "^19.1.7",
    "@vitejs/plugin-react": "^4.7.0",
    "autoprefixer": "^10.4.21",
    "eslint": "^9.32.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.20",
    "globals": "^16.3.0",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.4.17",
    "vite": "^7.1.0"
  }
}



================================================
FILE: postcss.config.js
================================================
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}



================================================
FILE: tailwind.config.js
================================================
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,jsx}",
  ],
  theme: {
    extend: {
      fontFamily: {
        'montserrat': ['Montserrat', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'sans-serif'],
        'inter': ['Inter', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'sans-serif'],
        'sans': ['Inter', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'sans-serif'],
      },
    },
  },
  plugins: [],
};



================================================
FILE: vercel.json
================================================
{
  "rewrites": [
    { "source": "/(.*)", "destination": "/" }
  ]
}



================================================
FILE: vite.config.js
================================================
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
})



================================================
FILE: public/manifest.webmanifest
================================================
{
  "name": "Campor",
  "short_name": "Campor",
  "description": "Buy, sell, or trade with verified Redeemer's University students on Campor.",
  "start_url": "/",
  "scope": "/",
  "display": "standalone",
  "orientation": "portrait",
  "background_color": "#ffffff",
  "theme_color": "#2563eb",
  "dir": "ltr",
  "lang": "en",
  "categories": ["shopping", "lifestyle"],
  "icons": [
    {
      "src": "/logo.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "any"
    },
    {
      "src": "/logo.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "any maskable"
    }
  ]
}





================================================
FILE: public/robots.txt
================================================
User-agent: *
Allow: /
Disallow: /auth/
Disallow: /seller/
Disallow: /cart
Disallow: /checkout
Disallow: /payment-success
Disallow: /payment-verification
Disallow: /wishlist
Disallow: /orders
Disallow: /chat

# Allow public pages
Allow: /
Allow: /marketplace
Allow: /product/
Allow: /search
Allow: /terms
Allow: /privacy
Allow: /contact

# Sitemap
Sitemap: https://campor.live/sitemap.xml




================================================
FILE: src/App.css
================================================
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}



================================================
FILE: src/App.jsx
================================================
import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
import { Analytics as VercelAnalytics } from '@vercel/analytics/react';
import MainLayout from './layouts/MainLayout';
import ChatLayout from './layouts/ChatLayout';
import AuthLayout from './layouts/AuthLayout';
import SellerLayout from './layouts/SellerLayout';
import { AuthenticatedRedirect, RequireAuth, RequireMarketplaceLive } from './components/ProtectedRoute';
import { isMarketplaceLive } from './config/marketplace';
import { CartProvider } from './contexts/CartContext';
import { WishlistProvider } from './contexts/WishlistContext';
import { ScrollToTop } from './components/common';

// Import the verify image
const verifyImage = '/verifyscreen.png';

// Import pages from new organized structure
import { Landing, Marketplace, ComingSoonMarketplace, ProductDetail } from './pages/marketplace';
import { SearchResults } from './pages/search';
import { Cart } from './pages/cart';
import { Checkout } from './pages/checkout';
import PaymentSuccess from './pages/PaymentSuccess';
import { Wishlist } from './pages/wishlist';
import Profile from './pages/Profile';
import UserOrders from './pages/UserOrders';
import OrderDetails from './pages/OrderDetails';
import CategoryPage from './pages/categories/CategoryPage';
import Freshers from './pages/Freshers';
import { 
  Onboarding, 
  Dashboard, 
  Products, 
  Orders, 
  Customers, 
  Analytics, 
  AddProduct,
  EditProduct,
  ViewProduct,
  Settings,
  Wallet
} from './pages/seller';
import SellerCatalogue from './pages/seller/SellerCatalogue';
import { AuthLanding, Login, Register, Verify, ForgotPassword, ResetPassword, GmailEmailTutorial } from './pages/auth';
import { Chat } from './pages/chat';
import NotFound from './pages/NotFound';
import PaymentVerification from './pages/PaymentVerification';
import TermsAndConditionsPage from './pages/TermsAndConditions';
import PrivacyPolicyPage from './pages/PrivacyPolicy';
import ContactSupportPage from './pages/ContactSupport';

export default function App() {
  return (
    <Router>
      <ScrollToTop />
      <CartProvider>
        <WishlistProvider>
          <VercelAnalytics />
          <Routes>
        <Route path="/" element={
          <AuthenticatedRedirect>
            <MainLayout><Landing /></MainLayout>
          </AuthenticatedRedirect>
        } />
        <Route path="/marketplace" element={
          <RequireAuth>
            <MainLayout>
              {isMarketplaceLive() ? <Marketplace /> : <ComingSoonMarketplace />}
            </MainLayout>
          </RequireAuth>
        } />
        <Route path="/product/:slug" element={
          <RequireAuth>
            <RequireMarketplaceLive>
              <MainLayout><ProductDetail /></MainLayout>
            </RequireMarketplaceLive>
          </RequireAuth>
        } />
        <Route path="/search" element={
          <RequireAuth>
            <RequireMarketplaceLive>
              <MainLayout><SearchResults /></MainLayout>
            </RequireMarketplaceLive>
          </RequireAuth>
        } />
        <Route path="/cart" element={
          <RequireAuth>
            <RequireMarketplaceLive>
              <MainLayout><Cart /></MainLayout>
            </RequireMarketplaceLive>
          </RequireAuth>
        } />
        <Route path="/checkout" element={
          <RequireAuth>
            <RequireMarketplaceLive>
              <MainLayout><Checkout /></MainLayout>
            </RequireMarketplaceLive>
          </RequireAuth>
        } />
        <Route path="/payment-success" element={
          <RequireAuth>
            <RequireMarketplaceLive>
              <MainLayout><PaymentSuccess /></MainLayout>
            </RequireMarketplaceLive>
          </RequireAuth>
        } />
        <Route path="/wishlist" element={
          <RequireAuth>
            <RequireMarketplaceLive>
              <MainLayout><Wishlist /></MainLayout>
            </RequireMarketplaceLive>
          </RequireAuth>
        } />
        <Route path="/profile" element={
          <RequireAuth>
            <MainLayout><Profile /></MainLayout>
          </RequireAuth>
        } />
        <Route path="/orders" element={
          <RequireAuth>
            <RequireMarketplaceLive>
              <MainLayout><UserOrders /></MainLayout>
            </RequireMarketplaceLive>
          </RequireAuth>
        } />
        <Route path="/orders/:orderId" element={
          <RequireAuth>
            <RequireMarketplaceLive>
              <MainLayout><OrderDetails /></MainLayout>
            </RequireMarketplaceLive>
          </RequireAuth>
        } />
        
        {/* Chat Route */}
        <Route path="/chat" element={
          <RequireAuth>
            <ChatLayout><Chat /></ChatLayout>
          </RequireAuth>
        } />
        
        {/* Category Routes */}
        <Route path="/category/:categoryId" element={
          <RequireAuth>
            <RequireMarketplaceLive>
              <MainLayout><CategoryPage /></MainLayout>
            </RequireMarketplaceLive>
          </RequireAuth>
        } />
        
        {/* Seller Catalogue Route */}
        <Route path="/seller/:slug/catalogue" element={
          <RequireAuth>
            <RequireMarketplaceLive>
              <MainLayout><SellerCatalogue /></MainLayout>
            </RequireMarketplaceLive>
          </RequireAuth>
        } />
        
        <Route path="/freshers" element={<MainLayout><Freshers /></MainLayout>} />
      
        
        {/* Payment Verification Route - No auth required */}
        <Route path="/payment/verify" element={<PaymentVerification />} />
        
        {/* Terms and Conditions Route - Public */}
        <Route path="/terms" element={<TermsAndConditionsPage />} />
        
        {/* Seller Routes */}
        <Route path="/seller/onboarding" element={
          <RequireAuth>
            <MainLayout><Onboarding /></MainLayout>
          </RequireAuth>
        } />
        <Route path="/seller/dashboard" element={
          <RequireAuth>
            <SellerLayout><Dashboard /></SellerLayout>
          </RequireAuth>
        } />
        <Route path="/seller/products" element={
          <RequireAuth>
            <Products />
          </RequireAuth>
        } />
        <Route path="/seller/orders" element={
          <RequireAuth>
            <Orders />
          </RequireAuth>
        } />
        <Route path="/seller/wallet" element={
          <RequireAuth>
            <SellerLayout><Wallet /></SellerLayout>
          </RequireAuth>
        } />
        {/* <Route path="/seller/customers" element={
          <RequireAuth>
            <Customers />
          </RequireAuth>
        } /> */}
        {/* <Route path="/seller/analytics" element={
          <RequireAuth>
            <Analytics />
          </RequireAuth>
        } /> */}
        <Route path="/seller/products/add" element={
          <RequireAuth>
            <AddProduct />
          </RequireAuth>
        } />
        <Route path="/seller/products/edit/:productId" element={
          <RequireAuth>
            <EditProduct />
          </RequireAuth>
        } />
        <Route path="/seller/products/:productId" element={
          <RequireAuth>
            <ViewProduct />
          </RequireAuth>
        } />
        <Route path="/seller/settings" element={
          <RequireAuth>
            <Settings />
          </RequireAuth>
        } />

        <Route path="/auth" element={<AuthLayout><AuthLanding /></AuthLayout>} />
        <Route path="/login" element={<AuthLayout><Login /></AuthLayout>} />
        <Route path="/register" element={<AuthLayout><Register /></AuthLayout>} />
        <Route path="/verify" element={<AuthLayout heroImage={verifyImage}><Verify /></AuthLayout>} />
        <Route path="/forgot-password" element={<AuthLayout><ForgotPassword /></AuthLayout>} />
        <Route path="/reset-password" element={<AuthLayout><ResetPassword /></AuthLayout>} />
        <Route path="/gmail-tutorial" element={<AuthLayout scrollable={true}><GmailEmailTutorial /></AuthLayout>} />

        {/* Legal Pages */}
        <Route path="/terms" element={<MainLayout><TermsAndConditionsPage /></MainLayout>} />
        <Route path="/privacy" element={<MainLayout><PrivacyPolicyPage /></MainLayout>} />
        <Route path="/contact" element={<MainLayout><ContactSupportPage /></MainLayout>} />

        <Route path="*" element={<MainLayout><NotFound /></MainLayout>} />
        </Routes>
        </WishlistProvider>
      </CartProvider>
    </Router>
  );
}






================================================
FILE: src/index.css
================================================
@import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');

/* Set Inter as default font for the app */
body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
  font-display: swap;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x: hidden;
}

html {
  overflow-x: hidden;
}

/* Ensure Montserrat renders properly on landing page */
.font-montserrat {
  font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif !important;
  font-display: swap;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Ensure Inter loads properly for default elements */
.font-inter, .font-sans {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
  font-display: swap;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom styles for price range slider */
.price-range-slider {
  position: relative;
}

.price-range-slider input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  cursor: pointer;
  position: absolute;
  width: 100%;
  height: 32px;
  margin: 0;
  padding: 0;
  outline: none;
}

.price-range-slider input[type="range"]::-webkit-slider-track {
  background: transparent;
  height: 8px;
  border-radius: 4px;
}

.price-range-slider input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  height: 24px;
  width: 24px;
  border-radius: 50%;
  cursor: grab;
  border: none;
  box-shadow: none;
}

.price-range-slider input[type="range"]::-webkit-slider-thumb:active {
  cursor: grabbing;
}

.price-range-slider input[type="range"]::-moz-range-track {
  background: transparent;
  height: 8px;
  border-radius: 4px;
  border: none;
}

.price-range-slider input[type="range"]::-moz-range-thumb {
  background: transparent;
  height: 24px;
  width: 24px;
  border-radius: 50%;
  cursor: grab;
  border: none;
  box-shadow: none;
}

.price-range-slider input[type="range"]::-moz-range-thumb:active {
  cursor: grabbing;
}

/* Line clamp utilities */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

:root {
  font-family: 'Inter', sans-serif;
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;
  --primary: 221.2 83.2% 53.3%;
  --primary-foreground: 210 40% 98%;
  --secondary: 210 40% 96.1%;
  --secondary-foreground: 222.2 47.4% 11.2%;
  --muted: 210 40% 96.1%;
  --muted-foreground: 215.4 16.3% 46.9%;
  --accent: 210 40% 96.1%;
  --accent-foreground: 222.2 47.4% 11.2%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 40% 98%;
  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 221.2 83.2% 53.3%;
  --radius: 0.5rem;
}

/* Custom Scrollbar Styles */
.scrollbar-thin {
  scrollbar-width: thin;
}

.scrollbar-thumb-gray-300::-webkit-scrollbar-thumb {
  background-color: #d1d5db;
  border-radius: 0.375rem;
}

.scrollbar-track-transparent::-webkit-scrollbar-track {
  background-color: transparent;
}

.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: #d1d5db;
  border-radius: 0.375rem;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background-color: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background-color: #9ca3af;
}

/* Chat-specific scrollbar styles */
.chat-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: #cbd5e0 #f7f5f0;
}

.chat-scrollbar::-webkit-scrollbar {
  width: 8px;
}

.chat-scrollbar::-webkit-scrollbar-track {
  background: #f7f5f0;
  border-radius: 4px;
}

.chat-scrollbar::-webkit-scrollbar-thumb {
  background: #cbd5e0;
  border-radius: 4px;
  border: 1px solid #f7f5f0;
}

.chat-scrollbar::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Mobile scrollbar styles */
@media (max-width: 1024px) {
  .chat-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  
  .chat-scrollbar::-webkit-scrollbar-thumb {
    background: #d1d5db;
  }
}

/* Skeleton Loader Animations */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.animate-shimmer {
  animation: shimmer 2s ease-in-out infinite;
}


================================================
FILE: src/main.jsx
================================================
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import './index.css';
import App from './App.jsx';
import { AuthProvider } from './context/AuthContext';

createRoot(document.getElementById('root')).render(
  <StrictMode>
    <AuthProvider>
      <App />
    </AuthProvider>
  </StrictMode>
);



================================================
FILE: src/components/ProtectedRoute.jsx
================================================
import { Navigate, useLocation } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { Skeleton } from './common';
import { isMarketplaceLive } from '../config/marketplace';

// Component to redirect signed-in users from landing page to marketplace
export function AuthenticatedRedirect({ children }) {
  const { user, loading } = useAuth();
  
  // Show loading while checking authentication
  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <Skeleton className="w-12 h-12 rounded-full" />
      </div>
    );
  }
  
  // If user is signed in, redirect to marketplace
  if (user) {
    return <Navigate to="/marketplace" replace />;
  }
  
  // If not signed in, show the landing page
  return children;
}

// Component to protect routes that require authentication
export function RequireAuth({ children }) {
  const { user, loading } = useAuth();
  const location = useLocation();
  
  // Show loading while checking authentication
  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <Skeleton className="w-12 h-12 rounded-full" />
      </div>
    );
  }
  
  // If user is not signed in, redirect to login
  if (!user) {
    const redirectTo = encodeURIComponent(`${location.pathname}${location.search}`);
    return (
      <Navigate
        to={`/login?redirect=${redirectTo}`}
        replace
        state={{ from: location }}
      />
    );
  }
  
  // If signed in, show the protected content
  return children;
}

// Component that shows content only if marketplace is live, otherwise redirects
export function RequireMarketplaceLive({ children }) {
  if (!isMarketplaceLive()) {
    return <Navigate to="/marketplace" replace />;
  }
  return children;
}



================================================
FILE: src/components/cart/AddToCartButton.jsx
================================================
import React, { useMemo, useState, useEffect } from 'react';
import { useCart } from '../../contexts/CartContext';
import { Plus, Minus, Check } from 'lucide-react';
import { ChatIcon } from '../common';
import { checkProductAvailability } from '../../services/cartService';
import { getSellerUserId, getSellerUserIdWithFallback } from '../../services/authService';

export default function AddToCartButton({ productId, className = '', sellerId = null, roundedStyle = 'full' }) {
  const { addProductToCart, checkProductInCart, getCartItem, updateItemQuantity, removeItemFromCart, loadCart } = useCart();
  const [loading, setLoading] = useState(false); // Loading state for add to cart
  const [updatingQuantity, setUpdatingQuantity] = useState(false); // Loading state for quantity updates
  const [success, setSuccess] = useState(false);
  const [availability, setAvailability] = useState({ available: true, stockQuantity: 0, message: '' });
  const [checkingAvailability, setCheckingAvailability] = useState(true);

  const isInCart = checkProductInCart(productId);
  const cartItem = useMemo(() => getCartItem(productId), [getCartItem, productId, isInCart]);
  const quantity = cartItem?.quantity || 0;

  // Note: Inventory validation is handled by backend webhook after payment
  // Frontend allows adding to cart, backend will handle stock validation
  useEffect(() => {
    // Set default availability - backend will handle validation
    setAvailability({ available: true, stockQuantity: 999, message: 'Available' });
        setCheckingAvailability(false);
  }, [productId, quantity]);

  // Reset loading state when cart status changes (e.g., item removed)
  useEffect(() => {
    if (!isInCart) {
      setLoading(false);
      setUpdatingQuantity(false);
    }
  }, [isInCart]);

  const handleAddToCart = async (e) => {
    if (e) {
      e.preventDefault();
      e.stopPropagation();
    }
    if (loading) return;
    
    // Validate productId before proceeding
    if (!productId) {
      console.error('AddToCartButton - No productId provided');
      alert('Product ID is missing. Please refresh the page and try again.');
      return;
    }
    
    try {
      setLoading(true);
      setSuccess(false);
      
      
      await addProductToCart(productId, 1);
      
      // Show success state briefly
      setSuccess(true);
      setTimeout(() => setSuccess(false), 1500);
    } catch (error) {
      // Show user-friendly error message
      alert(`Failed to add item to cart: ${error.message}`);
    } finally {
      setLoading(false);
    }
  };

  const handleIncrease = async (e) => {
    if (e) {
      e.preventDefault();
      e.stopPropagation();
    }
    if (!cartItem || updatingQuantity) return;
    
    // Check if we're at max stock before trying to increase
    if (cartItem.maxAvailable && quantity >= cartItem.maxAvailable) {
      return; // Silently prevent increase if at max stock
    }
    
    try {
      setUpdatingQuantity(true);
      
      // Check if this is an old cart item (missing cart item ID)
      const itemId = cartItem.id || cartItem.cartItemId || cartItem.itemId;
      
      if (!itemId) {
        // This is an old cart item, refresh the cart to get proper structure
        await loadCart(true); // Force refresh
        return; // Don't throw error, just return silently
      }
      
      await updateItemQuantity(itemId, quantity + 1);
    } catch (error) {
      // Don't show error to user, just log it
    } finally {
      setUpdatingQuantity(false);
    }
  };

  const handleDecrease = async (e) => {
    if (e) {
      e.preventDefault();
      e.stopPropagation();
    }
    if (!cartItem || updatingQuantity) return;
    try {
      setUpdatingQuantity(true);
      
      // Check if this is an old cart item (missing cart item ID)
      const itemId = cartItem.id || cartItem.cartItemId || cartItem.itemId;
      
      if (!itemId) {
        // This is an old cart item, refresh the cart to get proper structure
        await loadCart(true); // Force refresh
        return; // Don't throw error, just return silently
      }
      
      if (quantity <= 1) {
        await removeItemFromCart(itemId);
      } else {
        await updateItemQuantity(itemId, quantity - 1);
      }
    } catch (error) {
      // Don't show error to user, just log it
    } finally {
      setUpdatingQuantity(false);
    }
  };

  // Handle message seller for out of stock products
  const handleMessageSeller = async () => {
    if (sellerId) {
      try {
        // Get seller's user ID for chat with fallback
        const sellerUserId = await getSellerUserIdWithFallback(sellerId);
        // Navigate to chat with seller's user ID
        window.location.href = `/chat?sellerId=${sellerUserId}`;
      } catch (error) {
        // Show error message
        alert(`Unable to start chat: ${error.message}. Please try refreshing the page or contact support.`);
      }
    } else {
      alert('Seller information not available. Please contact support.');
    }
  };

  // Show quantity controls if product is in cart
  if (isInCart && cartItem) {
    return (
      <div className={`${className}`}>
        <div className="flex items-center gap-2">
          <button
            type="button"
            onClick={handleDecrease}
            disabled={updatingQuantity}
            className="p-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full disabled:opacity-50 transition-all duration-200 hover:scale-105"
            aria-label="Decrease quantity"
          >
            <Minus className="h-4 w-4" />
          </button>
          <span className="min-w-[2rem] h-8 flex items-center justify-center text-center font-medium text-gray-900 bg-gray-50 rounded-lg">
            {updatingQuantity ? (
              <span className="inline-block h-4 w-4 rounded-full border-2 border-gray-300 border-t-transparent animate-spin"></span>
            ) : (
              quantity
            )}
          </span>
          <button
            type="button"
            onClick={handleIncrease}
            disabled={updatingQuantity || (cartItem.maxAvailable && quantity >= cartItem.maxAvailable)}
            className="p-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full disabled:opacity-50 transition-all duration-200 hover:scale-105"
            aria-label="Increase quantity"
          >
            <Plus className="h-4 w-4" />
          </button>
        </div>
      </div>
    );
  }

  // Default add-to-cart button
  return (
    <button
      type="button"
      onClick={handleAddToCart}
      disabled={loading || checkingAvailability}
      className={`w-full flex items-center justify-center px-4 py-2 ${
        success 
          ? 'bg-green-600 text-white' 
          : 'bg-blue-600 text-white hover:bg-blue-700'
      } ${roundedStyle === 'full' ? 'rounded-full' : 'rounded-lg'} transition-all duration-300 disabled:opacity-50 hover:scale-105 ${className}`}
    >
      {loading ? (
        <div className="animate-spin rounded-full h-4 w-4 border-2 border-white/70 border-t-transparent mr-2"></div>
      ) : success ? (
        <Check className="h-4 w-4 mr-2" />
      ) : null}
      {loading ? 'Adding...' : success ? 'Added!' : 'Add to Cart'}
    </button>
  );
}







================================================
FILE: src/components/cart/CartDrawer.jsx
================================================
import React, { useState } from 'react';
import { Link } from 'react-router-dom';
import { useCart } from '../../contexts/CartContext';
import { useAuth } from '../../context/AuthContext';
import { initiatePayment, redirectToPayment } from '../../services/paymentService';
import { X, Plus, Minus, Trash2, AlertTriangle, RefreshCw } from 'lucide-react';
import { ShoppingBagIcon, CheckoutConfirmationModal } from '../common';
import { calculatePaystackCharge, formatPrice, calculateProcessingFee } from '../../utils/constants';

export default function CartDrawer({ isOpen, onClose }) {
  const { 
    cart, 
    loading, 
    error, 
    cartId,
    getCartTotals, 
    getItemCount,
    updateItemQuantity, 
    removeItemFromCart, 
    clearUserCart,
    fixUserCart,
    initiateUserCheckout,
    cancelUserCheckout,
    needsFixing,
    getStatusSummary,
    getItemsNeedingFix
  } = useCart();
  const { user } = useAuth();

  const [updatingItem, setUpdatingItem] = useState(null);
  const [processingPayment, setProcessingPayment] = useState(false);
  const [fixingCart, setFixingCart] = useState(false);
  const [validatingCheckout, setValidatingCheckout] = useState(false);
  const [checkoutModal, setCheckoutModal] = useState({ isOpen: false });
  const [checkoutError, setCheckoutError] = useState(null);

  const handleQuantityChange = async (itemId, newQuantity) => {
    if (newQuantity < 1) return;
    
    try {
      setUpdatingItem(itemId);
      await updateItemQuantity(itemId, newQuantity);
    } catch (error) {
    } finally {
      setUpdatingItem(null);
    }
  };

  const handleRemoveItem = async (itemId) => {
    try {
      await removeItemFromCart(itemId);
    } catch (error) {
    }
  };

  const handleClearCart = async () => {
    if (window.confirm('Are you sure you want to clear your cart?')) {
      try {
        await clearUserCart();
      } catch (error) {
      }
    }
  };

  const handleFixCart = async () => {
    try {
      setFixingCart(true);
      await fixUserCart();
    } catch (error) {
    } finally {
      setFixingCart(false);
    }
  };

  const handleCheckout = async () => {
    if (!user || !user.email || !cartId) {
        return;
    }

    if (cart.length === 0) {
      return;
    }

    if (cartNeedsFixing) {
      return;
    }

    try {
      setValidatingCheckout(true);
      setCheckoutError(null);
      
      // First, initiate checkout to reserve products and validate availability
      await initiateUserCheckout();
      
      // If successful, show confirmation modal
      setCheckoutModal({ isOpen: true });
    } catch (error) {
      setCheckoutError(error.message);
      // If checkout validation fails, try to fix the cart
      try {
        await fixUserCart();
      } catch (fixError) {
        // If fixing fails, just show the error
      }
    } finally {
      setValidatingCheckout(false);
    }
  };

  const handleConfirmCheckout = async () => {
    if (!user || !user.email || !cartId) {
        return;
    }

    if (cart.length === 0) {
      return;
    }

    try {
      setProcessingPayment(true);
      
      const { totalPrice } = getCartTotals();
      const totalWithCharges = calculatePaystackCharge(totalPrice);
      
      // Convert to kobo (multiply by 100) and round
      const amountInKobo = Math.round(totalWithCharges * 100);
      
      // Initiate payment
      const paymentResponse = await initiatePayment(
        user.email,
        amountInKobo,
        cartId
      );
      
      // Redirect to payment URL
      if (paymentResponse.authorization_url) {
        redirectToPayment(paymentResponse.authorization_url);
      } else {
        throw new Error('Payment URL not received from server');
      }
      
    } catch (error) {
      // If payment fails, cancel the checkout to release reservations
      try {
        await cancelUserCheckout();
      } catch (cancelError) {
        // If cancel fails, just log it
      }
      alert(error.message || 'Failed to process checkout. Please try again.');
    } finally {
      setProcessingPayment(false);
      setCheckoutModal({ isOpen: false });
    }
  };

  const formatPrice = (price) => {
    return `₦${parseFloat(price).toLocaleString()}`;
  };

  const getPaystackCharge = () => {
    return calculateProcessingFee(totalPrice);
  };

  const getTotalWithCharges = () => {
    return calculatePaystackCharge(totalPrice);
  };

  const { totalItems, totalPrice } = getCartTotals();
  const cartNeedsFixing = needsFixing();
  const statusSummary = getStatusSummary();
  const itemsNeedingFix = getItemsNeedingFix();

  // Helper function to get status display info
  const getStatusInfo = (item) => {
    switch (item.status) {
      case 'ok':
        return { 
          text: 'Available', 
          color: 'text-green-600', 
          bgColor: '', 
          borderColor: '',
          icon: null
        };
      case 'stock_mismatch':
        return { 
          text: `Only ${item.maxAvailable} available`, 
          color: 'text-yellow-600', 
          bgColor: 'bg-yellow-50', 
          borderColor: 'border-yellow-200',
          icon: <AlertTriangle className="h-4 w-4" />
        };
      case 'out_of_stock':
        return { 
          text: 'Out of stock', 
          color: 'text-red-600', 
          bgColor: 'bg-red-50', 
          borderColor: 'border-red-200',
          icon: <AlertTriangle className="h-4 w-4" />
        };
      case 'deleted':
        return { 
          text: 'Product deleted', 
          color: 'text-red-600', 
          bgColor: 'bg-red-50', 
          borderColor: 'border-red-200',
          icon: <AlertTriangle className="h-4 w-4" />
        };
      default:
        return { 
          text: 'Available', 
          color: 'text-green-600', 
          bgColor: '', 
          borderColor: '',
          icon: null
        };
    }
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 overflow-hidden">
      {/* Backdrop */}
      <div 
        className="absolute inset-0 bg-black bg-opacity-50 transition-opacity"
        onClick={onClose}
      />
      
      {/* Cart Drawer */}
      <div className="absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-xl transform transition-transform duration-300 ease-in-out">
        <div className="flex flex-col h-full">
          {/* Header */}
          <div className="flex items-center justify-between p-4 border-b">
            <div className="flex items-center space-x-2">
              <ShoppingBagIcon className="h-6 w-6 text-blue-600" />
              <h2 className="text-lg font-semibold text-gray-900">
                Shopping Cart ({getItemCount()})
              </h2>
            </div>
            <button
              onClick={onClose}
              className="p-2 text-gray-400 hover:text-gray-600 transition-colors"
            >
              <X className="h-5 w-5" />
            </button>
          </div>

          {/* Error Message */}
          {error && (
            <div className="p-4 bg-red-50 border-l-4 border-red-400">
              <p className="text-red-700 text-sm">{error}</p>
            </div>
          )}

          {/* Checkout Error Message */}
          {checkoutError && (
            <div className="p-4 bg-red-50 border-l-4 border-red-400">
              <div className="flex items-start space-x-3">
                <AlertTriangle className="h-5 w-5 text-red-600 mt-0.5 flex-shrink-0" />
                <div className="flex-1">
                  <h3 className="text-sm font-medium text-red-800">
                    Checkout Validation Failed
                  </h3>
                  <p className="text-sm text-red-700 mt-1">
                    {checkoutError}
                  </p>
                  <p className="text-xs text-red-600 mt-2">
                    Your cart has been updated to reflect current availability.
                  </p>
                </div>
              </div>
            </div>
          )}

          {/* Cart Status Warning */}
          {cartNeedsFixing && (
            <div className="p-4 bg-yellow-50 border-l-4 border-yellow-400">
              <div className="flex items-start space-x-3">
                <AlertTriangle className="h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0" />
                <div className="flex-1">
                  <h3 className="text-sm font-medium text-yellow-800">
                    Cart needs attention
                  </h3>
                  <p className="text-sm text-yellow-700 mt-1">
                    {statusSummary.outOfStockItems > 0 && `${statusSummary.outOfStockItems} item(s) out of stock`}
                    {statusSummary.outOfStockItems > 0 && (statusSummary.stockMismatchItems > 0 || statusSummary.deletedItems > 0) && ', '}
                    {statusSummary.stockMismatchItems > 0 && `${statusSummary.stockMismatchItems} item(s) have limited stock`}
                    {statusSummary.stockMismatchItems > 0 && statusSummary.deletedItems > 0 && ', '}
                    {statusSummary.deletedItems > 0 && `${statusSummary.deletedItems} item(s) have been deleted`}
                  </p>
                  <button
                    onClick={handleFixCart}
                    disabled={fixingCart}
                    className="mt-2 inline-flex items-center px-3 py-1.5 text-xs font-medium text-yellow-800 bg-yellow-100 border border-yellow-300 rounded-md hover:bg-yellow-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                  >
                    {fixingCart ? (
                      <>
                        <div className="animate-spin rounded-full h-3 w-3 border-2 border-yellow-600 border-t-transparent mr-2"></div>
                        Fixing...
                      </>
                    ) : (
                      <>
                        <RefreshCw className="h-3 w-3 mr-2" />
                        Fix Cart
                      </>
                    )}
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Cart Items */}
          <div className="flex-1 overflow-y-auto p-4">
            {loading ? (
              <div className="flex flex-col items-center justify-center h-32">
                <div className="relative">
                  <div className="animate-spin rounded-full h-8 w-8 border-4 border-gray-200"></div>
                  <div className="animate-spin rounded-full h-8 w-8 border-4 border-blue-600 border-t-transparent absolute top-0 left-0"></div>
                </div>
                <span className="mt-3 text-gray-600 font-medium">Loading cart...</span>
                <span className="mt-1 text-sm text-gray-500">Getting your items</span>
              </div>
            ) : cart.length === 0 ? (
              <div className="flex flex-col items-center justify-center h-32 text-gray-500">
                <ShoppingBagIcon className="h-12 w-12 mb-4 text-gray-300" />
                <p className="text-lg font-medium">Your cart is empty</p>
                <p className="text-sm">Add some products to get started</p>
              </div>
            ) : (
              <div className="space-y-4">
                {cart.map((sellerGroup, sellerIndex) => (
                  <div key={sellerIndex} className="border rounded-lg p-4">
                    {/* Seller Info */}
                    <div className="mb-3 pb-2 border-b">
                      <h3 className="font-medium text-gray-900">
                        {sellerGroup.items?.[0]?.product?.seller?.catalogueName || 
                         sellerGroup.items?.[0]?.product?.seller?.name || 
                         sellerGroup.seller?.catalogueName || 
                         sellerGroup.seller?.name || 
                         (sellerGroup.sellerId ? `Seller ${sellerGroup.sellerId.slice(0, 8)}...` : 'Unknown Seller')}
                      </h3>
                    </div>
                    
                    {/* Items from this seller */}
                    <div className="space-y-3">
                      {sellerGroup.items?.map((item) => {
                        const statusInfo = getStatusInfo(item);
                        const isOutOfStock = item.status === 'out_of_stock';
                        const isStockMismatch = item.status === 'stock_mismatch';
                        const isDeleted = item.status === 'deleted';
                        const effectiveQuantity = item.effectiveQuantity !== undefined ? item.effectiveQuantity : item.quantity;
                        
                        return (
                          <div 
                            key={item.id} 
                            className={`flex items-center space-x-3 p-3 rounded-lg border ${statusInfo.borderColor} ${statusInfo.bgColor} ${
                              isOutOfStock || isDeleted ? 'opacity-60' : ''
                            }`}
                          >
                            {/* Product Image */}
                            {item.product?.slug ? (
                              <Link 
                                to={`/product/${item.product.slug}`}
                                className={`flex-shrink-0 hover:opacity-80 transition-opacity ${isOutOfStock || isDeleted ? 'pointer-events-none' : ''}`}
                              >
                                {item.product?.imageUrls?.[0] ? (
                                  <img
                                    src={item.product.imageUrls[0]}
                                    alt={item.product?.name}
                                    className="w-16 h-16 object-cover rounded-md"
                                    onError={(e) => {
                                      e.target.style.display = 'none';
                                    }}
                                  />
                                ) : (
                                  <div className="w-16 h-16 bg-gradient-to-br from-gray-50 to-gray-100 rounded-md flex items-center justify-center">
                                    <div className="w-8 h-8 bg-white rounded shadow-sm flex items-center justify-center">
                                      {item.product?.category?.name ? (
                                        <span className="text-blue-600 font-semibold text-xs">
                                          {item.product.category.name.charAt(0).toUpperCase()}
                                        </span>
                                      ) : (
                                        <svg className="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                          <path fillRule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clipRule="evenodd" />
                                        </svg>
                                      )}
                                    </div>
                                  </div>
                                )}
                              </Link>
                            ) : (
                              <div className="flex-shrink-0 opacity-60">
                                {item.product?.imageUrls?.[0] ? (
                                  <img
                                    src={item.product.imageUrls[0]}
                                    alt={item.product?.name}
                                    className="w-16 h-16 object-cover rounded-md"
                                    onError={(e) => {
                                      e.target.style.display = 'none';
                                    }}
                                  />
                                ) : (
                                  <div className="w-16 h-16 bg-gradient-to-br from-gray-50 to-gray-100 rounded-md flex items-center justify-center">
                                    <div className="w-8 h-8 bg-white rounded shadow-sm flex items-center justify-center">
                                      {item.product?.category?.name ? (
                                        <span className="text-blue-600 font-semibold text-xs">
                                          {item.product.category.name.charAt(0).toUpperCase()}
                                        </span>
                                      ) : (
                                        <svg className="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                          <path fillRule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clipRule="evenodd" />
                                        </svg>
                                      )}
                                    </div>
                                  </div>
                                )}
                              </div>
                            )}
                            
                            {/* Product Details */}
                            <div className="flex-1 min-w-0">
                              {item.product?.slug ? (
                                <Link 
                                  to={`/product/${item.product.slug}`}
                                  className={`hover:text-blue-600 transition-colors ${isOutOfStock || isDeleted ? 'pointer-events-none' : ''}`}
                                >
                                  <h4 className="text-sm font-medium text-gray-900 truncate">
                                    {item.product?.name}
                                  </h4>
                                  <p className="text-sm text-gray-500">
                                    {formatPrice(item.product?.price || 0)}
                                  </p>
                                </Link>
                              ) : (
                                <div className="opacity-60">
                                  <h4 className="text-sm font-medium text-gray-900 truncate">
                                    {item.product?.name}
                                  </h4>
                                  <p className="text-sm text-gray-500">
                                    {formatPrice(item.product?.price || 0)}
                                  </p>
                                  <p className="text-xs text-gray-400">Product details no longer available</p>
                                </div>
                              )}
                              
                              {/* Status Indicator */}
                              <div className={`flex items-center space-x-1 mt-1 ${statusInfo.color}`}>
                                {statusInfo.icon}
                                <span className="text-xs font-medium">
                                  {statusInfo.text}
                                </span>
                              </div>
                              
                              {/* Stock Mismatch Info */}
                              {isStockMismatch && (
                                <p className="text-xs text-yellow-600 mt-1">
                                  You have {item.quantity}, but only {item.maxAvailable} available
                                </p>
                              )}
                              
                              {/* Deleted Product Info */}
                              {isDeleted && (
                                <p className="text-xs text-red-600 mt-1">
                                  This product has been deleted and is no longer available
                                </p>
                              )}
                            </div>
                            
                            {/* Quantity Controls */}
                            <div className="flex items-center space-x-2">
                              <button
                                onClick={() => handleQuantityChange(item.id, item.quantity - 1)}
                                disabled={updatingItem === item.id || isOutOfStock || isDeleted}
                                className="p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50"
                              >
                                <Minus className="h-4 w-4" />
                              </button>
                              
                              <span className="text-sm font-medium text-gray-900 min-w-[2rem] text-center">
                                {effectiveQuantity}
                              </span>
                              
                            <button
                              onClick={() => handleQuantityChange(item.id, item.quantity + 1)}
                              disabled={updatingItem === item.id || isOutOfStock || isDeleted || (item.maxAvailable && item.quantity >= item.maxAvailable)}
                              className="p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50"
                            >
                              <Plus className="h-4 w-4" />
                            </button>
                            </div>
                            
                            {/* Remove Button */}
                            <button
                              onClick={() => handleRemoveItem(item.id)}
                              className="p-1 text-red-400 hover:text-red-600 transition-colors"
                            >
                              <Trash2 className="h-4 w-4" />
                            </button>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                ))}
              </div>
            )}
          </div>

          {/* Footer */}
          {cart.length > 0 && (
            <div className="border-t p-4 space-y-4">
              {/* Totals */}
              <div className="space-y-2">
                <div className="flex justify-between text-sm">
                  <span className="text-gray-600">Items ({totalItems})</span>
                  <span className="font-medium">{formatPrice(totalPrice)}</span>
                </div>
                <div className="flex justify-between text-lg font-semibold">
                  <span>Subtotal</span>
                  <span>{formatPrice(totalPrice)}</span>
                </div>
              </div>

              {/* Actions */}
              <div className="space-y-2">
                <button
                  onClick={handleClearCart}
                  className="w-full px-4 py-2 text-sm text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors"
                >
                  Clear Cart
                </button>
                
                <button
                  onClick={handleCheckout}
                  disabled={processingPayment || validatingCheckout || cart.length === 0 || cartNeedsFixing}
                  className="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
                >
                  {processingPayment ? (
                    <>
                      <div className="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
                      Processing Payment...
                    </>
                  ) : validatingCheckout ? (
                    <>
                      <div className="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
                      Validating Availability...
                    </>
                  ) : cartNeedsFixing ? (
                    'Fix Cart Issues First'
                  ) : (
                    'Proceed to Checkout'
                  )}
                </button>
              </div>
            </div>
          )}
        </div>
      </div>

      {/* Checkout Confirmation Modal */}
      <CheckoutConfirmationModal
        isOpen={checkoutModal.isOpen}
        onClose={() => setCheckoutModal({ isOpen: false })}
        onConfirm={handleConfirmCheckout}
        cartTotal={totalPrice}
        totalItems={totalItems}
        isProcessing={processingPayment}
      />
    </div>
  );
}







================================================
FILE: src/components/cart/CartIcon.jsx
================================================
import React from 'react';
import { useCart } from '../../contexts/CartContext';
import { ShoppingBagIcon } from '../common';

export default function CartIcon({ onClick }) {
  const { getItemCount } = useCart();
  const itemCount = getItemCount();

  return (
    <button
      onClick={onClick}
      className="relative p-2 text-gray-600 hover:text-gray-900 transition-colors"
    >
      <ShoppingBagIcon className="h-6 w-6" />
      
      {/* Cart Badge */}
      {itemCount > 0 && (
        <span className="absolute -top-1 -right-1 bg-black text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium">
          {itemCount > 99 ? '99+' : itemCount}
        </span>
      )}
      
      <span className="sr-only">Shopping Cart</span>
    </button>
  );
}







================================================
FILE: src/components/cart/index.js
================================================
export { default as CartDrawer } from './CartDrawer';
export { default as CartIcon } from './CartIcon';
export { default as AddToCartButton } from './AddToCartButton';







================================================
FILE: src/components/categories/CategoryManager.jsx
================================================
import { useState, useEffect } from 'react';
import { getCategories, createNewCategories, updateCategoryData, deleteCategoryData } from '../../services/categoryService';
import { CategoryListSkeleton } from '../common';

export default function CategoryManager() {
  const [categories, setCategories] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState('');
  
  // Form states
  const [showCreateForm, setShowCreateForm] = useState(false);
  const [newCategoryName, setNewCategoryName] = useState('');
  const [editingCategory, setEditingCategory] = useState(null);
  const [editCategoryName, setEditCategoryName] = useState('');

  // Load categories on component mount
  useEffect(() => {
    loadCategories();
  }, []);

  const loadCategories = async () => {
    try {
      setLoading(true);
      setError(null);
      
      const response = await getCategories();
      setCategories(response.data);
    } catch (error) {
      setError('Failed to load categories. Please try again.');
    } finally {
      setLoading(false);
    }
  };

  const handleCreateCategory = async (e) => {
    e.preventDefault();
    if (!newCategoryName.trim()) return;

    try {
      setError(null);
      
      await createNewCategories([newCategoryName.trim()]);
      setSuccess(`Category "${newCategoryName}" created successfully!`);
      setNewCategoryName('');
      setShowCreateForm(false);
      
      // Reload categories
      await loadCategories();
    } catch (error) {
      setError(error.message || 'Failed to create category. Please try again.');
    }
  };

  const handleUpdateCategory = async (e) => {
    e.preventDefault();
    if (!editCategoryName.trim() || !editingCategory) return;

    try {
      setError(null);
      
      await updateCategoryData(editingCategory.id, { name: editCategoryName.trim() });
      setSuccess(`Category updated to "${editCategoryName}" successfully!`);
      setEditingCategory(null);
      setEditCategoryName('');
      
      // Reload categories
      await loadCategories();
    } catch (error) {
      setError(error.message || 'Failed to update category. Please try again.');
    }
  };

  const handleDeleteCategory = async (categoryId, categoryName) => {
    if (!window.confirm(`Are you sure you want to delete the category "${categoryName}"? This action cannot be undone.`)) {
      return;
    }

    try {
      setError(null);
      
      await deleteCategoryData(categoryId);
      setSuccess(`Category "${categoryName}" deleted successfully!`);
      
      // Reload categories
      await loadCategories();
    } catch (error) {
      setError(error.message || 'Failed to delete category. Please try again.');
    }
  };

  const startEditing = (category) => {
    setEditingCategory(category);
    setEditCategoryName(category.name);
  };

  const cancelEditing = () => {
    setEditingCategory(null);
    setEditCategoryName('');
  };

  // Clear success/error messages after 3 seconds
  useEffect(() => {
    if (success) {
      const timer = setTimeout(() => setSuccess(''), 3000);
      return () => clearTimeout(timer);
    }
  }, [success]);

  useEffect(() => {
    if (error) {
      const timer = setTimeout(() => setError(''), 5000);
      return () => clearTimeout(timer);
    }
  }, [error]);

  if (loading) {
    return (
      <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <div className="space-y-4">
          <div className="flex items-center justify-between">
            <div className="h-6 w-32 bg-gray-200 rounded animate-pulse"></div>
            <div className="h-10 w-24 bg-gray-200 rounded animate-pulse"></div>
          </div>
          <div className="space-y-3">
            {[...Array(5)].map((_, i) => (
              <div key={i} className="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
                <div className="h-5 w-24 bg-gray-200 rounded animate-pulse"></div>
                <div className="flex gap-2">
                  <div className="h-8 w-16 bg-gray-200 rounded animate-pulse"></div>
                  <div className="h-8 w-16 bg-gray-200 rounded animate-pulse"></div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
      <div className="flex items-center justify-between mb-6">
        <h2 className="text-xl font-semibold text-gray-900">Category Management</h2>
        <button
          onClick={() => setShowCreateForm(!showCreateForm)}
          className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"
        >
          {showCreateForm ? 'Cancel' : 'Add Category'}
        </button>
      </div>

      {/* Success Message */}
      {success && (
        <div className="mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg">
          {success}
        </div>
      )}

      {/* Error Message */}
      {error && (
        <div className="mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg">
          {error}
        </div>
      )}

      {/* Create Category Form */}
      {showCreateForm && (
        <form onSubmit={handleCreateCategory} className="mb-6 p-4 bg-gray-50 rounded-lg">
          <h3 className="text-lg font-medium text-gray-900 mb-3">Create New Category</h3>
          <div className="flex gap-3">
            <input
              type="text"
              value={newCategoryName}
              onChange={(e) => setNewCategoryName(e.target.value)}
              placeholder="Enter category name"
              className="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              required
            />
            <button
              type="submit"
              className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors"
            >
              Create
            </button>
          </div>
        </form>
      )}

      {/* Categories List */}
      <div className="space-y-3">
        {categories.length === 0 ? (
          <div className="text-center py-8 text-gray-500">
            <p>No categories found. Create your first category to get started.</p>
          </div>
        ) : (
          categories.map((category) => (
            <div key={category.id} className="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
              {editingCategory?.id === category.id ? (
                // Edit Form
                <form onSubmit={handleUpdateCategory} className="flex-1 flex gap-3">
                  <input
                    type="text"
                    value={editCategoryName}
                    onChange={(e) => setEditCategoryName(e.target.value)}
                    className="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    required
                  />
                  <button
                    type="submit"
                    className="bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors"
                  >
                    Save
                  </button>
                  <button
                    type="button"
                    onClick={cancelEditing}
                    className="bg-gray-500 text-white px-3 py-2 rounded-lg hover:bg-gray-600 transition-colors"
                  >
                    Cancel
                  </button>
                </form>
              ) : (
                // Category Display
                <>
                  <div className="flex-1">
                    <h3 className="font-medium text-gray-900">{category.name}</h3>
                    <p className="text-sm text-gray-500">
                      Created: {new Date(category.createdAt).toLocaleDateString()}
                    </p>
                  </div>
                  <div className="flex gap-2">
                    <button
                      onClick={() => startEditing(category)}
                      className="text-blue-600 hover:text-blue-700 px-3 py-1 rounded hover:bg-blue-50 transition-colors"
                    >
                      Edit
                    </button>
                    <button
                      onClick={() => handleDeleteCategory(category.id, category.name)}
                      className="text-red-600 hover:text-red-700 px-3 py-1 rounded hover:bg-red-50 transition-colors"
                    >
                      Delete
                    </button>
                  </div>
                </>
              )}
            </div>
          ))
        )}
      </div>
    </div>
  );
}







================================================
FILE: src/components/categories/index.js
================================================
export { default as CategoryManager } from './CategoryManager';







================================================
FILE: src/components/chat/ChatList.jsx
================================================
import React, { useState, useEffect, useRef } from 'react';
import { useChat } from '../../contexts/ChatContext';
import { useAuth } from '../../context/AuthContext';
import { ChatListSkeleton } from '../common';
import { socketService } from '../../services/socketService';
import { findExistingChat, checkChatExists } from '../../utils/chatUtils';

const ChatList = ({ onConversationSelect, selectedConversationId }) => {
  const { conversations, loadConversations, searchConversations, loading } = useChat();
  const { isSeller, user: currentUser } = useAuth();
  const [searchQuery, setSearchQuery] = useState('');
  const [allConversations, setAllConversations] = useState([]);
  const [expandedOrders, setExpandedOrders] = useState(new Set());
  const [isConnected, setIsConnected] = useState(false);
  const [activeFilter, setActiveFilter] = useState('all'); // 'all', 'chats', 'orders'
  const searchTimeoutRef = useRef(null);

  // Improved algorithm to check existing chats and handle message button clicks
  const handleMessageSeller = async (orderSeller) => {
    const sellerUserId = orderSeller.seller.userId;
    const sellerCatalogueName = orderSeller.seller.catalogueName;
    
    
    try {
      // Step 1: Check loaded conversations first (fast)
      const existingChat = findExistingChat(conversations, sellerUserId);
      
      if (existingChat) {
        // For existing chats, preserve the catalogue name if it's a seller conversation
        if (existingChat.participant?.role === 'Seller' && sellerCatalogueName) {
          // Create conversationId with catalogue name to preserve it
          const conversationId = `seller-${sellerUserId}::${sellerCatalogueName}`;
          onConversationSelect(conversationId);
        } else {
          // Navigate to existing chat normally
          onConversationSelect(existingChat.id);
        }
        return;
      }
      
      // Step 2: Check API for existing chat (comprehensive)
      const existingChatId = await checkChatExists(sellerUserId);
      
      if (existingChatId) {
        // For existing chats found via API, preserve catalogue name if it's a seller conversation
        const conversationId = `seller-${sellerUserId}::${sellerCatalogueName}`;
        onConversationSelect(conversationId);
        return;
      }
      
      // Step 3: No existing chat found, start new chat
      // Start new chat - pass seller info in structured format: seller-userId::catalogueName
      onConversationSelect(`seller-${sellerUserId}::${sellerCatalogueName}`);
      
    } catch (error) {
      // Fallback: start new chat if there's any error
      onConversationSelect(`seller-${sellerUserId}::${sellerCatalogueName}`);
    }
  };

  // Store all conversations when they're first loaded
  useEffect(() => {
    if (conversations.length > 0 && searchQuery === '') {
      setAllConversations(conversations);
    }
  }, [conversations, searchQuery]);

  // Filter conversations based on active filter
  const getFilteredConversations = () => {
    if (activeFilter === 'all') {
      return conversations;
    } else if (activeFilter === 'chats') {
      return conversations.filter(conv => conv.type !== 'order');
    } else if (activeFilter === 'orders') {
      return conversations.filter(conv => conv.type === 'order');
    }
    return conversations;
  };

  const filteredConversations = getFilteredConversations();

  // Listen for conversation creation events
  useEffect(() => {
    const handleConversationCreated = () => {
      loadConversations();
    };

    const handleSellerInfoUpdated = () => {
      // Reload conversations when seller info is updated
      loadConversations();
    };

    window.addEventListener('conversationCreated', handleConversationCreated);
    window.addEventListener('sellerInfoUpdated', handleSellerInfoUpdated);
    
    return () => {
      window.removeEventListener('conversationCreated', handleConversationCreated);
      window.removeEventListener('sellerInfoUpdated', handleSellerInfoUpdated);
    };
  }, [loadConversations]);

  // Monitor connection status
  useEffect(() => {
    const checkConnection = () => {
      setIsConnected(socketService.connected);
    };
    
    checkConnection();
    const connectionInterval = setInterval(checkConnection, 2000);
    
    return () => {
      clearInterval(connectionInterval);
    };
  }, []);

  // Cleanup timeout on unmount
  useEffect(() => {
    return () => {
      if (searchTimeoutRef.current) {
        clearTimeout(searchTimeoutRef.current);
      }
    };
  }, []);

  const handleSearch = async (query) => {

    setSearchQuery(query);
    
    // Clear existing timeout
    if (searchTimeoutRef.current) {
      clearTimeout(searchTimeoutRef.current);
    }
    
    // Debounce search by 300ms
    searchTimeoutRef.current = setTimeout(async () => {
      try {
        if (query.trim()) {

          await searchConversations(query);
        } else {

          // If search is empty, reload all conversations
          await loadConversations();
        }
      } catch (error) {

      }
    }, 300);
  };

  const formatTime = (timestamp) => {
    const date = new Date(timestamp);
    const now = new Date();
    const diffInMinutes = (now - date) / (1000 * 60);
    const diffInHours = diffInMinutes / 60;
    const diffInDays = diffInHours / 24;

    if (diffInMinutes < 1) {
      return 'Just now';
    } else if (diffInMinutes < 60) {
      return `${Math.floor(diffInMinutes)}m ago`;
    } else if (diffInHours < 24) {
      return `${Math.floor(diffInHours)}h ago`;
    } else if (diffInDays < 7) {
      return `${Math.floor(diffInDays)}d ago`;
    } else {
      return date.toLocaleDateString('en-US', { 
        month: 'short', 
        day: 'numeric' 
      });
    }
  };

  const truncateMessage = (message, maxLength = 30) => {
    if (message.length <= maxLength) return message;
    return message.substring(0, maxLength) + '...';
  };

  // No loading spinner - seamless like demo


  return (
    <div className="flex flex-col h-full" style={{ backgroundColor: '#F7F5F0' }}>
      {/* Header - Fixed */}
      <div className="flex-shrink-0 p-5 border-b border-gray-200" style={{ backgroundColor: '#F7F5F0' }}>
        <div className="flex items-center justify-between mb-4">
          <h2 className="text-xl font-bold text-gray-900">Messages</h2>
          <div className="flex items-center space-x-2">
            <div className={`w-2 h-2 rounded-full ${isConnected ? 'bg-green-500' : 'bg-yellow-400 animate-pulse'}`}></div>
            <span className="text-sm text-gray-600">{isConnected ? 'Connected' : 'Connecting...'}</span>
            {!isConnected && (
              <button
                onClick={async () => {
                  const token = localStorage.getItem('campor_token');
                  try {
                    await socketService.reconnect(token);

                  } catch (error) {

                  }
                }}
                className="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600"
              >
                Retry
              </button>
            )}
          </div>
        </div>
        
        {/* Search Bar */}
        <div className="relative mb-4">
          <input
            type="text"
            placeholder="Search...."
            value={searchQuery}
            onChange={(e) => handleSearch(e.target.value)}
            className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white transition-colors text-gray-700 placeholder-gray-500"
          />
        </div>

        {/* Filter Buttons */}
        <div className="flex space-x-2">
          <button
            onClick={() => setActiveFilter('all')}
            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
              activeFilter === 'all'
                ? 'bg-blue-600 text-white'
                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
            }`}
          >
            All
          </button>
          <button
            onClick={() => setActiveFilter('chats')}
            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
              activeFilter === 'chats'
                ? 'bg-blue-600 text-white'
                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
            }`}
          >
            Chats
          </button>
          <button
            onClick={() => setActiveFilter('orders')}
            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
              activeFilter === 'orders'
                ? 'bg-blue-600 text-white'
                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
            }`}
          >
            Orders
          </button>
        </div>
      </div>

      {/* Conversations List - Scrollable */}
      <div className="flex-1 overflow-y-auto chat-scrollbar">
        {loading ? (
          <div className="p-3">
            <ChatListSkeleton />
          </div>
        ) : filteredConversations.length === 0 ? (
          <div className="flex items-center justify-center h-full text-gray-500">
            <p>No conversations found</p>
          </div>
        ) : (
          <div className="space-y-2 p-3">
            {filteredConversations.map((conversation) => (
              <div key={conversation.id}>
                {conversation.type === 'order' ? (
                  // Order-grouped conversation
                  <div className="mb-4">
                    <div 
                      className="bg-blue-600 text-white p-4 rounded-xl mb-2 cursor-pointer hover:bg-blue-700 transition-colors"
                      onClick={() => {
                        const newExpanded = new Set(expandedOrders);
                        if (newExpanded.has(conversation.id)) {
                          newExpanded.delete(conversation.id);
                        } else {
                          newExpanded.add(conversation.id);
                        }
                        setExpandedOrders(newExpanded);
                      }}
                    >
                      <div className="flex items-center justify-between">
                        <div className="flex items-center space-x-3">
                          <div className="w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M9 6L9 7C9 8.65685 10.3431 10 12 10C13.6569 10 15 8.65685 15 7V6" stroke="white" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
                              <path d="M15.6116 3H8.3886C6.43325 3 4.76449 4.41365 4.44303 6.3424L2.77636 16.3424C2.37001 18.7805 4.25018 21 6.72194 21H17.2783C19.75 21 21.6302 18.7805 21.2238 16.3424L19.5572 6.3424C19.2357 4.41365 17.5669 3 15.6116 3Z" stroke="white" strokeWidth="1.5" strokeLinejoin="round"/>
                            </svg>
                          </div>
                          <div>
                            <h3 className="font-semibold text-lg">{conversation.orderCode}</h3>
                          </div>
                        </div>
                        <svg 
                          className={`w-5 h-5 text-white transition-transform duration-200 ${
                            expandedOrders.has(conversation.id) ? 'rotate-180' : ''
                          }`} 
                          fill="none" 
                          stroke="currentColor" 
                          viewBox="0 0 24 24"
                        >
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 15l7-7 7 7" />
                        </svg>
                      </div>
                    </div>
                    
                    {/* Sellers in this order - Only show when expanded */}
                    {expandedOrders.has(conversation.id) && (
                      <div className="space-y-0">
                      {conversation.orderSellers.map((orderSeller, index) => {
                        const isCurrentUser = orderSeller.seller.userId === currentUser?.id;
                        const sellerItems = conversation.orderItems.filter(item => 
                          item.sellerId === orderSeller.sellerId
                        );
                        
                        return (
                          <div key={orderSeller.id} className="bg-white">
                            {/* Seller Header */}
                            <div className="flex items-center justify-between p-3 border-b border-gray-100">
                              <div className="flex items-center space-x-3">
                                <div className="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold">
                                  {orderSeller.seller.catalogueName.charAt(0)}
                                </div>
                                <div className="flex items-center space-x-2">
                                  <span className="font-medium text-gray-900">{orderSeller.seller.catalogueName}</span>
                                </div>
                              </div>
                              <button
                                onClick={() => {
                                  if (isCurrentUser) {
                                    alert('You cannot message yourself. This is your own order.');
                                    return;
                                  }
                                  // Use the algorithm to check existing chats
                                  handleMessageSeller(orderSeller);
                                }}
                                disabled={isCurrentUser}
                                className={`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${
                                  isCurrentUser 
                                    ? 'bg-gray-400 cursor-not-allowed'
                                    : 'bg-blue-600 hover:bg-blue-700 cursor-pointer'
                                }`}
                              >
                                <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                  <path d="M21 15.5C21 16.0304 20.7893 16.5391 20.4142 16.9142C20.0391 17.2893 19.5304 17.5 19 17.5H7L3 21.5V5.5C3 4.96957 3.21071 4.46086 3.58579 4.08579C3.96086 3.71071 4.46957 3.5 5 3.5H19C19.5304 3.5 20.0391 3.71071 20.4142 4.08579C20.7893 4.46086 21 4.96957 21 5.5V15.5Z" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                                </svg>
                              </button>
                            </div>
                            
                            {/* Seller Items */}
                            <div className="space-y-2 p-3">
                              {sellerItems.map((item) => (
                                <div key={item.id} className="bg-white border border-black rounded-lg p-3">
                                  <div className="flex items-center space-x-3">
                                    <div className="w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden">
                                      {item.productImages && item.productImages.length > 0 ? (
                                        <img 
                                          src={item.productImages[0]} 
                                          alt={item.productName}
                                          className="w-full h-full object-cover"
                                        />
                                      ) : (
                                        <svg className="w-8 h-8 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                          <path fillRule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clipRule="evenodd" />
                                        </svg>
                                      )}
                                    </div>
                                    <div className="flex-1 min-w-0">
                                      <h4 className="font-medium text-gray-900 truncate">{item.productName}</h4>
                                      <p className="text-sm text-gray-500">Qty: {item.quantity} x ₦{item.priceAtPurchase.toLocaleString()}</p>
                                    </div>
                                    <div className="text-right">
                                      <p className="font-medium text-gray-900">₦{(item.priceAtPurchase * item.quantity).toLocaleString()}</p>
                                    </div>
                                  </div>
                                </div>
                              ))}
                            </div>
                            
                            {/* Separator line between sellers */}
                            {index < conversation.orderSellers.length - 1 && (
                              <div className="border-t border-gray-200"></div>
                            )}
                          </div>
                        );
                      })}
                      </div>
                    )}
                  </div>
                ) : (
                  // Individual conversation
                  <div
                onClick={() => onConversationSelect(conversation.id)}
                className={`p-4 rounded-xl cursor-pointer transition-all duration-200 border-2 ${
                  selectedConversationId === conversation.id
                    ? 'bg-blue-50 border-blue-400 shadow-sm'
                    : 'bg-gray-50 border-blue-300 hover:bg-gray-100 hover:border-blue-400 hover:shadow-sm'
                }`}
              >
                <div className="flex items-start space-x-4">
                  {/* Avatar */}
                  <div className="relative flex-shrink-0">
                    <div className="w-14 h-14 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold text-lg">
                      {conversation.participant.initials}
                    </div>
                    {conversation.participant.isOnline && (
                      <div className="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"></div>
                    )}
                  </div>

                  {/* Conversation Info */}
                  <div className="flex-1 min-w-0">
                    {/* Name and Time */}
                    <div className="flex items-center justify-between mb-2">
                      <h3 className="text-base font-semibold text-gray-900 truncate">
                        {conversation.participant.name}
                      </h3>
                      {conversation.lastMessage && (
                        <span className="text-xs text-gray-500 flex-shrink-0 ml-2">
                          {formatTime(conversation.lastMessage.timestamp)}
                        </span>
                      )}
                    </div>
                    
                    {/* Message Preview and Unread Count */}
                    <div className="flex items-center justify-between">
                      {conversation.lastMessage && (
                        <div className="flex items-center space-x-2 text-sm text-gray-600 truncate flex-1 mr-2">
                          {/* Image icon for image messages */}
                          {conversation.lastMessage.imageUrl && (
                            <div className="flex items-center space-x-1 text-gray-500">
                              <svg className="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                              </svg>
                              <span className="text-xs">Photo</span>
                            </div>
                          )}
                          {/* Text content */}
                          {conversation.lastMessage.content && (
                            <span className="truncate">
                              {conversation.lastMessage.content}
                            </span>
                          )}
                          {/* Show "Photo" text if only image, no text */}
                          {conversation.lastMessage.imageUrl && !conversation.lastMessage.content && (
                            <span className="text-gray-500">Photo</span>
                          )}
                        </div>
                      )}
                      
                      {/* Unread Count Badge */}
                      {conversation.unreadCount > 0 && (
                        <div className="bg-blue-500 text-white text-xs rounded-full min-w-5 h-5 flex items-center justify-center font-medium px-1 flex-shrink-0">
                          {conversation.unreadCount > 99 ? '99+' : conversation.unreadCount}
                        </div>
                      )}
                    </div>
                  </div>
                </div>
                  </div>
                )}
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );
};

export default ChatList;


================================================
FILE: src/components/chat/index.js
================================================
export { default as ChatList } from './ChatList';
export { default as ChatWindow } from './ChatWindow';



================================================
FILE: src/components/common/BlurText.jsx
================================================
import { motion } from 'framer-motion';
import { useEffect, useRef, useState } from 'react';

const BlurText = ({
  text = '',
  delay = 150,
  className = '',
  threshold = 0.1,
  rootMargin = '-100px',
  staggerDelay = 0.1,
  duration = 0.8
}) => {
  const words = text.split(' ');
  const [inView, setInView] = useState(false);
  const ref = useRef(null);

  useEffect(() => {
    if (!ref.current) return;
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setInView(true);
          observer.unobserve(ref.current);
        }
      },
      { threshold, rootMargin }
    );
    observer.observe(ref.current);
    return () => observer.disconnect();
  }, [threshold, rootMargin]);

  return (
    <span ref={ref} className={className}>
      {words.map((word, index) => (
        <motion.span
          key={index}
          className="inline-block mr-2"
          initial={{ 
            opacity: 0, 
            filter: 'blur(8px)',
            y: 20
          }}
          animate={inView ? {
            opacity: 1,
            filter: 'blur(0px)',
            y: 0
          } : {
            opacity: 0,
            filter: 'blur(8px)',
            y: 20
          }}
          transition={{
            duration: duration,
            delay: index * staggerDelay,
            ease: [0.25, 0.46, 0.45, 0.94], // Custom easing for smooth animation
            filter: { duration: duration * 0.8 }, // Faster blur transition
          }}
        >
          {word}
        </motion.span>
      ))}
    </span>
  );
};

export default BlurText;



================================================
FILE: src/components/common/Breadcrumb.jsx
================================================
import { Link } from 'react-router-dom';

export default function Breadcrumb({ items = [] }) {
  if (!items || items.length === 0) return null;

  return (
    <nav className="mb-6" aria-label="Breadcrumb">
      <ol className="flex items-center space-x-2 text-sm text-gray-600">
        {items.map((item, index) => (
          <li key={index} className="flex items-center">
            {index > 0 && (
              <svg className="flex-shrink-0 h-4 w-4 text-gray-400 mx-2" fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clipRule="evenodd" />
              </svg>
            )}
            {item.href ? (
              <Link 
                to={item.href} 
                className="hover:text-blue-600 transition-colors"
              >
                {item.label}
              </Link>
            ) : (
              <span className={index === items.length - 1 ? "text-gray-900 font-medium" : "text-gray-600"}>
                {item.label}
              </span>
            )}
          </li>
        ))}
      </ol>
    </nav>
  );
}



================================================
FILE: src/components/common/Button.jsx
================================================
import { forwardRef } from 'react';

const Button = forwardRef(({ 
  children, 
  variant = 'primary', 
  size = 'md', 
  disabled = false, 
  loading = false,
  onClick,
  type = 'button',
  className = '',
  ...props 
}, ref) => {
  const baseClasses = 'inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';
  
  const variants = {
    primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500',
    secondary: 'bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500',
    outline: 'border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500',
    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',
    ghost: 'text-gray-700 hover:bg-gray-100 focus:ring-gray-500'
  };
  
  const sizes = {
    sm: 'px-3 py-1.5 text-sm',
    md: 'px-4 py-2 text-sm',
    lg: 'px-6 py-3 text-base'
  };
  
  const classes = `${baseClasses} ${variants[variant]} ${sizes[size]} ${className}`;
  
  return (
    <button
      ref={ref}
      type={type}
      disabled={disabled || loading}
      onClick={onClick}
      className={classes}
      {...props}
    >
      {loading && (
        <svg className="animate-spin -ml-1 mr-2 h-4 w-4" fill="none" viewBox="0 0 24 24">
          <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" />
          <path className="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
        </svg>
      )}
      {children}
    </button>
  );
});

Button.displayName = 'Button';

export default Button;



================================================
FILE: src/components/common/CatalogueCoverUpload.jsx
================================================
import { useState, useRef } from 'react';
import { uploadImage } from '../../services/cloudinaryService';

export default function CatalogueCoverUpload({ 
  coverUrl, 
  onCoverChange, 
  className = "",
  disabled = false 
}) {
  const [uploading, setUploading] = useState(false);
  const [error, setError] = useState(null);
  const fileInputRef = useRef(null);

  const handleFileSelect = async (event) => {
    const file = event.target.files[0];
    if (!file) return;

    // Validate file
    if (!file.type.startsWith('image/')) {
      setError('Please select an image file');
      return;
    }

    // Validate file size (10MB limit for covers)
    const maxSize = 10 * 1024 * 1024; // 10MB
    if (file.size > maxSize) {
      setError('File size must not exceed 10MB');
      return;
    }

    setUploading(true);
    setError(null);

    try {

      // Upload to Cloudinary with catalogue-specific folder
      const result = await uploadImage(file, {
        folder: 'samples/ecommerce/catalogue-covers',
        tags: 'catalogue-cover'
      });

      
      // Update parent component with the new cover URL
      onCoverChange(result.url);
      
    } catch (err) {
      setError(err.message);
    } finally {
      setUploading(false);
    }
  };

  const handleRemoveCover = () => {
    onCoverChange('');
    if (fileInputRef.current) {
      fileInputRef.current.value = '';
    }
  };

  const handleClick = () => {
    if (!disabled && !uploading) {
      fileInputRef.current?.click();
    }
  };

  return (
    <div className={`catalogue-cover-upload ${className}`}>
      <input
        ref={fileInputRef}
        type="file"
        accept="image/*"
        onChange={handleFileSelect}
        className="hidden"
        disabled={disabled || uploading}
      />

      {/* Cover Preview */}
      <div className="relative">
        {coverUrl ? (
          <div className="relative group">
            <img
              src={coverUrl}
              alt="Catalogue cover"
              className="w-full h-48 object-cover rounded-lg border border-gray-200"
            />
            {!disabled && (
              <div className="absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                <div className="flex gap-2">
                  <button
                    onClick={handleClick}
                    disabled={uploading}
                    className="px-3 py-1 bg-white text-gray-800 rounded text-sm hover:bg-gray-100 disabled:opacity-50"
                  >
                    {uploading ? 'Uploading...' : 'Change'}
                  </button>
                  <button
                    onClick={handleRemoveCover}
                    disabled={uploading}
                    className="px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-600 disabled:opacity-50"
                  >
                    Remove
                  </button>
                </div>
              </div>
            )}
          </div>
        ) : (
          <div
            onClick={handleClick}
            className={`w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-gray-400 transition-colors ${
              disabled || uploading ? 'opacity-50 cursor-not-allowed' : ''
            }`}
          >
            {uploading ? (
              <div className="flex flex-col items-center">
                <svg className="animate-spin h-8 w-8 text-gray-400 mb-2" fill="none" viewBox="0 0 24 24">
                  <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                  <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span className="text-sm text-gray-500">Uploading...</span>
              </div>
            ) : (
              <div className="flex flex-col items-center">
                <svg className="h-12 w-12 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                </svg>
                <span className="text-sm text-gray-600 font-medium">Upload Catalogue Cover</span>
                <span className="text-xs text-gray-500 mt-1">Click to browse or drag and drop</span>
                <span className="text-xs text-gray-400 mt-1">PNG, JPG, GIF up to 10MB</span>
              </div>
            )}
          </div>
        )}
      </div>

      {/* Error Message */}
      {error && (
        <div className="mt-2 text-sm text-red-600 bg-red-50 p-2 rounded">
          {error}
        </div>
      )}

      {/* Help Text */}
      {!error && (
        <div className="mt-2 text-xs text-gray-500">
          Recommended: 1200x400px or similar aspect ratio for best display
        </div>
      )}
    </div>
  );
}



================================================
FILE: src/components/common/ChatIcon.jsx
================================================
import React from 'react';

export default function ChatIcon({ className = "w-5 h-5", ...props }) {
  return (
    <svg 
      width="24" 
      height="25" 
      viewBox="0 0 24 25" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      className={className}
      {...props}
    >
      <path 
        d="M21 15.5C21 16.0304 20.7893 16.5391 20.4142 16.9142C20.0391 17.2893 19.5304 17.5 19 17.5H7L3 21.5V5.5C3 4.96957 3.21071 4.46086 3.58579 4.08579C3.96086 3.71071 4.46957 3.5 5 3.5H19C19.5304 3.5 20.0391 3.71071 20.4142 4.08579C20.7893 4.46086 21 4.96957 21 5.5V15.5Z" 
        stroke="currentColor" 
        strokeWidth="2" 
        strokeLinecap="round" 
        strokeLinejoin="round"
      />
    </svg>
  );
}



================================================
FILE: src/components/common/CheckoutConfirmationModal.jsx
================================================
import React from 'react';
import { X, CreditCard, AlertCircle } from 'lucide-react';
import { formatPrice, calculatePaystackCharge } from '../../utils/constants';

export default function CheckoutConfirmationModal({ 
  isOpen, 
  onClose, 
  onConfirm, 
  cartTotal, 
  totalItems,
  isProcessing = false 
}) {
  if (!isOpen) return null;

  const paystackCharge = calculatePaystackCharge(cartTotal);
  const totalWithCharges = cartTotal + paystackCharge;

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto">
      {/* Backdrop */}
      <div 
        className="fixed inset-0 bg-black bg-opacity-50 transition-opacity"
        onClick={onClose}
      />
      
      {/* Modal */}
      <div className="flex min-h-full items-center justify-center p-4">
        <div className="relative bg-white rounded-xl shadow-xl max-w-md w-full">
          {/* Header */}
          <div className="flex items-center justify-between p-6 border-b border-gray-200">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                <CreditCard className="w-5 h-5 text-blue-600" />
              </div>
              <h2 className="text-lg font-semibold text-gray-900">Confirm Checkout</h2>
            </div>
            <button
              onClick={onClose}
              disabled={isProcessing}
              className="p-2 text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50"
            >
              <X className="w-5 h-5" />
            </button>
          </div>

          {/* Content */}
          <div className="p-6">
            <p className="text-gray-600 mb-6">
              Please review your order details and payment breakdown before proceeding to Paystack.
            </p>

            {/* Order Summary */}
            <div className="bg-gray-50 rounded-lg p-4 mb-6">
              <h3 className="font-medium text-gray-900 mb-3">Order Summary</h3>
              <div className="space-y-2">
                <div className="flex justify-between text-sm">
                  <span className="text-gray-600">Items ({totalItems})</span>
                  <span className="font-medium text-gray-900">{formatPrice(cartTotal)}</span>
                </div>
                
                <div className="flex justify-between text-sm">
                  <span className="text-gray-600">Delivery</span>
                  <span className="text-blue-600">Campus pickup</span>
                </div>
                
                <div className="flex justify-between text-sm">
                  <span className="text-gray-600">Payment processing fee</span>
                  <span className="font-medium text-gray-900">{formatPrice(paystackCharge)}</span>
                </div>
                
                <div className="border-t border-gray-300 pt-2 mt-3">
                  <div className="flex justify-between">
                    <span className="font-semibold text-gray-900">Total Amount</span>
                    <span className="text-lg font-bold text-gray-900">{formatPrice(totalWithCharges)}</span>
                  </div>
                </div>
              </div>
            </div>


            {/* Actions */}
            <div className="space-y-3">
              <button
                onClick={onConfirm}
                disabled={isProcessing}
                className="w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-medium"
              >
                {isProcessing ? (
                  <>
                    <div className="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
                    Processing...
                  </>
                ) : (
                  <>
                    <CreditCard className="w-4 h-4" />
                    Pay Now
                  </>
                )}
              </button>
              <button
                onClick={onClose}
                disabled={isProcessing}
                className="w-full px-6 py-3 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium"
              >
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}



================================================
FILE: src/components/common/CompleteOrderModal.jsx
================================================
import { useState } from 'react';

export default function CompleteOrderModal({ isOpen, onClose, onSubmit }) {
  const [completionCode, setCompletionCode] = useState('');
  const [loading, setLoading] = useState(false);

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (completionCode.length !== 6) {
      alert('Please enter a valid 6-digit code');
      return;
    }
    
    setLoading(true);
    try {
      await onSubmit(completionCode);
      setCompletionCode('');
      onClose();
    } catch (error) {
      alert('Failed to complete order. Please try again.');
    } finally {
      setLoading(false);
    }
  };

  const handleClose = () => {
    setCompletionCode('');
    onClose();
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
      {/* Backdrop */}
      <div 
        className="absolute inset-0 bg-black bg-opacity-50 transition-opacity"
        onClick={handleClose}
      />
      
      {/* Modal */}
      <div className="relative bg-white rounded-2xl shadow-2xl w-full max-w-md mx-auto transform transition-all">
        {/* Header */}
        <div className="flex items-center justify-between p-6 border-b border-gray-200">
          <div className="flex items-center gap-3">
            <div className="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
              <svg className="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7" />
              </svg>
            </div>
            <h2 className="text-xl font-semibold text-gray-900">Complete Order</h2>
          </div>
          <button
            onClick={handleClose}
            className="p-2 hover:bg-gray-100 rounded-full transition-colors"
          >
            <svg className="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        {/* Content */}
        <div className="p-6">
          <form onSubmit={handleSubmit} className="space-y-6">
            {/* Instruction */}
            <div>
              <h3 className="text-lg font-medium text-gray-900 mb-2">Enter Completion Code</h3>
              <p className="text-gray-600 text-sm">
                Ask the buyer for their 6-digit completion code to finalize the transaction
              </p>
            </div>

            {/* Input Field */}
            <div>
              <input
                type="text"
                value={completionCode}
                onChange={(e) => {
                  const value = e.target.value.replace(/\D/g, '').slice(0, 6);
                  setCompletionCode(value);
                }}
                placeholder="Enter 6 digit code (e.g. 123456)"
                className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-center text-lg font-mono tracking-widest"
                maxLength={6}
                autoFocus
              />
            </div>

            {/* How it works */}
            <div className="bg-blue-50 rounded-lg p-4">
              <h4 className="text-sm font-medium text-blue-900 mb-2">How it works:</h4>
              <p className="text-sm text-blue-800">
                The buyer receives a unique code when they pay. Enter this code to confirm the transaction and release your payment.
              </p>
            </div>

            {/* Buttons */}
            <div className="flex gap-3 pt-2">
              <button
                type="button"
                onClick={handleClose}
                className="flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"
              >
                Cancel
              </button>
              <button
                type="submit"
                disabled={loading || completionCode.length !== 6}
                className={`flex-1 py-3 px-4 rounded-lg font-medium transition-colors ${
                  loading || completionCode.length !== 6
                    ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
                    : 'bg-blue-600 hover:bg-blue-700 text-white'
                }`}
              >
                {loading ? (
                  <div className="flex items-center justify-center gap-2">
                    <svg className="animate-spin w-4 h-4" fill="none" viewBox="0 0 24 24">
                      <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                      <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    Completing...
                  </div>
                ) : (
                  'Complete Order'
                )}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  );
}



================================================
FILE: src/components/common/ConfirmationModal.jsx
================================================
import { useEffect } from 'react';

const ConfirmationModal = ({ 
  isOpen, 
  onClose, 
  onConfirm,
  title = "Confirm Action",
  message = "Are you sure you want to proceed?",
  confirmText = "Yes",
  cancelText = "Cancel",
  confirmButtonColor = "red",
  icon = null,
  autoCloseOnConfirm = true,
  isConfirming = false
}) => {
  // Close modal on escape key press
  useEffect(() => {
    const handleEscape = (e) => {
      if (e.key === 'Escape') {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
      // Prevent body scroll when modal is open
      document.body.style.overflow = 'hidden';
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
      document.body.style.overflow = 'unset';
    };
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  const handleOverlayClick = (e) => {
    if (e.target === e.currentTarget) {
      onClose();
    }
  };

  const handleConfirm = () => {
    onConfirm();
    if (autoCloseOnConfirm) {
      onClose();
    }
  };

  const confirmButtonClasses = {
    red: 'bg-red-600 hover:bg-red-700 text-white',
    blue: 'bg-blue-600 hover:bg-blue-700 text-white',
    green: 'bg-green-600 hover:bg-green-700 text-white',
    gray: 'bg-gray-600 hover:bg-gray-700 text-white'
  };

  return (
    <div 
      className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"
      onClick={handleOverlayClick}
    >
      <div className="bg-white rounded-lg shadow-xl w-full max-w-md mx-4">
        {/* Header */}
        <div className="flex items-center justify-between p-6 border-b border-gray-200">
          <div className="flex items-center gap-3">
            {icon && (
              <div className="flex-shrink-0">
                {icon}
              </div>
            )}
            <h2 className="text-lg font-semibold text-gray-900">{title}</h2>
          </div>
          <button
            onClick={onClose}
            className="p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"
          >
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        {/* Content */}
        <div className="p-6">
          <p className="text-gray-600 mb-6">{message}</p>
          
          {/* Action Buttons */}
          <div className="flex gap-3 justify-end">
            <button
              onClick={onClose}
              disabled={isConfirming}
              className="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
            >
              {cancelText}
            </button>
            <button
              onClick={handleConfirm}
              disabled={isConfirming}
              className={`px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${confirmButtonClasses[confirmButtonColor]}`}
            >
              {confirmText}
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default ConfirmationModal;



================================================
FILE: src/components/common/ExportOptionsModal.jsx
================================================
import React, { useState } from 'react';

const ExportOptionsModal = ({ isOpen, onClose, onExport, data, title = "Export Data" }) => {
  const [exportFormat, setExportFormat] = useState('csv');
  const [dateRange, setDateRange] = useState('all');
  const [selectedFields, setSelectedFields] = useState({
    orderCode: true,
    customer: true,
    date: true,
    status: true,
    amount: true,
    items: true,
    paymentMethod: false,
    shippingAddress: false
  });
  const [customDateRange, setCustomDateRange] = useState({
    startDate: '',
    endDate: ''
  });

  const fieldOptions = [
    { key: 'orderCode', label: 'Order Code' },
    { key: 'customer', label: 'Customer Name' },
    { key: 'date', label: 'Order Date' },
    { key: 'status', label: 'Status' },
    { key: 'amount', label: 'Amount' },
    { key: 'items', label: 'Items Count' },
    { key: 'paymentMethod', label: 'Payment Method' },
    { key: 'shippingAddress', label: 'Shipping Address' }
  ];

  const handleFieldToggle = (fieldKey) => {
    setSelectedFields(prev => ({
      ...prev,
      [fieldKey]: !prev[fieldKey]
    }));
  };

  const handleSelectAll = () => {
    const allSelected = Object.values(selectedFields).every(Boolean);
    const newFields = {};
    fieldOptions.forEach(field => {
      newFields[field.key] = !allSelected;
    });
    setSelectedFields(newFields);
  };

  const filterDataByDateRange = (data) => {
    if (dateRange === 'all') return data;
    
    const now = new Date();
    let startDate, endDate;

    switch (dateRange) {
      case 'today':
        startDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());
        endDate = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
        break;
      case 'week':
        startDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
        endDate = now;
        break;
      case 'month':
        startDate = new Date(now.getFullYear(), now.getMonth(), 1);
        endDate = now;
        break;
      case 'custom':
        if (!customDateRange.startDate || !customDateRange.endDate) return data;
        startDate = new Date(customDateRange.startDate);
        endDate = new Date(customDateRange.endDate);
        break;
      default:
        return data;
    }

    return data.filter(order => {
      const orderDate = new Date(order.order?.createdAt || order.createdAt);
      return orderDate >= startDate && orderDate <= endDate;
    });
  };

  const handleExport = () => {
    const filteredData = filterDataByDateRange(data);
    const selectedFieldKeys = Object.keys(selectedFields).filter(key => selectedFields[key]);
    
    onExport({
      format: exportFormat,
      data: filteredData,
      fields: selectedFieldKeys,
      dateRange: dateRange,
      customDateRange: customDateRange
    });
    
    onClose();
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto">
      <div className="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div className="fixed inset-0 transition-opacity" aria-hidden="true">
          <div className="absolute inset-0 bg-gray-500 opacity-75" onClick={onClose}></div>
        </div>

        <span className="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

        <div className="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
          <div className="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
            <div className="sm:flex sm:items-start">
              <div className="mt-3 text-center sm:mt-0 sm:text-left w-full">
                <h3 className="text-lg leading-6 font-medium text-gray-900 mb-4">
                  {title}
                </h3>

                {/* Export Format */}
                <div className="mb-4">
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Export Format
                  </label>
                  <div className="flex gap-4">
                    <label className="flex items-center">
                      <input
                        type="radio"
                        value="csv"
                        checked={exportFormat === 'csv'}
                        onChange={(e) => setExportFormat(e.target.value)}
                        className="mr-2"
                      />
                      CSV
                    </label>
                    <label className="flex items-center">
                      <input
                        type="radio"
                        value="excel"
                        checked={exportFormat === 'excel'}
                        onChange={(e) => setExportFormat(e.target.value)}
                        className="mr-2"
                      />
                      Excel
                    </label>
                  </div>
                </div>

                {/* Date Range */}
                <div className="mb-4">
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Date Range
                  </label>
                  <select
                    value={dateRange}
                    onChange={(e) => setDateRange(e.target.value)}
                    className="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                  >
                    <option value="all">All Time</option>
                    <option value="today">Today</option>
                    <option value="week">Last 7 Days</option>
                    <option value="month">This Month</option>
                    <option value="custom">Custom Range</option>
                  </select>

                  {dateRange === 'custom' && (
                    <div className="mt-2 grid grid-cols-2 gap-2">
                      <input
                        type="date"
                        value={customDateRange.startDate}
                        onChange={(e) => setCustomDateRange(prev => ({ ...prev, startDate: e.target.value }))}
                        className="border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="Start Date"
                      />
                      <input
                        type="date"
                        value={customDateRange.endDate}
                        onChange={(e) => setCustomDateRange(prev => ({ ...prev, endDate: e.target.value }))}
                        className="border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="End Date"
                      />
                    </div>
                  )}
                </div>

                {/* Fields Selection */}
                <div className="mb-4">
                  <div className="flex items-center justify-between mb-2">
                    <label className="block text-sm font-medium text-gray-700">
                      Select Fields
                    </label>
                    <button
                      type="button"
                      onClick={handleSelectAll}
                      className="text-sm text-blue-600 hover:text-blue-800"
                    >
                      {Object.values(selectedFields).every(Boolean) ? 'Deselect All' : 'Select All'}
                    </button>
                  </div>
                  <div className="grid grid-cols-2 gap-2 max-h-32 overflow-y-auto border border-gray-200 rounded-md p-2">
                    {fieldOptions.map(field => (
                      <label key={field.key} className="flex items-center text-sm">
                        <input
                          type="checkbox"
                          checked={selectedFields[field.key]}
                          onChange={() => handleFieldToggle(field.key)}
                          className="mr-2"
                        />
                        {field.label}
                      </label>
                    ))}
                  </div>
                </div>

                {/* Data Count */}
                <div className="text-sm text-gray-600 mb-4">
                  {dateRange === 'all' 
                    ? `Total records: ${data.length}`
                    : `Filtered records: ${filterDataByDateRange(data).length} of ${data.length}`
                  }
                </div>
              </div>
            </div>
          </div>

          <div className="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
            <button
              type="button"
              onClick={handleExport}
              className="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"
            >
              Export {exportFormat.toUpperCase()}
            </button>
            <button
              type="button"
              onClick={onClose}
              className="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
            >
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default ExportOptionsModal;



================================================
FILE: src/components/common/ImageUpload.jsx
================================================
import React, { useRef, useState } from 'react';
import { uploadMultipleImages } from '../../services/cloudinaryService';

/**
 * ImageUpload component for handling product image uploads
 * @param {Object} props - Component props
 */
export default function ImageUpload({
  images = [],
  onImagesChange,
  maxImages = 3,
  disabled = false,
  className = '',
  showPreview = true,
  uploadOptions = {}
}) {
  const fileInputRef = useRef(null);
  const [dragActive, setDragActive] = useState(false);
  const [uploading, setUploading] = useState(false);
  const [uploadProgress, setUploadProgress] = useState(0);
  const [currentUploadFile, setCurrentUploadFile] = useState(null);
  const [totalUploadFiles, setTotalUploadFiles] = useState(0);
  const [error, setError] = useState(null);
  const [draggedIndex, setDraggedIndex] = useState(null);
  const [dragOverIndex, setDragOverIndex] = useState(null);

  // Use only the images prop from parent
  const allImages = images;
  
  // Calculate canAddMore based on parent's images
  const canAddMore = images.length < maxImages;

  const handleFileSelect = async (files) => {
    if (!files || files.length === 0) return;

    try {
      setError(null);
      
      const fileArray = Array.from(files);
      const currentImageCount = images.length;
      const remainingSlots = maxImages - currentImageCount;
      
      // Check if adding all files would exceed the limit
      if (fileArray.length > remainingSlots) {
        const errorMessage = remainingSlots > 0 
          ? `You can only upload ${remainingSlots} more image${remainingSlots === 1 ? '' : 's'}. Maximum ${maxImages} images allowed.`
          : `Maximum ${maxImages} images allowed. Please remove some images before adding new ones.`;
        setError(errorMessage);
        return;
      }
      
      setUploading(true);
      setUploadProgress(0);
      setTotalUploadFiles(fileArray.length);
      setCurrentUploadFile(1);
      
      // Progress callback to track upload progress
      const handleProgress = (progress, currentFile, totalFiles) => {
        setUploadProgress(progress);
        setCurrentUploadFile(currentFile + 1); // +1 because it's 0-indexed
      };
      
      const uploadResults = await uploadMultipleImages(fileArray, uploadOptions, handleProgress);
      
      // Notify parent component of changes
      if (onImagesChange) {
        const newImageUrls = uploadResults.map(result => result.url);
        
        const allImageUrls = [...images, ...newImageUrls];
        
        onImagesChange(allImageUrls);
      }
    } catch (err) {
      setError(err.message);
    } finally {
      setUploading(false);
      setUploadProgress(0);
      setCurrentUploadFile(null);
      setTotalUploadFiles(0);
    }
  };

  const handleFileInputChange = (e) => {
    handleFileSelect(e.target.files);
    // Reset input value to allow selecting the same file again
    e.target.value = '';
  };

  const handleRemoveImage = async (index) => {
    try {
      // Simply remove the image at the given index
      const newImages = images.filter((_, i) => i !== index);
      if (onImagesChange) {
        onImagesChange(newImages);
      }
    } catch (err) {
    }
  };

  const handleImageDragStart = (e, index) => {
    if (disabled) return;
    setDraggedIndex(index);
    e.dataTransfer.effectAllowed = 'move';
    e.dataTransfer.setData('text/html', e.target.outerHTML);
  };

  const handleImageDragOver = (e, index) => {
    e.preventDefault();
    e.dataTransfer.dropEffect = 'move';
    setDragOverIndex(index);
  };

  const handleImageDragLeave = (e) => {
    e.preventDefault();
    setDragOverIndex(null);
  };

  const handleImageDrop = (e, dropIndex) => {
    e.preventDefault();
    
    if (draggedIndex === null || draggedIndex === dropIndex) {
      setDraggedIndex(null);
      setDragOverIndex(null);
      return;
    }

    const newImages = [...images];
    const draggedImage = newImages[draggedIndex];
    
    // Remove the dragged image from its original position
    newImages.splice(draggedIndex, 1);
    
    // Insert it at the new position
    newImages.splice(dropIndex, 0, draggedImage);
    
    if (onImagesChange) {
      onImagesChange(newImages);
    }
    
    setDraggedIndex(null);
    setDragOverIndex(null);
  };

  const handleMoveImage = (fromIndex, toIndex) => {
    if (fromIndex === toIndex || disabled) return;
    
    const newImages = [...images];
    const movedImage = newImages[fromIndex];
    
    // Remove the image from its original position
    newImages.splice(fromIndex, 1);
    
    // Insert it at the new position
    newImages.splice(toIndex, 0, movedImage);
    
    if (onImagesChange) {
      onImagesChange(newImages);
    }
  };

  const handleDrag = (e) => {
    e.preventDefault();
    e.stopPropagation();
    if (e.type === 'dragenter' || e.type === 'dragover') {
      setDragActive(true);
    } else if (e.type === 'dragleave') {
      setDragActive(false);
    }
  };

  const handleDrop = (e) => {
    e.preventDefault();
    e.stopPropagation();
    setDragActive(false);
    
    if (disabled || !canAddMore) return;
    
    const files = e.dataTransfer.files;
    if (files && files.length > 0) {
      handleFileSelect(files);
    }
  };

  const handleClick = () => {
    if (!disabled && canAddMore) {
      fileInputRef.current?.click();
    }
  };


  return (
    <div className={`space-y-4 ${className}`}>
      {/* Upload Area */}
      <div
        className={`
          relative border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors
          ${dragActive ? 'border-blue-500 bg-blue-50' : 'border-gray-300 hover:border-gray-400'}
          ${disabled || !canAddMore ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-50'}
        `}
        onDragEnter={handleDrag}
        onDragLeave={handleDrag}
        onDragOver={handleDrag}
        onDrop={handleDrop}
        onClick={handleClick}
      >
        <input
          ref={fileInputRef}
          type="file"
          multiple
          accept="image/*"
          onChange={handleFileInputChange}
          className="hidden"
          disabled={disabled || !canAddMore}
        />
        
        <div className="flex flex-col items-center">
          <div className="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4 relative">
            {uploading ? (
              <>
                {/* Circular Progress Indicator */}
                <svg className="w-16 h-16 transform -rotate-90" viewBox="0 0 64 64">
                  <circle
                    cx="32"
                    cy="32"
                    r="28"
                    stroke="currentColor"
                    strokeWidth="4"
                    fill="none"
                    className="text-blue-200"
                  />
                  <circle
                    cx="32"
                    cy="32"
                    r="28"
                    stroke="currentColor"
                    strokeWidth="4"
                    fill="none"
                    strokeDasharray={`${uploadProgress * 1.76} 176`}
                    className="text-blue-600 transition-all duration-300"
                    strokeLinecap="round"
                  />
                </svg>
                {/* Progress Percentage */}
                <div className="absolute inset-0 flex items-center justify-center">
                  <span className="text-sm font-semibold text-blue-600">{uploadProgress}%</span>
                </div>
              </>
            ) : (
              <svg className="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
              </svg>
            )}
          </div>
          
          <p className="text-gray-600 font-medium">
            {uploading ? `Uploading image ${currentUploadFile} of ${totalUploadFiles}...` : 'Click to upload photos'}
          </p>
          <p className="text-sm text-gray-500 mt-1">
            {uploading ? 'Please wait while we upload your images' : (canAddMore ? 'or drag and drop' : `Maximum ${maxImages} images allowed`)}
          </p>
        </div>
      </div>

      {/* Error Message */}
      {error && (
        <div className="bg-red-50 border border-red-200 rounded-lg p-3">
          <div className="flex">
            <div className="flex-shrink-0">
              <svg className="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clipRule="evenodd" />
              </svg>
            </div>
            <div className="ml-3">
              <p className="text-sm font-medium text-red-800">Error:</p>
              <p className="text-sm text-red-700 mt-1">{error}</p>
            </div>
          </div>
        </div>
      )}

      {/* Image Previews */}
      {showPreview && allImages.length > 0 && (
        <div>
          <p className="text-sm text-gray-600 mb-3">
            Images ({allImages.length}/{maxImages})
          </p>
          
          {/* Grid Preview */}
          <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
            {allImages.map((image, index) => {
              const imageUrl = typeof image === 'string' ? image : image.url;
              const isDragging = draggedIndex === index;
              const isDragOver = dragOverIndex === index;
              
              return (
                <div 
                  key={`${imageUrl}-${index}`} 
                  className={`relative group cursor-move transition-all duration-200 ${
                    isDragging ? 'opacity-50 scale-95' : ''
                  } ${isDragOver ? 'ring-2 ring-blue-500 ring-opacity-50' : ''}`}
                  draggable={!disabled}
                  onDragStart={(e) => handleImageDragStart(e, index)}
                  onDragOver={(e) => handleImageDragOver(e, index)}
                  onDragLeave={handleImageDragLeave}
                  onDrop={(e) => handleImageDrop(e, index)}
                >
                  <img
                    src={imageUrl}
                    alt={`Preview ${index + 1}`}
                    className="w-full h-32 object-cover rounded-lg border border-gray-200"
                    onError={(e) => {
                      e.target.style.display = 'none';
                    }}
                  />
                  
                  {/* Drag Handle */}
                  {!disabled && (
                    <div className="absolute top-2 left-2 bg-black bg-opacity-50 text-white rounded p-1 opacity-0 group-hover:opacity-100 transition-opacity">
                      <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 8h16M4 16h16" />
                      </svg>
                    </div>
                  )}
                  
                  {/* Remove Button */}
                  {!disabled && (
                    <button
                      type="button"
                      onClick={(e) => {
                        e.stopPropagation();
                        handleRemoveImage(index);
                      }}
                      className="absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600"
                    >
                      <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" />
                      </svg>
                    </button>
                  )}
                  
                  {/* Move Up/Down Buttons */}
                  {!disabled && allImages.length > 1 && (
                    <div className="absolute bottom-2 left-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                      {index > 0 && (
                        <button
                          type="button"
                          onClick={(e) => {
                            e.stopPropagation();
                            handleMoveImage(index, index - 1);
                          }}
                          className="bg-black bg-opacity-50 text-white rounded p-1 hover:bg-opacity-70 transition-colors"
                          title="Move up"
                        >
                          <svg className="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 15l7-7 7 7" />
                          </svg>
                        </button>
                      )}
                      {index < allImages.length - 1 && (
                        <button
                          type="button"
                          onClick={(e) => {
                            e.stopPropagation();
                            handleMoveImage(index, index + 1);
                          }}
                          className="bg-black bg-opacity-50 text-white rounded p-1 hover:bg-opacity-70 transition-colors"
                          title="Move down"
                        >
                          <svg className="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7" />
                          </svg>
                        </button>
                      )}
                    </div>
                  )}
                  
                  {/* Image Number Badge */}
                  <div className="absolute bottom-2 right-2 bg-black bg-opacity-50 text-white text-xs rounded px-2 py-1">
                    {index + 1}
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      )}
    </div>
  );
}


================================================
FILE: src/components/common/index.js
================================================
export { default as Button } from './Button';
export { default as Modal } from './Modal';
export { default as ConfirmationModal } from './ConfirmationModal';
export { default as CheckoutConfirmationModal } from './CheckoutConfirmationModal';
export { default as ExportOptionsModal } from './ExportOptionsModal';
export { default as Loader } from './Loader';
export { default as CompleteOrderModal } from './CompleteOrderModal';
export { default as ScrollToTop } from './ScrollToTop';
export { default as ShoppingBagIcon } from './ShoppingBagIcon';
export { default as ChatIcon } from './ChatIcon';
export { default as ProfileIcon } from './ProfileIcon';
export { default as ImageUpload } from './ImageUpload';
export { default as CatalogueCoverUpload } from './CatalogueCoverUpload';
export { default as PasswordInput } from './PasswordInput';
export { default as Breadcrumb } from './Breadcrumb';
export { default as MobileSearchFilter } from './MobileSearchFilter';
export { 
  default as Skeleton,
  ProductCardSkeleton,
  ProductGridSkeleton,
  ProductDetailSkeleton,
  CartItemSkeleton,
  CartSkeleton,
  WishlistSkeleton,
  CategoryListSkeleton,
  SearchResultsSkeleton,
  ProfileSkeleton,
  ChatMessageSkeleton,
  ChatListSkeleton,
  OrderItemSkeleton,
  SellerDashboardSkeleton
} from './SkeletonLoader';
export { default as OrderDetailsModal } from './OrderDetailsModal';
export { default as PriceRangeSlider } from './PriceRangeSlider';
export { default as Pagination } from './Pagination';
export { default as BlurText } from './BlurText';
export { default as ProductReview } from './ProductReview';
export { default as SEO } from './SEO';



================================================
FILE: src/components/common/Loader.jsx
================================================
const Loader = ({ size = 'md', text = 'Loading...', className = '' }) => {
  const sizes = {
    sm: 'w-4 h-4',
    md: 'w-6 h-6',
    lg: 'w-8 h-8',
    xl: 'w-12 h-12'
  };

  return (
    <div className={`flex items-center justify-center ${className}`}>
      <div className="flex items-center space-x-2">
        <svg 
          className={`animate-spin ${sizes[size]} text-blue-600`} 
          fill="none" 
          viewBox="0 0 24 24"
        >
          <circle 
            className="opacity-25" 
            cx="12" 
            cy="12" 
            r="10" 
            stroke="currentColor" 
            strokeWidth="4" 
          />
          <path 
            className="opacity-75" 
            fill="currentColor" 
            d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" 
          />
        </svg>
        {text && <span className="text-gray-600">{text}</span>}
      </div>
    </div>
  );
};

export default Loader;



================================================
FILE: src/components/common/MobileSearchFilter.jsx
================================================
import { useState } from 'react';
import { Link } from 'react-router-dom';

export default function MobileSearchFilter({ 
  searchValue = '', 
  onSearchChange = () => {},
  filterValue = 'all',
  onFilterChange = () => {},
  filterOptions = [],
  onRefresh = () => {},
  onExport = null,
  onAdd = null,
  addLink = null,
  addLabel = 'Add',
  searchPlaceholder = 'Search...',
  filterPlaceholder = 'All Status',
  loading = false,
  className = ''
}) {
  const [isFilterOpen, setIsFilterOpen] = useState(false);

  const handleFilterSelect = (value) => {
    onFilterChange(value);
    setIsFilterOpen(false);
  };

  return (
    <div className={`lg:hidden ${className}`}>
      {/* Search Bar */}
      <div className="relative mb-3">
        <input
          type="text"
          placeholder={searchPlaceholder}
          value={searchValue}
          onChange={(e) => onSearchChange(e.target.value)}
          className="w-full pl-4 pr-10 py-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"
        />
        <svg className="w-4 h-4 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </div>

      {/* Action Buttons Row */}
      <div className="flex items-center gap-2">
        {/* Filter Button */}
        <div className="relative">
          <button
            onClick={() => setIsFilterOpen(!isFilterOpen)}
            className="w-12 h-12 border border-gray-300 rounded-lg bg-white hover:bg-gray-50 transition-colors flex items-center justify-center"
            title="Filter"
          >
            <svg className="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z" />
            </svg>
          </button>

          {/* Filter Dropdown */}
          {isFilterOpen && (
            <div className="absolute top-full left-0 mt-1 w-48 bg-white border border-gray-300 rounded-lg shadow-lg z-50">
              <div className="py-1">
                <button
                  onClick={() => handleFilterSelect('all')}
                  className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 transition-colors ${
                    filterValue === 'all' ? 'bg-blue-50 text-blue-600 font-medium' : 'text-gray-700'
                  }`}
                >
                  All Status
                </button>
                {filterOptions.map((option) => (
                  <button
                    key={option.value}
                    onClick={() => handleFilterSelect(option.value)}
                    className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-50 transition-colors ${
                      filterValue === option.value ? 'bg-blue-50 text-blue-600 font-medium' : 'text-gray-700'
                    }`}
                  >
                    {option.label}
                  </button>
                ))}
              </div>
            </div>
          )}
        </div>

        {/* Refresh Button */}
        <button 
          onClick={onRefresh}
          disabled={loading}
          className="w-12 h-12 border border-gray-300 rounded-lg bg-white hover:bg-gray-50 transition-colors flex items-center justify-center disabled:opacity-50"
          title="Refresh"
        >
          <svg className={`w-4 h-4 text-gray-600 ${loading ? 'animate-spin' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
          </svg>
        </button>

        {/* Export Button */}
        {onExport && (
          <button 
            onClick={onExport}
            className="w-12 h-12 border border-gray-300 rounded-lg bg-white hover:bg-gray-50 transition-colors flex items-center justify-center"
            title="Export"
          >
            <svg className="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
          </button>
        )}

        {/* Add Button */}
        {onAdd ? (
          <button
            onClick={onAdd}
            className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"
            title={addLabel}
          >
            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
            </svg>
            {addLabel}
          </button>
        ) : addLink ? (
          <Link
            to={addLink}
            className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"
            title={addLabel}
          >
            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
            </svg>
            {addLabel}
          </Link>
        ) : null}
      </div>

      {/* Click outside to close filter */}
      {isFilterOpen && (
        <div 
          className="fixed inset-0 z-40" 
          onClick={() => setIsFilterOpen(false)}
        />
      )}
    </div>
  );
}



================================================
FILE: src/components/common/Modal.jsx
================================================
import { useEffect } from 'react';

const Modal = ({ 
  isOpen, 
  onClose, 
  title, 
  children, 
  size = 'md',
  showCloseButton = true,
  closeOnOverlayClick = true 
}) => {
  // Close modal on escape key press
  useEffect(() => {
    const handleEscape = (e) => {
      if (e.key === 'Escape') {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
      // Prevent body scroll when modal is open
      document.body.style.overflow = 'hidden';
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
      document.body.style.overflow = 'unset';
    };
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  const sizes = {
    sm: 'max-w-md',
    md: 'max-w-lg',
    lg: 'max-w-2xl',
    xl: 'max-w-4xl',
    full: 'max-w-full mx-4'
  };

  const handleOverlayClick = (e) => {
    if (closeOnOverlayClick && e.target === e.currentTarget) {
      onClose();
    }
  };

  return (
    <div 
      className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"
      onClick={handleOverlayClick}
    >
      <div className={`bg-white rounded-lg shadow-xl w-full ${sizes[size]} max-h-[90vh] overflow-hidden`}>
        {/* Header */}
        {(title || showCloseButton) && (
          <div className="flex items-center justify-between p-4 border-b border-gray-200">
            {title && <h2 className="text-lg font-semibold text-gray-900">{title}</h2>}
            {showCloseButton && (
              <button
                onClick={onClose}
                className="p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"
              >
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            )}
          </div>
        )}

        {/* Content */}
        <div className="p-4 overflow-y-auto max-h-[calc(90vh-8rem)]">
          {children}
        </div>
      </div>
    </div>
  );
};

export default Modal;



================================================
FILE: src/components/common/OrderDetailsModal.jsx
================================================
import { useState } from 'react';
import { X, Eye, Package, User, Calendar, CreditCard, MapPin } from 'lucide-react';
const productImage = '/product.png';

export default function OrderDetailsModal({ order, isOpen, onClose }) {
  if (!isOpen || !order) return null;

  const formatDate = (dateString) => {
    return new Date(dateString).toLocaleString('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  };

  const formatCurrency = (amount) => {
    return `₦${Number(amount || 0).toLocaleString()}`;
  };

  const getStatusColor = (status) => {
    switch (status?.toUpperCase()) {
      case 'DELIVERED':
        return 'bg-green-100 text-green-800 border-green-200';
      case 'CANCELLED':
        return 'bg-red-100 text-red-800 border-red-200';
      case 'SHIPPED':
        return 'bg-blue-100 text-blue-800 border-blue-200';
      default:
        return 'bg-yellow-100 text-yellow-800 border-yellow-200';
    }
  };

  const isSettlementExpired = (expiresAt) => {
    if (!expiresAt) return false;
    return new Date(expiresAt) < new Date();
  };

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto">
      <div className="flex min-h-screen items-center justify-center p-4">
        {/* Backdrop */}
        <div 
          className="fixed inset-0 bg-black bg-opacity-50 transition-opacity"
          onClick={onClose}
        />
        
        {/* Modal */}
        <div className="relative bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden">
          {/* Header */}
          <div className="flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50">
            <div className="flex items-center gap-3">
              <div className="p-2 bg-blue-100 rounded-lg">
                <Eye className="w-5 h-5 text-blue-600" />
              </div>
              <div>
                <h2 className="text-xl font-semibold text-gray-900">Order Details</h2>
                <p className="text-sm text-gray-600">{order.orderCode || order.id}</p>
              </div>
            </div>
            <button
              onClick={onClose}
              className="p-2 hover:bg-gray-200 rounded-lg transition-colors"
            >
              <X className="w-5 h-5 text-gray-500" />
            </button>
          </div>

          {/* Content */}
          <div className="overflow-y-auto max-h-[calc(90vh-120px)]">
            <div className="p-6 space-y-6">
              {/* Order Overview */}
              <div className="bg-gray-50 rounded-lg p-4">
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div className="flex items-center gap-3">
                    <div className="p-2 bg-blue-100 rounded-lg">
                      <Calendar className="w-4 h-4 text-blue-600" />
                    </div>
                    <div>
                      <p className="text-sm text-gray-600">Order Date</p>
                      <p className="font-medium text-gray-900">{formatDate(order.createdAt)}</p>
                    </div>
                  </div>
                  
                  <div className="flex items-center gap-3">
                    <div className="p-2 bg-green-100 rounded-lg">
                      <CreditCard className="w-4 h-4 text-green-600" />
                    </div>
                    <div>
                      <p className="text-sm text-gray-600">Total Amount</p>
                      <p className="font-medium text-gray-900">{formatCurrency(order.totalPrice)}</p>
                    </div>
                  </div>
                  
                  <div className="flex items-center gap-3">
                    <div className="p-2 bg-yellow-100 rounded-lg">
                      <Package className="w-4 h-4 text-yellow-600" />
                    </div>
                    <div>
                      <p className="text-sm text-gray-600">Order Status</p>
                      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${getStatusColor(order.orderStatus)}`}>
                        {order.orderStatus}
                      </span>
                    </div>
                  </div>
                </div>
              </div>

              {/* Settlement Information */}
              {order.settlementCode && (
                <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                  <div className="flex items-center gap-3 mb-3">
                    <div className="p-2 bg-blue-100 rounded-lg">
                      <CreditCard className="w-4 h-4 text-blue-600" />
                    </div>
                    <h3 className="text-lg font-semibold text-gray-900">Settlement Information</h3>
                  </div>
                  
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <p className="text-sm text-gray-600 mb-1">Settlement Code</p>
                      <p className="font-mono text-lg font-semibold text-blue-600">{order.settlementCode}</p>
                    </div>
                    
                    {order.settlementCodeExpiresAt && (
                      <div>
                        <p className="text-sm text-gray-600 mb-1">Expires At</p>
                        <p className={`font-medium ${isSettlementExpired(order.settlementCodeExpiresAt) ? 'text-red-600' : 'text-gray-900'}`}>
                          {formatDate(order.settlementCodeExpiresAt)}
                          {isSettlementExpired(order.settlementCodeExpiresAt) && (
                            <span className="ml-2 text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full">Expired</span>
                          )}
                        </p>
                      </div>
                    )}
                  </div>
                </div>
              )}

              {/* Seller Groups */}
              {order.sellerGroups && order.sellerGroups.length > 0 && (
                <div className="space-y-4">
                  <h3 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                    <User className="w-5 h-5" />
                    Sellers & Items ({order.sellerGroups.length} seller{order.sellerGroups.length > 1 ? 's' : ''})
                  </h3>
                  
                  {order.sellerGroups.map((sellerGroup, index) => (
                    <div key={sellerGroup.sellerId || index} className="border border-gray-200 rounded-lg overflow-hidden">
                      {/* Seller Header */}
                      <div className="bg-gray-50 px-4 py-3 border-b border-gray-200">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center gap-3">
                            <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                              <User className="w-5 h-5 text-blue-600" />
                            </div>
                            <div>
                              <h4 className="font-semibold text-gray-900">{sellerGroup.seller?.catalogueName || 'Unknown Store'}</h4>
                              <p className="text-sm text-gray-600">Seller: {sellerGroup.seller?.user?.name || 'Unknown'}</p>
                            </div>
                          </div>
                          
                          <div className="text-right">
                            <p className="text-sm text-gray-600">Amount Due</p>
                            <p className="font-semibold text-gray-900">{formatCurrency(sellerGroup.orderSeller?.amountDue)}</p>
                            <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium mt-1 ${getStatusColor(sellerGroup.orderSeller?.status)}`}>
                              {sellerGroup.orderSeller?.status || 'PENDING'}
                            </span>
                          </div>
                        </div>
                      </div>
                      
                      {/* Items */}
                      <div className="p-4">
                        <h5 className="text-sm font-medium text-gray-700 mb-3">Items ({sellerGroup.items?.length || 0})</h5>
                        
                        {sellerGroup.items && sellerGroup.items.length > 0 ? (
                          <div className="space-y-3">
                            {sellerGroup.items.map((item) => (
                              <div key={item.id} className="flex items-center gap-4 p-3 bg-gray-50 rounded-lg">
                                <img 
                                  src={item.product?.imageUrls?.[0] || productImage} 
                                  alt={item.product?.name || 'Product'} 
                                  className="w-16 h-16 object-cover rounded-lg border border-gray-200"
                                />
                                
                                <div className="flex-1">
                                  <h6 className="font-medium text-gray-900">{item.product?.name || 'Unknown Product'}</h6>
                                  <div className="flex items-center gap-4 text-sm text-gray-600 mt-1">
                                    <span>Quantity: {item.quantity}</span>
                                    <span>Price: {formatCurrency(item.price)}</span>
                                    <span className="font-medium text-gray-900">
                                      Subtotal: {formatCurrency(Number(item.price || 0) * Number(item.quantity || 0))}
                                    </span>
                                  </div>
                                </div>
                              </div>
                            ))}
                            
                            {/* Seller Subtotal */}
                            <div className="flex justify-end pt-3 border-t border-gray-200">
                              <div className="text-right">
                                <p className="text-sm text-gray-600">Seller Subtotal</p>
                                <p className="text-lg font-semibold text-gray-900">{formatCurrency(sellerGroup.subtotal)}</p>
                              </div>
                            </div>
                          </div>
                        ) : (
                          <p className="text-gray-500 text-sm">No items found for this seller.</p>
                        )}
                      </div>
                    </div>
                  ))}
                </div>
              )}

              {/* Order Summary */}
              <div className="bg-gray-50 rounded-lg p-4">
                <h3 className="text-lg font-semibold text-gray-900 mb-3">Order Summary</h3>
                <div className="space-y-2">
                  <div className="flex justify-between text-sm">
                    <span className="text-gray-600">Total Items</span>
                    <span className="font-medium text-gray-900">
                      {order.sellerGroups?.reduce((total, group) => total + (group.items?.length || 0), 0) || 0}
                    </span>
                  </div>
                  <div className="flex justify-between text-sm">
                    <span className="text-gray-600">Number of Sellers</span>
                    <span className="font-medium text-gray-900">{order.sellerGroups?.length || 0}</span>
                  </div>
                  <div className="flex justify-between text-lg font-semibold border-t border-gray-200 pt-2">
                    <span className="text-gray-900">Total Amount</span>
                    <span className="text-gray-900">{formatCurrency(order.totalPrice)}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          {/* Footer */}
          <div className="flex justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50">
            <button
              onClick={onClose}
              className="px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}



================================================
FILE: src/components/common/Pagination.jsx
================================================
import { ChevronLeft, ChevronRight } from 'lucide-react';

// Updated pagination component v2.0 - all elements styled as buttons
const Pagination = ({ 
  currentPage, 
  totalPages, 
  onPageChange, 
  className = "",
  showEllipsis = true,
  maxVisiblePages = 5 
}) => {
  // Don't render if there's only one page or no pages
  if (totalPages <= 1) return null;

  const handlePageChange = (page) => {
    if (page >= 1 && page <= totalPages && page !== currentPage) {
      onPageChange(page);
    }
  };

  const getVisiblePages = () => {
    if (totalPages <= maxVisiblePages) {
      return Array.from({ length: totalPages }, (_, i) => i + 1);
    }

    const pages = [];
    const halfVisible = Math.floor(maxVisiblePages / 2);
    
    // Always show first page
    pages.push(1);
    
    if (currentPage <= halfVisible + 1) {
      // Show first few pages
      for (let i = 2; i <= Math.min(maxVisiblePages - 1, totalPages - 1); i++) {
        pages.push(i);
      }
    } else if (currentPage >= totalPages - halfVisible) {
      // Show last few pages
      for (let i = Math.max(2, totalPages - maxVisiblePages + 2); i <= totalPages - 1; i++) {
        pages.push(i);
      }
    } else {
      // Show pages around current page
      const start = Math.max(2, currentPage - halfVisible + 1);
      const end = Math.min(totalPages - 1, currentPage + halfVisible - 1);
      
      for (let i = start; i <= end; i++) {
        pages.push(i);
      }
    }
    
    // Always show last page if it's not already included
    if (totalPages > 1 && !pages.includes(totalPages)) {
      pages.push(totalPages);
    }
    
    return pages;
  };

  const visiblePages = getVisiblePages();
  const isPrevDisabled = currentPage <= 1;
  const isNextDisabled = currentPage >= totalPages;

  return (
    <div className={`flex items-center justify-center ${className}`}>
      <nav className="flex items-center gap-1">
        {/* Previous Button */}
        <button
          onClick={() => handlePageChange(currentPage - 1)}
          disabled={isPrevDisabled}
          className={`
            w-10 h-10 rounded-lg flex items-center justify-center transition-colors
            ${isPrevDisabled 
              ? 'bg-gray-200 text-gray-400 cursor-not-allowed' 
              : 'bg-white text-gray-600 border border-gray-300 hover:bg-gray-50 hover:border-gray-400'
            }
          `}
          aria-label="Previous page"
        >
          <ChevronLeft className="w-4 h-4" />
        </button>

        {/* Page Numbers */}
        {visiblePages.map((page, index) => {
          const isCurrentPage = page === currentPage;
          const showEllipsisBefore = showEllipsis && 
            index > 0 && 
            page - visiblePages[index - 1] > 1;
          
          return (
            <div key={page} className="flex items-center">
              {/* Ellipsis before this page */}
              {showEllipsisBefore && (
                <button
                  onClick={() => handlePageChange(Math.floor((page + visiblePages[index - 1]) / 2))}
                  className="w-10 h-10 rounded-lg bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:border-gray-400 flex items-center justify-center transition-colors font-semibold"
                  aria-label="More pages"
                >
                  <span className="text-sm">...</span>
                </button>
              )}
              
              {/* Page Number */}
              <button
                onClick={() => handlePageChange(page)}
                className={`
                  w-10 h-10 rounded-lg flex items-center justify-center transition-colors font-semibold
                  ${isCurrentPage
                    ? 'bg-blue-600 text-white' 
                    : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:border-gray-400'
                  }
                `}
                aria-label={`Page ${page}`}
                aria-current={isCurrentPage ? 'page' : undefined}
              >
                {page}
              </button>
            </div>
          );
        })}

        {/* Next Button */}
        <button
          onClick={() => handlePageChange(currentPage + 1)}
          disabled={isNextDisabled}
          className={`
            w-10 h-10 rounded-lg flex items-center justify-center transition-colors
            ${isNextDisabled 
              ? 'bg-gray-200 text-gray-400 cursor-not-allowed' 
              : 'bg-white text-gray-600 border border-gray-300 hover:bg-gray-50 hover:border-gray-400'
            }
          `}
          aria-label="Next page"
        >
          <ChevronRight className="w-4 h-4" />
        </button>
      </nav>
    </div>
  );
};

export default Pagination;



================================================
FILE: src/components/common/PaginationDemo.jsx
================================================
import React, { useState } from 'react';
import Pagination from './Pagination';

const PaginationDemo = () => {
  const [currentPage, setCurrentPage] = useState(1);
  const totalPages = 10;

  const handlePageChange = (page) => {
    setCurrentPage(page);
    console.log(`Navigating to page ${page}`);
  };

  return (
    <div className="p-8 bg-gray-50 min-h-screen">
      <div className="max-w-4xl mx-auto">
        <h1 className="text-3xl font-bold text-gray-900 mb-8">Pagination Component Demo</h1>
        
        <div className="bg-white rounded-xl shadow-sm p-8 mb-8">
          <h2 className="text-xl font-semibold text-gray-800 mb-4">Current Page: {currentPage}</h2>
          <p className="text-gray-600 mb-6">
            This is a demo of the new pagination component that matches the design you requested. 
            It includes smart ellipsis handling, proper disabled states, and clean styling.
          </p>
          
          <Pagination
            currentPage={currentPage}
            totalPages={totalPages}
            onPageChange={handlePageChange}
          />
        </div>

        <div className="bg-white rounded-xl shadow-sm p-8">
          <h3 className="text-lg font-semibold text-gray-800 mb-4">Features</h3>
          <ul className="space-y-2 text-gray-600">
            <li>• Clean, modern design matching your specifications</li>
            <li>• Smart ellipsis handling for large page counts</li>
            <li>• Proper disabled states for first/last pages</li>
            <li>• Accessible with proper ARIA labels</li>
            <li>• Responsive design</li>
            <li>• Consistent styling with your app's design system</li>
          </ul>
        </div>
      </div>
    </div>
  );
};

export default PaginationDemo;



================================================
FILE: src/components/common/PasswordInput.jsx
================================================
import React, { useState } from 'react';
import { Eye, EyeOff } from 'lucide-react';

const PasswordInput = ({ 
  value, 
  onChange, 
  placeholder = "Enter your password", 
  className = "", 
  required = false,
  showForgotPassword = false,
  forgotPasswordLink = "/forgot-password",
  forgotPasswordText = "Forgot Password?"
}) => {
  const [showPassword, setShowPassword] = useState(false);

  const togglePasswordVisibility = () => {
    setShowPassword(!showPassword);
  };

  return (
    <div>
      <div className="relative">
        <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
          <svg className="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
          </svg>
        </div>
        <input
          type={showPassword ? "text" : "password"}
          value={value}
          onChange={onChange}
          placeholder={placeholder}
          className={`w-full pl-12 pr-12 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-base ${className}`}
          required={required}
        />
        <button
          type="button"
          onClick={togglePasswordVisibility}
          className="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors"
          aria-label={showPassword ? "Hide password" : "Show password"}
        >
          {showPassword ? (
            <EyeOff className="w-5 h-5" />
          ) : (
            <Eye className="w-5 h-5" />
          )}
        </button>
      </div>
      {showForgotPassword && (
        <div className="flex justify-end mt-2">
          <a href={forgotPasswordLink} className="text-sm text-blue-600 hover:text-blue-700">
            {forgotPasswordText}
          </a>
        </div>
      )}
    </div>
  );
};

export default PasswordInput;



================================================
FILE: src/components/common/PriceRangeSlider.jsx
================================================
import { useState, useEffect, useRef } from 'react';

export default function PriceRangeSlider({ 
  min = 0, 
  max = 100000, 
  step = 1000, 
  value = [0, 100000], 
  onChange, 
  formatPrice = (price) => `₦${price.toLocaleString()}`,
  className = ""
}) {
  const [localValue, setLocalValue] = useState(value);
  const [isDragging, setIsDragging] = useState(false);
  const [activeHandle, setActiveHandle] = useState(null);
  const sliderRef = useRef(null);

  useEffect(() => {
    setLocalValue(value);
  }, [value]);

  const handleSliderChange = (index, newValue) => {
    const newValues = [...localValue];
    newValues[index] = parseInt(newValue);
    
    // Ensure min slider doesn't exceed max slider
    if (index === 0 && newValues[0] > newValues[1]) {
      newValues[0] = newValues[1];
    }
    // Ensure max slider doesn't go below min slider
    if (index === 1 && newValues[1] < newValues[0]) {
      newValues[1] = newValues[0];
    }
    
    setLocalValue(newValues);
    onChange && onChange(newValues);
  };

  const handleMouseDown = (index) => {
    setIsDragging(true);
    setActiveHandle(index);
  };

  const handleMouseUp = () => {
    setIsDragging(false);
    setActiveHandle(null);
  };

  const handleMouseMove = (e) => {
    if (!isDragging || activeHandle === null || !sliderRef.current) return;
    
    const rect = sliderRef.current.getBoundingClientRect();
    const percent = (e.clientX - rect.left) / rect.width;
    const newValue = Math.round(min + percent * (max - min));
    const steppedValue = Math.round(newValue / step) * step;
    
    const clampedValue = Math.max(min, Math.min(max, steppedValue));
    handleSliderChange(activeHandle, clampedValue);
  };

  useEffect(() => {
    if (isDragging) {
      document.addEventListener('mousemove', handleMouseMove);
      document.addEventListener('mouseup', handleMouseUp);
    }
    
    return () => {
      document.removeEventListener('mousemove', handleMouseMove);
      document.removeEventListener('mouseup', handleMouseUp);
    };
  }, [isDragging, activeHandle]);

  // Calculate percentage positions for visual indicators
  const minPercent = ((localValue[0] - min) / (max - min)) * 100;
  const maxPercent = ((localValue[1] - min) / (max - min)) * 100;

  return (
    <div className={`price-range-slider ${className}`}>
      {/* Price Display */}
      <div className="flex justify-between items-center mb-4">
        <div className="text-sm font-medium text-gray-700">
          {formatPrice(localValue[0])}
        </div>
        <div className="text-sm font-medium text-gray-700">
          {formatPrice(localValue[1])}
        </div>
      </div>

      {/* Slider Container */}
      <div ref={sliderRef} className="relative h-8 flex items-center">
        {/* Track Background */}
        <div className="absolute w-full h-2 bg-gray-200 rounded-full"></div>
        
        {/* Active Range */}
        <div 
          className="absolute h-2 bg-blue-500 rounded-full"
          style={{
            left: `${minPercent}%`,
            width: `${maxPercent - minPercent}%`
          }}
        ></div>

        {/* Slider Thumbs */}
        <div
          className="absolute w-6 h-6 bg-blue-500 rounded-full shadow-lg border-2 border-white transform -translate-x-1/2 -translate-y-1/2 cursor-grab active:cursor-grabbing hover:scale-110 transition-transform select-none"
          style={{
            left: `${minPercent}%`,
            top: '50%',
            zIndex: 30
          }}
          onMouseDown={(e) => {
            e.preventDefault();
            handleMouseDown(0);
          }}
        ></div>
        
        <div
          className="absolute w-6 h-6 bg-blue-500 rounded-full shadow-lg border-2 border-white transform -translate-x-1/2 -translate-y-1/2 cursor-grab active:cursor-grabbing hover:scale-110 transition-transform select-none"
          style={{
            left: `${maxPercent}%`,
            top: '50%',
            zIndex: 30
          }}
          onMouseDown={(e) => {
            e.preventDefault();
            handleMouseDown(1);
          }}
        ></div>
      </div>

      {/* Min/Max Labels */}
      <div className="flex justify-between text-xs text-gray-500 mt-2">
        <span>{formatPrice(min)}</span>
        <span>{formatPrice(max)}+</span>
      </div>
    </div>
  );
}



================================================
FILE: src/components/common/ProductReview.jsx
================================================
import { useState } from 'react';
import { Star, Send } from 'lucide-react';
import { rateProduct } from '../../services/ratingService';

export default function ProductReview({ productId, productName }) {
  const [rating, setRating] = useState(0);
  const [hoveredRating, setHoveredRating] = useState(0);
  const [review, setReview] = useState('');
  const [submitting, setSubmitting] = useState(false);
  const [submitted, setSubmitted] = useState(false);
  const [error, setError] = useState(null);

  const handleSubmit = async (e) => {
    e.preventDefault();
    
    if (rating === 0) {
      setError('Please select a rating');
      return;
    }

    try {
      setSubmitting(true);
      setError(null);
      
      await rateProduct(productId, rating, review);
      
      setSubmitted(true);
    } catch (err) {
      // Handle specific error cases
      if (err.message.includes('Foreign key constraint') || err.message.includes('Product not found') || err.message.includes('no longer exists')) {
        setError('This product no longer exists in our system. Please contact support.');
      } else {
        setError(err.message);
      }
    } finally {
      setSubmitting(false);
    }
  };

  // Don't show anything if already submitted
  if (submitted) {
    return (
      <div className="bg-green-50 border border-green-200 rounded-lg p-4">
        <div className="flex items-center gap-2 text-green-700">
          <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
          </svg>
          <span className="font-medium">Thank you for your review!</span>
        </div>
      </div>
    );
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-3">
      <div className="border border-gray-200 rounded-lg p-4 bg-gray-50">
        <div className="flex items-center gap-2 mb-2">
          <h4 className="text-sm font-medium text-gray-900">Rate this product</h4>
          <span className="text-xs text-gray-500">({productName})</span>
        </div>
        
        {/* Star Rating */}
        <div className="flex items-center gap-1 mb-3">
          {[1, 2, 3, 4, 5].map((star) => (
            <button
              key={star}
              type="button"
              onClick={() => setRating(star)}
              onMouseEnter={() => setHoveredRating(star)}
              onMouseLeave={() => setHoveredRating(0)}
              className="p-0.5 focus:outline-none transition-transform hover:scale-110"
            >
              <Star
                className={`w-6 h-6 ${
                  star <= (hoveredRating || rating)
                    ? 'fill-yellow-400 text-yellow-400'
                    : 'text-gray-300'
                } transition-colors`}
              />
            </button>
          ))}
          {rating > 0 && (
            <span className="ml-2 text-sm text-gray-600">
              {rating === 1 && 'Poor'}
              {rating === 2 && 'Fair'}
              {rating === 3 && 'Good'}
              {rating === 4 && 'Very Good'}
              {rating === 5 && 'Excellent'}
            </span>
          )}
        </div>

        {/* Review Text */}
        <textarea
          value={review}
          onChange={(e) => setReview(e.target.value)}
          placeholder="Share your experience with this product... (optional)"
          rows="3"
          className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm resize-none"
          maxLength={500}
        />
        <div className="flex items-center justify-between mt-1">
          <span className="text-xs text-gray-500">{review.length}/500 characters</span>
          {error && <span className="text-xs text-red-600">{error}</span>}
        </div>

        {/* Submit Button */}
        <button
          type="submit"
          disabled={submitting || rating === 0}
          className="mt-3 w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm font-medium"
        >
          {submitting ? (
            <>
              <svg className="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24">
                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              Submitting...
            </>
          ) : (
            <>
              <Send className="w-4 h-4" />
              Submit Review
            </>
          )}
        </button>
      </div>
    </form>
  );
}




================================================
FILE: src/components/common/ProfileIcon.jsx
================================================
import React from 'react';

export default function ProfileIcon({ className = "w-5 h-5", ...props }) {
  return (
    <svg 
      width="22" 
      height="23" 
      viewBox="0 0 22 23" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      className={className}
      {...props}
    >
      <path 
        d="M17.5588 19.0488C16.5654 16.3918 14.0036 14.5 11 14.5C7.99638 14.5 5.4346 16.3918 4.44117 19.0488M17.5588 19.0488C19.6672 17.2154 21 14.5134 21 11.5C21 5.97715 16.5228 1.5 11 1.5C5.47715 1.5 1 5.97715 1 11.5C1 14.5134 2.33285 17.2154 4.44117 19.0488M17.5588 19.0488C15.8031 20.5756 13.5095 21.5 11 21.5C8.49052 21.5 6.19694 20.5756 4.44117 19.0488M14 8.5C14 10.1569 12.6569 11.5 11 11.5C9.34315 11.5 8 10.1569 8 8.5C8 6.84315 9.34315 5.5 11 5.5C12.6569 5.5 14 6.84315 14 8.5Z" 
        stroke="currentColor" 
        strokeWidth="1.5" 
        strokeLinejoin="round"
      />
    </svg>
  );
}



================================================
FILE: src/components/common/ScrollToTop.jsx
================================================
import { useEffect } from 'react';
import { useLocation } from 'react-router-dom';

/**
 * ScrollToTop component that automatically scrolls to the top of the page
 * whenever the route changes. This ensures that users always start at the
 * top of a new page, regardless of where they were scrolled on the previous page.
 */
export default function ScrollToTop() {
  const { pathname } = useLocation();

  useEffect(() => {
    // Scroll to top whenever the pathname changes
    window.scrollTo(0, 0);
  }, [pathname]);

  return null;
}



================================================
FILE: src/components/common/SEO.jsx
================================================
import { useEffect } from 'react';

/**
 * SEO Component for managing meta tags and structured data
 * Works with React 19 and doesn't require additional dependencies
 */
export default function SEO({
  title,
  description,
  keywords,
  image,
  url,
  type = 'website',
  siteName = 'Campor',
  structuredData,
  canonical,
  noindex = false,
  nofollow = false
}) {
  useEffect(() => {
    // Set document title
    const fullTitle = title ? `${title} | ${siteName}` : siteName;
    document.title = fullTitle;

    // Get or create meta tags
    const getOrCreateMeta = (name, attribute = 'name') => {
      let meta = document.querySelector(`meta[${attribute}="${name}"]`);
      if (!meta) {
        meta = document.createElement('meta');
        meta.setAttribute(attribute, name);
        document.head.appendChild(meta);
      }
      return meta;
    };

    // Set basic meta tags
    if (description) {
      getOrCreateMeta('description').setAttribute('content', description);
    }

    if (keywords) {
      getOrCreateMeta('keywords').setAttribute('content', keywords);
    }

    // Set robots meta
    if (noindex || nofollow) {
      const robotsContent = [noindex && 'noindex', nofollow && 'nofollow']
        .filter(Boolean)
        .join(', ');
      getOrCreateMeta('robots').setAttribute('content', robotsContent);
    }

    // Open Graph tags
    if (title) {
      getOrCreateMeta('og:title', 'property').setAttribute('content', fullTitle);
    }
    if (description) {
      getOrCreateMeta('og:description', 'property').setAttribute('content', description);
    }
    if (type) {
      getOrCreateMeta('og:type', 'property').setAttribute('content', type);
    }
    if (url) {
      getOrCreateMeta('og:url', 'property').setAttribute('content', url);
    }
    if (image) {
      getOrCreateMeta('og:image', 'property').setAttribute('content', image);
    }
    if (siteName) {
      getOrCreateMeta('og:site_name', 'property').setAttribute('content', siteName);
    }

    // Twitter Card tags
    getOrCreateMeta('twitter:card', 'name').setAttribute('content', 'summary_large_image');
    if (title) {
      getOrCreateMeta('twitter:title', 'name').setAttribute('content', fullTitle);
    }
    if (description) {
      getOrCreateMeta('twitter:description', 'name').setAttribute('content', description);
    }
    if (image) {
      getOrCreateMeta('twitter:image', 'name').setAttribute('content', image);
    }

    // Canonical URL
    if (canonical) {
      let link = document.querySelector('link[rel="canonical"]');
      if (!link) {
        link = document.createElement('link');
        link.setAttribute('rel', 'canonical');
        document.head.appendChild(link);
      }
      link.setAttribute('href', canonical);
    }

    // Structured Data (JSON-LD)
    if (structuredData) {
      // Remove existing structured data script
      const existingScript = document.querySelector('script[type="application/ld+json"]');
      if (existingScript) {
        existingScript.remove();
      }

      const script = document.createElement('script');
      script.type = 'application/ld+json';
      script.text = JSON.stringify(structuredData);
      document.head.appendChild(script);
    }

    // Cleanup function
    return () => {
      // Note: We don't remove meta tags on cleanup to avoid flickering
      // The next page will update them as needed
    };
  }, [title, description, keywords, image, url, type, siteName, structuredData, canonical, noindex, nofollow]);

  return null;
}




================================================
FILE: src/components/common/ShoppingBagIcon.jsx
================================================
import React from 'react';

export default function ShoppingBagIcon({ className = "w-6 h-6", ...props }) {
  return (
    <svg 
      width="24" 
      height="24" 
      viewBox="0 0 24 24" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      className={className}
      {...props}
    >
      <path 
        d="M9 6L9 7C9 8.65685 10.3431 10 12 10C13.6569 10 15 8.65685 15 7V6" 
        stroke="currentColor" 
        strokeWidth="1.5" 
        strokeLinecap="round" 
        strokeLinejoin="round"
      />
      <path 
        d="M15.6116 3H8.3886C6.43325 3 4.76449 4.41365 4.44303 6.3424L2.77636 16.3424C2.37001 18.7805 4.25018 21 6.72194 21H17.2783C19.75 21 21.6302 18.7805 21.2238 16.3424L19.5572 6.3424C19.2357 4.41365 17.5669 3 15.6116 3Z" 
        stroke="currentColor" 
        strokeWidth="1.5" 
        strokeLinejoin="round"
      />
    </svg>
  );
}



================================================
FILE: src/components/common/SkeletonDemo.jsx
================================================
import React, { useState } from 'react';
import { 
  ProductCardSkeleton,
  ProductGridSkeleton,
  ProductDetailSkeleton,
  CartSkeleton,
  WishlistSkeleton,
  CategoryListSkeleton,
  SearchResultsSkeleton,
  ProfileSkeleton,
  ChatListSkeleton,
  SellerDashboardSkeleton
} from './SkeletonLoader';

export default function SkeletonDemo() {
  const [activeDemo, setActiveDemo] = useState('product-grid');
  const [viewMode, setViewMode] = useState('grid');

  const demos = [
    { id: 'product-grid', name: 'Product Grid', component: <ProductGridSkeleton count={8} viewMode={viewMode} /> },
    { id: 'product-detail', name: 'Product Detail', component: <ProductDetailSkeleton /> },
    { id: 'cart', name: 'Cart', component: <CartSkeleton /> },
    { id: 'wishlist', name: 'Wishlist', component: <WishlistSkeleton /> },
    { id: 'profile', name: 'Profile', component: <ProfileSkeleton /> },
    { id: 'categories', name: 'Categories', component: <CategoryListSkeleton /> },
    { id: 'search', name: 'Search Results', component: <SearchResultsSkeleton /> },
    { id: 'chat', name: 'Chat List', component: <ChatListSkeleton /> },
    { id: 'dashboard', name: 'Seller Dashboard', component: <SellerDashboardSkeleton /> },
  ];

  return (
    <div className="min-h-screen py-8" style={{ backgroundColor: '#F7F5F0' }}>
      <div className="max-w-7xl mx-auto px-4">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-gray-900 mb-4">Skeleton Loader Demo</h1>
          <p className="text-gray-600 mb-6">
            Sleek and modern skeleton loaders for your Campor marketplace. 
            These loaders provide a smooth loading experience while content is being fetched.
          </p>
          
          {/* Demo Navigation */}
          <div className="flex flex-wrap gap-2 mb-6">
            {demos.map((demo) => (
              <button
                key={demo.id}
                onClick={() => setActiveDemo(demo.id)}
                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
                  activeDemo === demo.id
                    ? 'bg-blue-600 text-white'
                    : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-200'
                }`}
              >
                {demo.name}
              </button>
            ))}
          </div>

          {/* View Mode Controls (only for Product Grid) */}
          {activeDemo === 'product-grid' && (
            <div className="flex items-center gap-4 mb-6 p-4 bg-white rounded-lg border border-gray-200">
              <span className="text-sm font-medium text-gray-700">View Mode:</span>
              <div className="flex gap-2">
                <button
                  onClick={() => setViewMode('grid')}
                  className={`px-3 py-1 rounded text-sm transition-colors ${
                    viewMode === 'grid'
                      ? 'bg-blue-600 text-white'
                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                  }`}
                >
                  Grid
                </button>
                <button
                  onClick={() => setViewMode('list')}
                  className={`px-3 py-1 rounded text-sm transition-colors ${
                    viewMode === 'list'
                      ? 'bg-blue-600 text-white'
                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                  }`}
                >
                  List
                </button>
              </div>
            </div>
          )}
        </div>

        {/* Demo Content */}
        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
          <div className="mb-4">
            <h2 className="text-xl font-semibold text-gray-900 mb-2">
              {demos.find(d => d.id === activeDemo)?.name} Skeleton
            </h2>
            <p className="text-gray-600 text-sm">
              This skeleton loader mimics the structure of the actual {demos.find(d => d.id === activeDemo)?.name.toLowerCase()} component.
            </p>
          </div>
          
          <div className={`border border-gray-200 rounded-lg p-4 bg-gray-50 ${
            activeDemo === 'product-grid' 
              ? viewMode === 'grid' 
                ? 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6' 
                : 'flex flex-col gap-4'
              : ''
          }`}>
            {demos.find(d => d.id === activeDemo)?.component}
          </div>
        </div>

        {/* Features */}
        <div className="mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-3">✨ Smooth Animations</h3>
            <p className="text-gray-600 text-sm">
              Beautiful shimmer effect that creates a professional loading experience with smooth transitions.
            </p>
          </div>
          
          <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-3">🎯 Accurate Layouts</h3>
            <p className="text-gray-600 text-sm">
              Each skeleton matches the exact structure of its corresponding component for seamless transitions.
            </p>
          </div>
          
          <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-3">📱 Responsive Design</h3>
            <p className="text-gray-600 text-sm">
              All skeleton loaders are fully responsive and work perfectly across all device sizes.
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}



================================================
FILE: src/components/common/SkeletonLoader.jsx
================================================
import React from 'react';

// Base skeleton component with shimmer effect
const SkeletonBase = ({ className = '', children, ...props }) => {
  return (
    <div 
      className={`animate-pulse bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 bg-[length:200%_100%] animate-shimmer ${className}`}
      {...props}
    >
      {children}
    </div>
  );
};

// Product Card Skeleton
export const ProductCardSkeleton = ({ viewMode = 'grid' }) => {
  if (viewMode === 'list') {
    return (
      <div className="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow flex flex-row items-center p-4 gap-4">
        {/* Product Image Skeleton - List View */}
        <div className="w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
          <SkeletonBase className="w-full h-full" />
        </div>

        {/* Product Info Skeleton - List View */}
        <div className="flex-1 min-w-0">
          <div className="flex flex-col justify-between h-full">
            <div className="flex-1">
              {/* Rating Stars */}
              <div className="flex items-center gap-0.5 mb-1">
                {[...Array(5)].map((_, i) => (
                  <SkeletonBase key={i} className="w-3 h-3 rounded" />
                ))}
              </div>
              
              {/* Product Name */}
              <div className="mb-2">
                <SkeletonBase className="h-5 w-full rounded mb-1" />
                <SkeletonBase className="h-5 w-3/4 rounded" />
              </div>

              {/* Seller Info */}
              <div className="flex items-center gap-2 mb-2">
                <SkeletonBase className="w-6 h-6 rounded-full" />
                <SkeletonBase className="h-4 w-24 rounded" />
              </div>
            </div>

            {/* Price and Actions */}
            <div className="flex items-center justify-between">
              <SkeletonBase className="h-6 w-20 rounded" />
              <div className="flex items-center gap-2">
                <SkeletonBase className="h-8 w-20 rounded" />
                <SkeletonBase className="h-8 w-8 rounded" />
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  }

  // Grid View (default)
  return (
    <div className="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow">
      {/* Product Image Skeleton */}
      <div className="aspect-square bg-gray-100 relative overflow-hidden">
        <SkeletonBase className="w-full h-full" />
      </div>

      {/* Product Info Skeleton */}
      <div className="p-4">
        {/* Category Badge Skeleton */}
        <div className="mb-2">
          <SkeletonBase className="h-5 w-16 rounded" />
        </div>

        {/* Product Name Skeleton */}
        <div className="mb-2">
          <SkeletonBase className="h-5 w-full rounded mb-1" />
          <SkeletonBase className="h-5 w-3/4 rounded" />
        </div>

        {/* Price and Stock Skeleton */}
        <div className="flex items-center justify-between mb-3">
          <SkeletonBase className="h-6 w-20 rounded" />
          <SkeletonBase className="h-4 w-16 rounded" />
        </div>

        {/* Seller Info Skeleton */}
        <div className="flex items-center gap-2 mb-3">
          <SkeletonBase className="w-6 h-6 rounded-full" />
          <SkeletonBase className="h-4 w-24 rounded" />
        </div>

        {/* Rating Skeleton */}
        <div className="flex items-center gap-2 mb-3">
          <div className="flex gap-1">
            {[...Array(5)].map((_, i) => (
              <SkeletonBase key={i} className="w-3 h-3 rounded" />
            ))}
          </div>
          <SkeletonBase className="h-3 w-8 rounded" />
        </div>

        {/* Buttons Skeleton */}
        <div className="mt-auto">
          <div className="flex items-center gap-2">
            <SkeletonBase className="h-10 flex-1 rounded" />
            <SkeletonBase className="h-10 w-10 rounded" />
          </div>
        </div>
      </div>
    </div>
  );
};

// Product Grid Skeleton - Individual cards without grid wrapper
export const ProductGridSkeleton = ({ count = 8, viewMode = 'grid' }) => {
  return (
    <>
      {[...Array(count)].map((_, index) => (
        <ProductCardSkeleton key={index} viewMode={viewMode} />
      ))}
    </>
  );
};

// Product Detail Skeleton
export const ProductDetailSkeleton = () => {
  return (
    <div className="max-w-7xl mx-auto px-4 py-8">
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
        {/* Image Gallery Skeleton */}
        <div className="space-y-4">
          {/* Main Image */}
          <div className="aspect-square bg-gray-100 rounded-lg overflow-hidden">
            <SkeletonBase className="w-full h-full" />
          </div>
          
          {/* Thumbnail Images */}
          <div className="flex gap-2">
            {[...Array(4)].map((_, i) => (
              <div key={i} className="w-20 h-20 bg-gray-100 rounded-lg overflow-hidden">
                <SkeletonBase className="w-full h-full" />
              </div>
            ))}
          </div>
        </div>

        {/* Product Info Skeleton */}
        <div className="space-y-6">
          {/* Category */}
          <SkeletonBase className="h-5 w-20 rounded" />
          
          {/* Product Name */}
          <div className="space-y-2">
            <SkeletonBase className="h-8 w-full rounded" />
            <SkeletonBase className="h-8 w-3/4 rounded" />
          </div>

          {/* Price */}
          <SkeletonBase className="h-10 w-32 rounded" />

          {/* Description */}
          <div className="space-y-2">
            <SkeletonBase className="h-4 w-full rounded" />
            <SkeletonBase className="h-4 w-full rounded" />
            <SkeletonBase className="h-4 w-2/3 rounded" />
          </div>

          {/* Stock Info */}
          <SkeletonBase className="h-5 w-24 rounded" />

          {/* Quantity and Add to Cart */}
          <div className="flex items-center gap-4">
            <SkeletonBase className="h-12 w-32 rounded" />
            <SkeletonBase className="h-12 w-40 rounded" />
          </div>

          {/* Seller Info */}
          <div className="flex items-center gap-3 p-4 border border-gray-200 rounded-lg">
            <SkeletonBase className="w-12 h-12 rounded-full" />
            <div className="space-y-2">
              <SkeletonBase className="h-4 w-32 rounded" />
              <SkeletonBase className="h-3 w-24 rounded" />
            </div>
          </div>
        </div>
      </div>

      {/* Tabs Skeleton */}
      <div className="mt-12">
        <div className="flex gap-8 mb-6">
          {['Reviews', 'Specifications', 'Shipping'].map((tab) => (
            <SkeletonBase key={tab} className="h-8 w-24 rounded" />
          ))}
        </div>
        
        <div className="space-y-4">
          <SkeletonBase className="h-4 w-full rounded" />
          <SkeletonBase className="h-4 w-full rounded" />
          <SkeletonBase className="h-4 w-3/4 rounded" />
        </div>
      </div>
    </div>
  );
};

// Cart Item Skeleton
export const CartItemSkeleton = () => {
  return (
    <div className="flex items-center gap-4 p-4 border border-gray-200 rounded-lg">
      {/* Product Image */}
      <div className="w-20 h-20 bg-gray-100 rounded-lg overflow-hidden">
        <SkeletonBase className="w-full h-full" />
      </div>

      {/* Product Info */}
      <div className="flex-1 space-y-2">
        <SkeletonBase className="h-5 w-3/4 rounded" />
        <SkeletonBase className="h-4 w-1/2 rounded" />
        <SkeletonBase className="h-4 w-1/4 rounded" />
      </div>

      {/* Quantity Controls */}
      <div className="flex items-center gap-2">
        <SkeletonBase className="w-8 h-8 rounded" />
        <SkeletonBase className="h-8 w-12 rounded" />
        <SkeletonBase className="w-8 h-8 rounded" />
      </div>

      {/* Price */}
      <SkeletonBase className="h-6 w-20 rounded" />
    </div>
  );
};

// Cart Skeleton
export const CartSkeleton = () => {
  return (
    <div className="max-w-7xl mx-auto px-4 py-8">
      {/* Header */}
      <div className="mb-8">
        <SkeletonBase className="h-8 w-48 rounded mb-2" />
        <SkeletonBase className="h-4 w-32 rounded" />
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {/* Cart Items */}
        <div className="lg:col-span-2 space-y-4">
          {[...Array(3)].map((_, i) => (
            <CartItemSkeleton key={i} />
          ))}
        </div>

        {/* Order Summary */}
        <div className="space-y-4">
          <div className="p-6 border border-gray-200 rounded-lg">
            <SkeletonBase className="h-6 w-32 rounded mb-4" />
            <div className="space-y-3">
              <div className="flex justify-between">
                <SkeletonBase className="h-4 w-20 rounded" />
                <SkeletonBase className="h-4 w-16 rounded" />
              </div>
              <div className="flex justify-between">
                <SkeletonBase className="h-4 w-16 rounded" />
                <SkeletonBase className="h-4 w-12 rounded" />
              </div>
              <div className="border-t pt-3">
                <div className="flex justify-between">
                  <SkeletonBase className="h-5 w-24 rounded" />
                  <SkeletonBase className="h-5 w-20 rounded" />
                </div>
              </div>
            </div>
            <SkeletonBase className="h-12 w-full rounded mt-4" />
          </div>
        </div>
      </div>
    </div>
  );
};

// Wishlist Skeleton
export const WishlistSkeleton = () => {
  return (
    <div className="max-w-7xl mx-auto px-4 py-8">
      {/* Header */}
      <div className="mb-8">
        <SkeletonBase className="h-8 w-48 rounded mb-2" />
        <SkeletonBase className="h-4 w-32 rounded" />
      </div>

      {/* Wishlist Items */}
      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        {[...Array(8)].map((_, i) => (
          <ProductCardSkeleton key={i} />
        ))}
      </div>
    </div>
  );
};

// Category List Skeleton
export const CategoryListSkeleton = () => {
  return (
    <div className="flex flex-wrap gap-2">
      {[...Array(6)].map((_, i) => (
        <SkeletonBase key={i} className="h-8 w-20 rounded-full" />
      ))}
    </div>
  );
};

// Search Results Skeleton
export const SearchResultsSkeleton = () => {
  return (
    <div className="space-y-6">
      {/* Search Header */}
      <div className="flex items-center justify-between">
        <SkeletonBase className="h-6 w-48 rounded" />
        <SkeletonBase className="h-8 w-24 rounded" />
      </div>

      {/* Filters */}
      <div className="flex gap-4">
        <SkeletonBase className="h-10 w-32 rounded" />
        <SkeletonBase className="h-10 w-24 rounded" />
        <SkeletonBase className="h-10 w-28 rounded" />
      </div>

      {/* Results Grid */}
      <ProductGridSkeleton count={12} />
    </div>
  );
};

// Profile Skeleton
export const ProfileSkeleton = () => {
  return (
    <div className="max-w-4xl mx-auto px-4 py-8">
      {/* Profile Header */}
      <div className="flex items-center gap-6 mb-8">
        <SkeletonBase className="w-24 h-24 rounded-full" />
        <div className="space-y-3">
          <SkeletonBase className="h-8 w-48 rounded" />
          <SkeletonBase className="h-4 w-32 rounded" />
          <SkeletonBase className="h-4 w-40 rounded" />
        </div>
      </div>

      {/* Tabs */}
      <div className="flex gap-8 mb-6">
        {['Account', 'Orders', 'Wishlist'].map((tab) => (
          <SkeletonBase key={tab} className="h-8 w-24 rounded" />
        ))}
      </div>

      {/* Tab Content */}
      <div className="space-y-6">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div className="space-y-4">
            <SkeletonBase className="h-6 w-32 rounded" />
            <SkeletonBase className="h-10 w-full rounded" />
            <SkeletonBase className="h-10 w-full rounded" />
            <SkeletonBase className="h-10 w-full rounded" />
          </div>
          <div className="space-y-4">
            <SkeletonBase className="h-6 w-32 rounded" />
            <SkeletonBase className="h-10 w-full rounded" />
            <SkeletonBase className="h-10 w-full rounded" />
            <SkeletonBase className="h-10 w-full rounded" />
          </div>
        </div>
        <SkeletonBase className="h-12 w-32 rounded" />
      </div>
    </div>
  );
};

// Chat Message Skeleton
export const ChatMessageSkeleton = () => {
  return (
    <div className="flex items-start gap-3 p-4">
      <SkeletonBase className="w-8 h-8 rounded-full" />
      <div className="flex-1 space-y-2">
        <SkeletonBase className="h-4 w-16 rounded" />
        <div className="space-y-1">
          <SkeletonBase className="h-4 w-full rounded" />
          <SkeletonBase className="h-4 w-3/4 rounded" />
        </div>
      </div>
    </div>
  );
};

// Chat List Skeleton
export const ChatListSkeleton = () => {
  return (
    <div className="space-y-2">
      {[...Array(5)].map((_, i) => (
        <div key={i} className="flex items-center gap-3 p-3 border-b border-gray-100">
          <SkeletonBase className="w-12 h-12 rounded-full" />
          <div className="flex-1 space-y-2">
            <SkeletonBase className="h-4 w-24 rounded" />
            <SkeletonBase className="h-3 w-32 rounded" />
          </div>
          <SkeletonBase className="h-3 w-12 rounded" />
        </div>
      ))}
    </div>
  );
};

// Order Item Skeleton
export const OrderItemSkeleton = () => {
  return (
    <div className="flex items-center gap-4 p-4 border border-gray-200 rounded-lg">
      <SkeletonBase className="w-16 h-16 rounded-lg" />
      <div className="flex-1 space-y-2">
        <SkeletonBase className="h-5 w-3/4 rounded" />
        <SkeletonBase className="h-4 w-1/2 rounded" />
        <SkeletonBase className="h-4 w-1/4 rounded" />
      </div>
      <div className="text-right space-y-2">
        <SkeletonBase className="h-5 w-20 rounded" />
        <SkeletonBase className="h-4 w-16 rounded" />
      </div>
    </div>
  );
};

// Seller Dashboard Skeleton
export const SellerDashboardSkeleton = () => {
  return (
    <div className="space-y-6">
      {/* Stats Cards */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {[...Array(4)].map((_, i) => (
          <div key={i} className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            <SkeletonBase className="h-6 w-24 rounded mb-2" />
            <SkeletonBase className="h-8 w-16 rounded mb-1" />
            <SkeletonBase className="h-3 w-20 rounded" />
          </div>
        ))}
      </div>

      {/* Charts */}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
          <SkeletonBase className="h-6 w-32 rounded mb-4" />
          <SkeletonBase className="h-64 w-full rounded" />
        </div>
        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
          <SkeletonBase className="h-6 w-32 rounded mb-4" />
          <SkeletonBase className="h-64 w-full rounded" />
        </div>
      </div>

      {/* Recent Orders */}
      <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <SkeletonBase className="h-6 w-32 rounded mb-4" />
        <div className="space-y-3">
          {[...Array(5)].map((_, i) => (
            <OrderItemSkeleton key={i} />
          ))}
        </div>
      </div>
    </div>
  );
};

// Generic skeleton for any content
export const Skeleton = ({ className = '', ...props }) => {
  return <SkeletonBase className={className} {...props} />;
};

export default Skeleton;



================================================
FILE: src/components/layout/Footer.jsx
================================================
import { useState } from 'react';
import { Link } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { subscribeToNewsletter } from '../../services/newsletterService';

export default function Footer() {
  const [email, setEmail] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [successMessage, setSuccessMessage] = useState('');
  const [errorMessage, setErrorMessage] = useState('');
  const { isSeller } = useAuth();

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (isSubmitting) return;
    setSuccessMessage('');
    setErrorMessage('');
    try {
      setIsSubmitting(true);
      await subscribeToNewsletter(email.trim());
      setSuccessMessage('Thanks for subscribing!');
      setEmail('');
    } catch (err) {
      setErrorMessage('Something went wrong. Please try again.');
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <footer className="bg-black text-white py-12 md:py-16 px-4 md:px-8">
      <div className="max-w-6xl mx-auto">
        {/* Top section - Newsletter title and email form */}
        <div className="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-12 md:mb-16 space-y-8 lg:space-y-0">
          {/* Left side - Newsletter title */}
          <div className="text-center lg:text-left">
            <h2 className="text-3xl md:text-4xl font-bold leading-tight">
              Subscribe to Our<br />
              Newsletter
            </h2>
          </div>

          {/* Right side - Email form */}
          <div className="w-full lg:w-auto flex justify-center lg:justify-end">
            <form onSubmit={handleSubmit} className="flex bg-white rounded-full p-2 shadow-lg w-full max-w-md lg:max-w-none lg:w-auto">
              <div className="relative flex-1 lg:flex-none">
                <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                  <svg className="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                  </svg>
                </div>
                <input
                  type="email"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  placeholder="Your email address"
                  className="w-full lg:w-72 pl-12 pr-4 py-3 bg-transparent text-gray-900 placeholder-gray-500 rounded-full focus:outline-none"
                  required
                />
              </div>
              <button
                type="submit"
                disabled={isSubmitting}
                className={`bg-blue-600 hover:bg-blue-700 text-white px-6 md:px-8 py-3 rounded-full font-medium transition-colors whitespace-nowrap ${isSubmitting ? 'opacity-70 cursor-not-allowed' : ''}`}
              >
                {isSubmitting ? 'Subscribing...' : 'Get Started'}
              </button>
            </form>
          </div>
          {(successMessage || errorMessage) && (
            <div className="mt-4 w-full lg:w-auto text-center lg:text-right">
              {successMessage && (
                <p className="text-green-400 text-sm" role="status">{successMessage}</p>
              )}
              {errorMessage && (
                <p className="text-red-400 text-sm" role="alert">{errorMessage}</p>
              )}
            </div>
          )}
        </div>

        {/* WhatsApp Community Section */}
        <div className="text-center mb-12">
          <div className="flex justify-center items-center">
            <a
              href="https://chat.whatsapp.com/BqMzBbBTPVsKjXWz3xU4vU?mode=wwt"
              target="_blank"
              rel="noopener noreferrer"
              className="flex items-center gap-3 bg-[#25D366] hover:bg-[#20BA5A] text-white px-6 py-3 rounded-full font-medium transition-colors shadow-lg hover:shadow-xl"
            >
              <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
              </svg>
              <span>Join Our Community</span>
            </a>
          </div>
        </div>

        {/* Social Media Links */}
        <div className="text-center mb-12">
          <div className="flex justify-center items-center gap-6">
            <a
              href="https://www.instagram.com/officialcampor/"
              target="_blank"
              rel="noopener noreferrer"
              className="text-gray-400 hover:text-white transition-colors"
              aria-label="Follow us on Instagram"
            >
              <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
              </svg>
            </a>
            <a
              href="https://www.linkedin.com/company/campor-live/"
              target="_blank"
              rel="noopener noreferrer"
              className="text-gray-400 hover:text-white transition-colors"
              aria-label="Follow us on LinkedIn"
            >
              <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
            </a>
            <a
              href="https://www.tiktok.com/@officialcampor?_r=1&_t=ZS-91Qi6QOSihE"
              target="_blank"
              rel="noopener noreferrer"
              className="text-gray-400 hover:text-white transition-colors"
              aria-label="Follow us on TikTok"
            >
              <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
              </svg>
            </a>
          </div>
        </div>

        {/* Want to sell section - only show for non-sellers */}
        {!isSeller && (
          <div className="text-center mb-12">
            <p className="text-gray-300 text-lg mb-4">
              Want to sell?{' '}
              <Link 
                to="/seller/onboarding" 
                className="text-blue-400 hover:text-blue-300 font-medium transition-colors underline"
              >
                Become a seller today
              </Link>
            </p>
          </div>
        )}

        {/* RUNSA Endorsement Section */}
        <div className="flex justify-center mb-12">
          <div className="bg-white rounded-lg px-4 py-3 md:px-6 md:py-4 flex items-center gap-4 shadow-lg">
            <img 
              src="/RUNSA-LOGO.png" 
              alt="RUNSA Logo" 
              className="h-12 md:h-16 w-auto object-contain"
            />
            <div className="flex flex-col">
              <p className="text-gray-900 font-bold text-sm md:text-base">
                Endorsed by RUNSA
              </p>
              <p className="text-gray-600 text-xs md:text-sm">
                Redeemer's University Students' Association
              </p>
            </div>
          </div>
        </div>

        {/* Bottom section - Company branding centered */}
        <div className="text-center">
          <h3 className="text-xl font-bold mb-2">Campor</h3>
          <p className="text-gray-300 mb-4">Your Campus Marketplace. Simplified.</p>
          
          {/* Legal Links */}
          <div className="flex justify-center space-x-6 mb-4">
            <Link 
              to="/terms" 
              className="text-gray-400 hover:text-gray-300 text-sm transition-colors underline"
            >
              Terms & Conditions
            </Link>
            <Link 
              to="/privacy" 
              className="text-gray-400 hover:text-gray-300 text-sm transition-colors underline"
            >
              Privacy Policy
            </Link>
            <Link 
              to="/contact" 
              className="text-gray-400 hover:text-gray-300 text-sm transition-colors underline"
            >
              Contact Support
            </Link>
          </div>
          
          <p className="text-gray-500 text-sm">
            Copyright © {new Date().getFullYear()} Campor
          </p>
          <p className="text-gray-500 text-sm">
            All Rights Reserved.
          </p>
        </div>
      </div>
    </footer>
  );
}



================================================
FILE: src/components/layout/index.js
================================================
export { default as Navbar } from './Navbar';
export { default as Footer } from './Footer';
export { default as SellerSidebar } from './SellerSidebar';
export { default as MobileSellerMenu } from './MobileSellerMenu';



================================================
FILE: src/components/layout/MobileSellerMenu.jsx
================================================
import { Link, useLocation } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { ChatIcon, ProfileIcon } from '../common';

export default function MobileSellerMenu({ isOpen, onClose }) {
  const location = useLocation();
  const { logout } = useAuth();

  const sellerMenuItems = [
    {
      icon: (
        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
      ),
      label: 'Back to Marketplace',
      path: '/marketplace',
      active: false,
      isSpecial: true
    },
    {
      icon: (
        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
        </svg>
      ),
      label: 'Dashboard',
      path: '/seller/dashboard',
      active: location.pathname === '/seller/dashboard'
    },
    {
      icon: (
        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
        </svg>
      ),
      label: 'Products',
      path: '/seller/products',
      active: location.pathname.startsWith('/seller/products')
    },
    {
      icon: (
        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
        </svg>
      ),
      label: 'Orders',
      path: '/seller/orders',
      active: location.pathname === '/seller/orders'
    },
    {
      icon: (
        <img 
          src="/wallet-icon.svg" 
          alt="Wallet" 
          className={`w-4 h-4 ${location.pathname === '/seller/wallet' ? 'brightness-0 invert' : ''}`} 
        />
      ),
      label: 'Wallet',
      path: '/seller/wallet',
      active: location.pathname === '/seller/wallet'
    },
    // {
    //   icon: (
    //     <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    //       <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" />
    //     </svg>
    //   ),
    //   label: 'Customers',
    //   path: '/seller/customers',
    //   active: location.pathname === '/seller/customers'
    // },
    // {
    //   icon: (
    //     <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    //       <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
    //     </svg>
    //   ),
    //   label: 'Analytics',
    //   path: '/seller/analytics',
    //   active: location.pathname === '/seller/analytics'
    // },
    {
      icon: (
        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
      ),
      label: 'Settings',
      path: '/seller/settings',
      active: location.pathname === '/seller/settings'
    }
  ];

  const generalItems = [
    {
      icon: <ChatIcon className="w-4 h-4" />,
      label: 'Chat',
      path: '/chat',
      active: location.pathname === '/chat'
    },
    {
      icon: <ProfileIcon className="w-4 h-4" />,
      label: 'Me',
      path: '/profile',
      active: location.pathname === '/profile'
    }
  ];

  const handleLogout = () => {
    logout();
    onClose();
  };

  return (
    <>
      {/* Overlay */}
      {isOpen && (
        <div
          className="fixed inset-0 bg-black bg-opacity-50 z-50"
          onClick={onClose}
        />
      )}

      {/* Mobile Seller Menu */}
      <div
        className={`
          fixed inset-0 z-50 bg-white flex flex-col
          transition-transform duration-300 ease-in-out
          ${isOpen ? "translate-x-0" : "-translate-x-full"}
        `}
      >
        {/* Header */}
        <div className="w-full flex items-center justify-between px-4 pt-4 pb-0">
          <div className="flex items-center">
            <img 
              src="/logo.svg" 
              alt="Campor Logo" 
              className="w-6 h-6 mr-3 object-contain"
            />
            <div>
              <div className="text-sm font-semibold text-gray-900">Seller Dashboard</div>
              <div className="text-xs text-gray-500">Manage your business</div>
            </div>
          </div>
          <button
            onClick={onClose}
            className="w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors"
          >
            <svg className="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        {/* Content */}
        <div className="flex-1 overflow-y-auto px-4 py-6">
          {/* Seller Navigation */}
          {sellerMenuItems.map((item) => (
            <Link
              key={item.path}
              to={item.path}
              onClick={onClose}
              className={`flex items-center px-4 py-3 hover:bg-gray-50 transition-colors rounded-lg mb-2 ${
                item.isSpecial
                  ? 'text-blue-600 hover:bg-blue-50 border border-blue-200'
                  : item.active 
                  ? 'bg-blue-50 text-blue-600' 
                  : 'text-gray-700'
              }`}
            >
              {item.icon}
              <span className="ml-3 text-sm font-medium">{item.label}</span>
            </Link>
          ))}

          {/* General Section */}
          <div className="border-t border-gray-100 mt-4 pt-4">
            <div className="px-4 py-2 text-xs text-gray-500 font-medium uppercase tracking-wide mb-2">
              General
            </div>
            {generalItems.map((item) => (
              <Link
                key={item.path}
                to={item.path}
                onClick={onClose}
                className={`flex items-center px-4 py-3 hover:bg-gray-50 transition-colors rounded-lg mb-2 ${
                  item.active ? 'bg-blue-50 text-blue-600' : 'text-gray-700'
                }`}
              >
                {item.icon}
                <span className="ml-3 text-sm font-medium">{item.label}</span>
              </Link>
            ))}
          </div>

          {/* Logout */}
          <div className="border-t border-gray-100 mt-4 pt-4">
            <button
              onClick={handleLogout}
              className="flex items-center w-full px-4 py-3 text-red-600 hover:bg-red-50 transition-colors rounded-lg"
            >
              <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
              </svg>
              <span className="text-sm font-medium">Sign Out</span>
            </button>
          </div>
        </div>
      </div>
    </>
  );
}



================================================
FILE: src/components/layout/Navbar.jsx
================================================
import { Link, useLocation, useNavigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { useCart } from '../../contexts/CartContext';
import { useWishlist } from '../../contexts/WishlistContext';
import { useState, useEffect } from 'react';
import AcceptOrder from '../seller/AcceptOrder';
import { ShoppingBagIcon, ChatIcon, ProfileIcon } from '../common';

export default function Navbar({ variant = 'default' }) {
  const { user, logout, isSeller } = useAuth();
  const { getItemCount } = useCart();
  const { getItemCount: getWishlistCount } = useWishlist();
  const navigate = useNavigate();
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isSellerNavOpen, setIsSellerNavOpen] = useState(false);
  const [isAcceptOrderModalOpen, setIsAcceptOrderModalOpen] = useState(false);
  const [isInSellerContext, setIsInSellerContext] = useState(false);
  const location = useLocation();
  
  // Debug logging for seller status
  
  // Determine if user is signed in for navbar state
  const isSignedIn = !!user;
  
  // Check if we're on a seller dashboard page (excluding onboarding and catalogue which should show buyer navbar)
  const isSellerPage = location.pathname.startsWith('/seller/') && 
    location.pathname !== '/seller/onboarding' && 
    !location.pathname.includes('/catalogue');

  // Context-aware navigation: Detect seller context and manage state
  useEffect(() => {
    // Set seller context when navigating to seller pages
    if (isSellerPage && isSeller) {
      setIsInSellerContext(true);
    } else if (!isSellerPage) {
      // Reset seller context when leaving seller pages
      setIsInSellerContext(false);
      setIsSellerNavOpen(false);
    }
  }, [location.pathname, isSellerPage, isSeller]);

  // Reset mobile menu states when menu closes
  useEffect(() => {
    if (!isMenuOpen) {
      setIsSellerNavOpen(false);
    }
  }, [isMenuOpen]);

  // Handle complete order with inventory deduction
  // Handle Accept Order modal
  const handleAcceptOrder = () => {
    setIsAcceptOrderModalOpen(true);
  };

  return (
    <nav className={`fixed top-0 left-0 right-0 z-50 pl-0 pr-6 py-4 ${!isSignedIn ? 'font-montserrat' : ''}`} style={{ backgroundColor: '#F7F5F0' }}>
      <div className="max-w-7xl mx-auto flex justify-between items-center">
          <div className="flex items-center pl-6">
            <Link to="/marketplace" className="flex items-center">
              <img 
                src="/logo.svg" 
                alt="Campor Logo" 
                className="w-6 h-6 mr-3 object-contain"
              />
              <span className="text-xl font-bold text-gray-900">Campor</span>
            </Link>
          </div>


          {/* Desktop Navigation - Show different navigation based on sign-in status */}
        <div className="hidden lg:flex items-center space-x-8">
          {!isSignedIn ? (
            // Navigation for non-signed-in users (landing page)
            <>
              <a 
                href="#features" 
                className="text-gray-700 hover:text-gray-900 font-medium transition-colors cursor-pointer"
              >
                Features
              </a>
              <a 
                href="#how-it-works" 
                className="text-gray-700 hover:text-gray-900 font-medium transition-colors cursor-pointer"
              >
                How it works
              </a>
              <a 
                href="#core-features" 
                className="text-gray-700 hover:text-gray-900 font-medium transition-colors cursor-pointer"
              >
                Why Choose Us
              </a>
              <a 
                href="#faq" 
                className="text-gray-700 hover:text-gray-900 font-medium transition-colors cursor-pointer"
              >
                FAQs
              </a>
            </>
          ) : (
            // Navigation for signed-in users - Keep this empty for clean design
            <>
            </>
          )}
        </div>

        {/* Desktop Auth Buttons - Different layout based on sign-in status */}
        <div className="hidden lg:flex items-center space-x-6">
          {!isSignedIn ? (
            // Buttons for non-signed-in users
            <>
              <Link 
                to="/login" 
                className="text-gray-700 hover:text-gray-900 font-medium transition-colors"
              >
                Sign In
              </Link>
              <Link 
                to="/auth" 
                className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full font-medium transition-colors"
              >
                Get Started
              </Link>
            </>
          ) : (
            // Buttons for signed-in users
            <>
              {/* Chat Button */}
              {/* Accept Order Button - only show on seller pages */}
              {isSellerPage && (
                <button 
                  onClick={handleAcceptOrder}
                  className="flex items-center gap-2 text-green-600 hover:text-green-700 font-medium transition-colors"
                >
                  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7" />
                  </svg>
                  Accept Order
                </button>
              )}

              <Link 
                to="/chat" 
                className="flex items-center gap-2 text-gray-700 hover:text-gray-900 font-medium transition-colors"
              >
                <ChatIcon className="w-5 h-5" />
                Chat
              </Link>

              {/* Sell/Seller Dashboard Button - only show on non-seller pages */}
              {!isSellerPage && (
                <Link 
                  to={isSeller ? "/seller/dashboard" : "/seller/onboarding"} 
                  className="flex items-center gap-2 text-gray-700 hover:text-gray-900 font-medium transition-colors"
                >
                  <svg className="w-5 h-5" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Market stall icon">
                    <defs>
                      <filter id="inner-shadow" x="-50%" y="-50%" width="200%" height="200%">
                        <feOffset dx="0" dy="6" result="off"/>
                        <feGaussianBlur in="off" stdDeviation="8" result="blur"/>
                        <feComposite in="SourceGraphic" in2="blur" operator="over" result="composite"/>
                        <feBlend in="SourceGraphic" in2="composite" mode="normal"/>
                      </filter>
                    </defs>
                    <g transform="translate(64,64) scale(0.875)" fill="none" strokeLinejoin="round" strokeLinecap="round">
                      <rect x="168" y="40" rx="16" ry="16" width="688" height="96" fill="#5A5B5D" stroke="#3E3E40" strokeWidth="6"/>
                      <path d="M128 168
                               L896 168
                               C912 168 944 178 964 206
                               C988 238 988 314 964 350
                               C944 378 912 388 896 388
                               L128 388
                               C112 388 80 378 60 350
                               C36 314 36 238 60 206
                               C80 178 112 168 128 168 Z"
                            fill="#4E4F51" stroke="#3A3A3B" strokeWidth="6"/>
                      <g transform="translate(0,0)" fill="#6A6B6D" stroke="#3A3A3B" strokeWidth="4">
                        <path d="M180 176 L300 176 L260 360 L220 360 Z" />
                        <path d="M320 176 L420 176 L380 360 L340 360 Z" />
                        <path d="M460 176 L560 176 L520 360 L480 360 Z" />
                        <path d="M600 176 L700 176 L660 360 L620 360 Z" />
                        <path d="M740 176 L860 176 L820 360 L780 360 Z" />
                      </g>
                      <path d="M140 388
                               C188 444 244 444 292 388
                               C340 444 396 444 444 388
                               C492 444 548 444 596 388
                               C644 444 700 444 748 388
                               L896 388"
                            fill="#4E4F51" stroke="#3A3A3B" strokeWidth="6" opacity="0.95"/>
                      <rect x="200" y="420" width="96" height="320" rx="12" ry="12" fill="#5A5B5D" stroke="#3A3A3B" strokeWidth="6"/>
                      <rect x="728" y="420" width="96" height="320" rx="12" ry="12" fill="#5A5B5D" stroke="#3A3A3B" strokeWidth="6"/>
                      <rect x="320" y="440" width="384" height="248" rx="6" ry="6" fill="#6A6B6D" stroke="#3A3A3B" strokeWidth="6"/>
                      <rect x="152" y="732" width="720" height="144" rx="20" ry="20" fill="#4E4F51" stroke="#2F2F30" strokeWidth="6"/>
                      <rect x="112" y="892" width="800" height="36" rx="18" ry="18" fill="#3E3E40" stroke="#2B2B2C" strokeWidth="4"/>
                      <g stroke="#2E2E30" strokeWidth="2" fill="none">
                        <rect x="168" y="40" rx="16" ry="16" width="688" height="96"/>
                        <path d="M128 168 L896 168 C912 168 944 178 964 206 C988 238 988 314 964 350 C944 378 912 388 896 388 L128 388 C112 388 80 378 60 350 C36 314 36 238 60 206 C80 178 112 168 128 168 Z"/>
                      </g>
                    </g>
                  </svg>
                  {isSeller ? "Seller Dashboard" : "Sell"}
                </Link>
              )}

              {/* Me Button */}
              <Link 
                to="/profile" 
                className="flex items-center gap-2 text-gray-700 hover:text-gray-900 font-medium transition-colors"
              >
                <ProfileIcon className="w-5 h-5" />
                Me
              </Link>

              {/* Wishlist Button with Counter (hide on seller pages) */}
              {!isSellerPage && (
                <Link 
                  to="/wishlist" 
                  className="relative flex items-center text-gray-700 hover:text-gray-900 transition-colors"
                >
                  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                  </svg>
                  {getWishlistCount() > 0 && (
                    <span className="absolute -top-2 -right-2 bg-black text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-medium">
                      {getWishlistCount() > 99 ? '99+' : getWishlistCount()}
                    </span>
                  )}
                </Link>
              )}

              {/* Cart Button with Counter (hide on seller pages) */}
              {!isSellerPage && (
                <Link 
                  to="/cart" 
                  className="relative flex items-center text-gray-700 hover:text-gray-900 transition-colors"
                >
                  <ShoppingBagIcon className="w-6 h-6" />
                  {getItemCount() > 0 && (
                    <span className="absolute -top-2 -right-2 bg-black text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-medium">
                      {getItemCount() > 99 ? '99+' : getItemCount()}
                    </span>
                  )}
                </Link>
              )}

              <button
                onClick={logout}
                className="text-gray-700 hover:text-gray-900 font-medium transition-colors"
              >
                Sign out
              </button>
            </>
          )}
        </div>

        {/* Mobile Actions - Wishlist, Cart and Menu Button */}
        <div className="lg:hidden flex items-center gap-3">
          {/* Get Started Button for Mobile (only show when NOT signed in) */}
          {!isSignedIn && (
            <Link 
              to="/auth" 
              className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full font-medium transition-colors text-sm"
            >
              Get Started
            </Link>
          )}
          
          {/* Wishlist Button for Mobile (only show when signed in and NOT on seller pages) */}
          {isSignedIn && !isSellerPage && (
            <Link 
              to="/wishlist" 
              className="relative flex items-center text-gray-700 hover:text-gray-900 transition-colors"
            >
              <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
              </svg>
              {getWishlistCount() > 0 && (
                <span className="absolute -top-2 -right-2 bg-black text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-medium">
                  {getWishlistCount() > 99 ? '99+' : getWishlistCount()}
                </span>
              )}
            </Link>
          )}
          
          {/* Cart Button for Mobile (only show when signed in and NOT on seller pages) */}
          {isSignedIn && !isSellerPage && (
            <Link 
              to="/cart" 
              className="relative flex items-center text-gray-700 hover:text-gray-900 transition-colors"
            >
              <ShoppingBagIcon className="w-6 h-6" />
              {getItemCount() > 0 && (
                <span className="absolute -top-2 -right-2 bg-black text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-medium">
                  {getItemCount() > 99 ? '99+' : getItemCount()}
                </span>
              )}
            </Link>
          )}
          
          {/* Accept Order Button for Mobile (only on seller pages) */}
          {isSellerPage && (
            <button 
              onClick={handleAcceptOrder}
              className="flex items-center gap-1 text-green-600 hover:text-green-700 font-medium transition-colors"
            >
              <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7" />
              </svg>
              <span className="text-sm">Complete</span>
            </button>
          )}
          
          {/* Mobile Menu Button - Show for all pages on mobile */}
            <button
              onClick={() => setIsMenuOpen(!isMenuOpen)}
            className="lg:hidden flex items-center justify-center w-10 h-10"
            >
              <img 
                src="/nav-icon.svg" 
                alt="Menu" 
                className="w-10 h-10"
              />
            </button>
        </div>
      </div>

      {/* Mobile Menu - Show for all pages */}
      {isMenuOpen && (
        <>
          {/* Overlay */}
          {isMenuOpen && (
            <div
              className="fixed inset-0 bg-black bg-opacity-50 z-50"
              onClick={() => setIsMenuOpen(false)}
            />
          )}

          {/* Mobile Menu */}
          <div
            className={`
              fixed inset-0 z-50 flex flex-col
              transition-transform duration-300 ease-in-out
              ${isMenuOpen ? "translate-x-0" : "-translate-x-full"}
            `}
            style={{ backgroundColor: '#F7F5F0' }}
          >
            {/* Header */}
            <div className="w-full flex items-center justify-between px-4 pt-4 pb-0">
              <div className="flex items-center">
                <img 
                  src="/logo.svg" 
                  alt="Campor Logo" 
                  className="w-6 h-6 mr-3 object-contain"
                />
                <span className="text-xl font-bold text-gray-900">Campor</span>
              </div>
              <button
                onClick={() => setIsMenuOpen(false)}
                className="w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors"
              >
                <svg className="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>

            {/* Content */}
            <div className="flex-1 overflow-y-auto px-4 py-6">
              <div className="relative overflow-hidden h-full">
                {/* Main Menu - Show normal navigation when not in seller context */}
                <div className={`transition-all duration-300 ease-in-out ${!isSellerNavOpen && !isInSellerContext ? 'transform translate-x-0 opacity-100' : 'transform -translate-x-full opacity-0 absolute inset-0'}`}>
              {!isSignedIn ? (
                // Mobile navigation for non-signed-in users
                <>
                  <div className="px-4 py-2 text-xs text-gray-500 font-medium uppercase tracking-wide border-b border-gray-100 mb-4">
                    Your Trusted University Marketplace
                  </div>
                  <a 
                    href="#features" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2 cursor-pointer"
                    onClick={() => setIsMenuOpen(false)}
                  >
                    Features
                  </a>
                  <a 
                    href="#how-it-works" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2 cursor-pointer"
                    onClick={() => setIsMenuOpen(false)}
                  >
                    How it works
                  </a>
                  <a 
                    href="#core-features" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2 cursor-pointer"
                    onClick={() => setIsMenuOpen(false)}
                  >
                    Why Choose Us
                  </a>
                  <a 
                    href="#faq" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-4 cursor-pointer"
                    onClick={() => setIsMenuOpen(false)}
                  >
                    FAQs
                  </a>
                  <div className="border-t border-gray-100 pt-4">
                    <Link 
                      to="/login" 
                      className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                      onClick={() => setIsMenuOpen(false)}
                    >
                      Sign In
                    </Link>
                    <Link 
                      to="/auth" 
                      className="flex items-center px-4 py-3 text-blue-600 hover:bg-blue-50 font-medium transition-colors rounded-lg"
                      onClick={() => setIsMenuOpen(false)}
                    >
                      Get Started
                    </Link>
                  </div>
                </>
              ) : (
                // Mobile navigation for signed-in users
                <>
                  <div className="px-4 py-2 text-xs text-gray-500 font-medium uppercase tracking-wide border-b border-gray-100 mb-4">
                    Your Trusted University Marketplace
                  </div>
                  
                  <Link 
                    to="/marketplace" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                    onClick={() => setIsMenuOpen(false)}
                  >
                    <svg className="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                    Marketplace
                  </Link>
                  
                  <Link 
                    to="/chat" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                    onClick={() => setIsMenuOpen(false)}
                  >
                    <ChatIcon className="w-4 h-4 mr-3" />
                    Chat
                  </Link>
                  
                  {/* Dynamic Sell/Seller Dashboard button */}
                  {(
                    <>
                      {isSeller ? (
                        <button
                          onClick={() => setIsSellerNavOpen(true)}
                          className="flex items-center justify-between w-full px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2 group"
                        >
                          <div className="flex items-center">
                            <svg className="w-4 h-4 mr-3" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Market stall icon">
                              <defs>
                                <filter id="inner-shadow-2" x="-50%" y="-50%" width="200%" height="200%">
                                  <feOffset dx="0" dy="6" result="off"></feOffset>
                                  <feGaussianBlur in="off" stdDeviation="8" result="blur"></feGaussianBlur>
                                  <feComposite in="SourceGraphic" in2="blur" operator="over" result="composite"></feComposite>
                                  <feBlend in="SourceGraphic" in2="composite" mode="normal"></feBlend>
                                </filter>
                              </defs>
                              <g transform="translate(64,64) scale(0.875)" fill="none" strokeLinejoin="round" strokeLinecap="round">
                                <rect x="168" y="40" rx="16" ry="16" width="688" height="96" fill="#5A5B5D" stroke="#3E3E40" strokeWidth="6"></rect>
                                <path d="M128 168 L896 168 C912 168 944 178 964 206 C988 238 988 314 964 350 C944 378 912 388 896 388 L128 388 C112 388 80 378 60 350 C36 314 36 238 60 206 C80 178 112 168 128 168 Z" fill="#4E4F51" stroke="#3A3A3B" strokeWidth="6"></path>
                                <g transform="translate(0,0)" fill="#6A6B6D" stroke="#3A3A3B" strokeWidth="4">
                                  <path d="M180 176 L300 176 L260 360 L220 360 Z"></path>
                                  <path d="M320 176 L420 176 L380 360 L340 360 Z"></path>
                                  <path d="M460 176 L560 176 L520 360 L480 360 Z"></path>
                                  <path d="M600 176 L700 176 L660 360 L620 360 Z"></path>
                                  <path d="M740 176 L860 176 L820 360 L780 360 Z"></path>
                                </g>
                                <path d="M140 388 C188 444 244 444 292 388 C340 444 396 444 444 388 C492 444 548 444 596 388 C644 444 700 444 748 388 L896 388" fill="#4E4F51" stroke="#3A3A3B" strokeWidth="6" opacity="0.95"></path>
                                <rect x="200" y="420" width="96" height="320" rx="12" ry="12" fill="#5A5B5D" stroke="#3A3A3B" strokeWidth="6"></rect>
                                <rect x="728" y="420" width="96" height="320" rx="12" ry="12" fill="#5A5B5D" stroke="#3A3A3B" strokeWidth="6"></rect>
                                <rect x="320" y="440" width="384" height="248" rx="6" ry="6" fill="#6A6B6D" stroke="#3A3A3B" strokeWidth="6"></rect>
                                <rect x="152" y="732" width="720" height="144" rx="20" ry="20" fill="#4E4F51" stroke="#2F2F30" strokeWidth="6"></rect>
                                <rect x="112" y="892" width="800" height="36" rx="18" ry="18" fill="#3E3E40" stroke="#2B2B2C" strokeWidth="4"></rect>
                                <g stroke="#2E2E30" strokeWidth="2" fill="none">
                                  <rect x="168" y="40" rx="16" ry="16" width="688" height="96"></rect>
                                  <path d="M128 168 L896 168 C912 168 944 178 964 206 C988 238 988 314 964 350 C944 378 912 388 896 388 L128 388 C112 388 80 378 60 350 C36 314 36 238 60 206 C80 178 112 168 128 168 Z"></path>
                                </g>
                              </g>
                            </svg>
                            <span>Seller Dashboard</span>
                          </div>
                          <svg className="w-4 h-4 text-gray-400 transition-transform duration-200 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5l7 7-7 7" />
                          </svg>
                        </button>
                      ) : (
                    <Link 
                          to="/seller/onboarding" 
                      className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                      onClick={() => setIsMenuOpen(false)}
                    >
                          <svg className="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                          </svg>
                          Sell
                    </Link>
                      )}
                    </>
                  )}
                  
                  
                  <Link 
                    to="/profile" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                    onClick={() => setIsMenuOpen(false)}
                  >
                    <ProfileIcon className="w-4 h-4 mr-3" />
                    Profile
                  </Link>
                  
                  {/* Wishlist - show for all signed-in users */}
                  {(
                    <Link 
                      to="/wishlist" 
                      className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                      onClick={() => setIsMenuOpen(false)}
                    >
                      <svg className="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                      </svg>
                      Wishlist
                    </Link>
                  )}
                  
                  {/* Cart - show for all signed-in users */}
                  {(
                    <Link 
                      to="/cart" 
                      className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                      onClick={() => setIsMenuOpen(false)}
                    >
                      <ShoppingBagIcon className="w-4 h-4 mr-3" />
                      Cart
                    </Link>
                  )}
                  
                  {/* Orders - show for all signed-in users */}
                  <Link 
                    to="/orders" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-4"
                    onClick={() => setIsMenuOpen(false)}
                  >
                    <svg className="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                    Orders
                  </Link>
                  
                  <div className="border-t border-gray-100 pt-4">
                    <button
                      onClick={() => {
                        logout();
                        setIsMenuOpen(false);
                      }}
                      className="flex items-center w-full px-4 py-3 text-red-600 hover:bg-red-50 transition-colors rounded-lg"
                    >
                      <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                      </svg>
                      Sign Out
                    </button>
                  </div>
                </>
              )}
                </div>

                {/* Seller Menu - Show when in seller context or when seller nav is explicitly opened */}
                <div className={`transition-all duration-300 ease-in-out ${isSellerNavOpen || isInSellerContext ? 'transform translate-x-0 opacity-100' : 'transform translate-x-full opacity-0 absolute inset-0'}`}>
                  {/* Back button */}
                  <button
                    onClick={() => {
                      if (isInSellerContext) {
                        // If we're in seller context, go back to normal navbar
                        setIsInSellerContext(false);
                      } else {
                        // If seller nav was explicitly opened, just close it
                        setIsSellerNavOpen(false);
                      }
                    }}
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-4"
                  >
                    <svg className="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 19l-7-7 7-7" />
                    </svg>
                    <span className="text-sm font-medium">Back</span>
                  </button>

                  {/* Seller Navigation Items */}
                  <div className="px-4 py-2 text-xs text-gray-500 font-medium uppercase tracking-wide border-b border-gray-100 mb-4">
                    Seller Dashboard
                  </div>
                  
                  <Link 
                    to="/seller/dashboard" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                    onClick={() => {
                      setIsMenuOpen(false);
                      setIsSellerNavOpen(false);
                      setIsInSellerContext(true); // Set seller context when navigating to dashboard
                    }}
                  >
                    <svg className="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                    Dashboard
                  </Link>
                  
                  <Link 
                    to="/seller/products" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                    onClick={() => {
                      setIsMenuOpen(false);
                      setIsSellerNavOpen(false);
                      setIsInSellerContext(true);
                    }}
                  >
                    <svg className="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
                    </svg>
                    Products
                  </Link>
                  
                  <Link 
                    to="/seller/orders" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                    onClick={() => {
                      setIsMenuOpen(false);
                      setIsSellerNavOpen(false);
                      setIsInSellerContext(true);
                    }}
                  >
                    <svg className="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                    Orders
                  </Link>
                  
                  <Link 
                    to="/seller/wallet" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                    onClick={() => {
                      setIsMenuOpen(false);
                      setIsSellerNavOpen(false);
                      setIsInSellerContext(true);
                    }}
                  >
                    <img 
                      src="/wallet-icon.svg" 
                      alt="Wallet" 
                      className="w-4 h-4 mr-3" 
                    />
                    Wallet
                  </Link>
                  
                  {/* <Link 
                    to="/seller/customers" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                    onClick={() => {
                      setIsMenuOpen(false);
                      setIsSellerNavOpen(false);
                      setIsInSellerContext(true);
                    }}
                  >
                    <img 
                      src="/customers.svg" 
                      alt="Customers" 
                      className="w-4 h-4 mr-3" 
                    />
                    Customers
                  </Link> */}
                  
                  {/* <Link 
                    to="/seller/analytics" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-2"
                    onClick={() => {
                      setIsMenuOpen(false);
                      setIsSellerNavOpen(false);
                      setIsInSellerContext(true);
                    }}
                  >
                    <svg className="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                    Analytics
                  </Link> */}
                  
                  <Link 
                    to="/seller/settings" 
                    className="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors rounded-lg mb-4"
                    onClick={() => {
                      setIsMenuOpen(false);
                      setIsSellerNavOpen(false);
                      setIsInSellerContext(true);
                    }}
                  >
                    <svg className="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    Settings
                  </Link>
                </div>
              </div>
            </div>
          </div>
        </>
      )}

      {/* Accept Order Modal */}
      <AcceptOrder
        isOpen={isAcceptOrderModalOpen}
        onClose={() => setIsAcceptOrderModalOpen(false)}
        onSuccess={() => {
          // Dispatch custom event to notify dashboard and other components to refresh wallet balance
          window.dispatchEvent(new CustomEvent('walletTransferSuccess'));
        }}
      />
    </nav>
  );
}




================================================
FILE: src/components/layout/SellerPageHeader.jsx
================================================
import { useLocation } from 'react-router-dom';

export default function SellerPageHeader() {
  const location = useLocation();
  
  const getPageTitle = () => {
    if (location.pathname === '/seller/dashboard') {
      return 'Seller Dashboard';
    } else if (location.pathname.startsWith('/seller/products')) {
      return 'Products Management';
    } else if (location.pathname === '/seller/orders') {
      return 'Orders Management';
    } else if (location.pathname === '/seller/customers') {
      return 'Customers Management';
    } else if (location.pathname === '/seller/analytics') {
      return 'Analytics';
    } else if (location.pathname === '/seller/settings') {
      return 'Settings';
    }
    return 'Seller Dashboard';
  };

  const getPageSubtitle = () => {
    if (location.pathname === '/seller/dashboard') {
      return "Welcome back! Here's what's happening with your store today.";
    } else if (location.pathname.startsWith('/seller/products')) {
      return 'Manage your product inventory and listings.';
    } else if (location.pathname === '/seller/orders') {
      return 'Track and manage customer orders.';
    } else if (location.pathname === '/seller/customers') {
      return 'View and manage your customer base.';
    } else if (location.pathname === '/seller/analytics') {
      return 'Analyze your store performance and insights.';
    } else if (location.pathname === '/seller/settings') {
      return 'Manage your store settings and preferences.';
    }
    return "Welcome back! Here's what's happening with your store today.";
  };

  return (
    <div className="mb-8">
      <h1 className="text-3xl font-bold text-gray-900 mb-2">{getPageTitle()}</h1>
      <p className="text-gray-600">{getPageSubtitle()}</p>
    </div>
  );
}



================================================
FILE: src/components/layout/SellerSidebar.jsx
================================================
import { Link, useLocation } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { ChatIcon, ProfileIcon } from '../common';

export default function SellerSidebar({ onMobileClose, isMobile = false }) {
  const location = useLocation();
  const { logout } = useAuth();
  
  const menuItems = [
    {
      icon: (
        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
      ),
      label: 'Back to Marketplace',
      path: '/marketplace',
      active: false,
      isSpecial: true
    },
    {
      icon: (
        <img 
          src="/dashboard-icon.svg" 
          alt="Dashboard" 
          className={`w-5 h-5 ${location.pathname === '/seller/dashboard' ? 'brightness-0 invert' : ''}`} 
        />
      ),
      label: 'Dashboard',
      path: '/seller/dashboard',
      active: location.pathname === '/seller/dashboard'
    },
    {
      icon: (
        <img 
          src="/products-icon.svg" 
          alt="Products" 
          className={`w-5 h-5 ${location.pathname.startsWith('/seller/products') ? 'brightness-0 invert' : ''}`} 
        />
      ),
      label: 'Products',
      path: '/seller/products',
      active: location.pathname.startsWith('/seller/products')
    },
    {
      icon: (
        <img 
          src="/orders-icon.svg" 
          alt="Orders" 
          className={`w-5 h-5 ${location.pathname === '/seller/orders' ? 'brightness-0 invert' : ''}`} 
        />
      ),
      label: 'Orders',
      path: '/seller/orders',
      active: location.pathname === '/seller/orders'
    },
    {
      icon: (
        <img 
          src="/wallet-icon.svg" 
          alt="Wallet" 
          className={`w-5 h-5 ${location.pathname === '/seller/wallet' ? 'brightness-0 invert' : ''}`} 
        />
      ),
      label: 'Wallet',
      path: '/seller/wallet',
      active: location.pathname === '/seller/wallet'
    },
    // {
    //   icon: (
    //     <img 
    //       src="/customers.svg" 
    //       alt="Customers" 
    //       className={`w-5 h-5 ${location.pathname === '/seller/customers' ? 'brightness-0 invert' : ''}`} 
    //     />
    //   ),
    //   label: 'Customers',
    //   path: '/seller/customers',
    //   active: location.pathname === '/seller/customers'
    // },
    // {
    //   icon: (
    //     <img 
    //       src="/analytics-icon.svg" 
    //       alt="Analytics" 
    //       className={`w-5 h-5 ${location.pathname === '/seller/analytics' ? 'brightness-0 invert' : ''}`} 
    //     />
    //   ),
    //   label: 'Analytics',
    //   path: '/seller/analytics',
    //   active: location.pathname === '/seller/analytics'
    // },
    {
      icon: (
        <img 
          src="/settings.svg" 
          alt="Settings" 
          className={`w-5 h-5 ${location.pathname === '/seller/settings' ? 'brightness-0 invert' : ''}`} 
        />
      ),
      label: 'Settings',
      path: '/seller/settings',
      active: location.pathname === '/seller/settings'
    }
  ];

  // Additional mobile menu items (Chat, Me)
  const mobileExtraItems = [
    {
      icon: <ChatIcon className="w-5 h-5" />,
      label: 'Chat',
      path: '/chat',
      active: location.pathname === '/chat'
    },
    {
      icon: <ProfileIcon className="w-5 h-5" />,
      label: 'Me',
      path: '/profile',
      active: location.pathname === '/profile'
    }
  ];

  const handleLogout = () => {
    logout();
    if (onMobileClose) onMobileClose();
  };

  return (
    <div className="fixed left-0 top-0 w-64 h-screen bg-transparent border-r border-gray-200 shadow-lg flex flex-col overflow-hidden z-40">
      {/* Navigation */}
      <nav className="flex-1 pt-20 px-4 pb-4 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent">
        <ul className="space-y-2">
          {menuItems.map((item) => (
            <li key={item.path}>
              <Link
                to={item.path}
                onClick={onMobileClose} // Close mobile menu when item is clicked
                className={`flex items-center px-4 py-3 rounded-lg transition-colors ${
                  item.isSpecial
                    ? 'text-blue-600 hover:bg-blue-50 border border-blue-200'
                    : item.active
                    ? 'bg-blue-600 text-white'
                    : 'text-gray-800 hover:bg-gray-200 hover:text-gray-900'
                }`}
              >
                {item.icon}
                <span className="ml-3 font-medium">{item.label}</span>
              </Link>
            </li>
          ))}
          
          {/* Mobile-only extra items (Chat, Me) */}
          {isMobile && (
            <>
              <li className="border-t border-gray-200 pt-2 mt-4">
                <div className="px-4 py-2 text-xs text-gray-500 font-medium uppercase tracking-wide">
                  General
                </div>
              </li>
              {mobileExtraItems.map((item) => (
                <li key={item.path}>
                  <Link
                    to={item.path}
                    onClick={onMobileClose}
                    className={`flex items-center px-4 py-3 rounded-lg transition-colors ${
                      item.active
                        ? 'bg-gray-900 text-white'
                        : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900'
                    }`}
                  >
                    {item.icon}
                    <span className="ml-3 font-medium">{item.label}</span>
                  </Link>
                </li>
              ))}
            </>
          )}
        </ul>
      </nav>

      {/* Logout */}
      <div className="p-4 border-t border-gray-200 flex-shrink-0 bg-transparent">
        <button 
          onClick={handleLogout}
          className="flex items-center w-full px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors"
        >
          <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
          </svg>
          <span className="ml-3 font-medium">Logout</span>
        </button>
      </div>
    </div>
  );
}



================================================
FILE: src/components/products/index.js
================================================
export { default as ProductCard } from './ProductCard';







================================================
FILE: src/components/products/InventoryStatus.jsx
================================================
import React from 'react';

export default function InventoryStatus({ stockQuantity, soldQuantity = 0, className = '' }) {
  if (stockQuantity === 0) {
    return (
      <div className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 ${className}`}>
        <svg className="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        Out of Stock
        {soldQuantity > 0 && (
          <span className="ml-1 text-red-600">({soldQuantity} sold)</span>
        )}
      </div>
    );
  }

  if (stockQuantity <= 5) {
    return (
      <div className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 ${className}`}>
        <svg className="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
        </svg>
        Low Stock ({stockQuantity} left)
        {soldQuantity > 0 && (
          <span className="ml-1 text-yellow-600">({soldQuantity} sold)</span>
        )}
      </div>
    );
  }

  return (
    <div className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 ${className}`}>
      <svg className="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7" />
      </svg>
      In Stock ({stockQuantity} available)
      {soldQuantity > 0 && (
        <span className="ml-1 text-green-600">({soldQuantity} sold)</span>
      )}
    </div>
  );
}



================================================
FILE: src/components/products/ProductCard.jsx
================================================
import React, { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { useCart } from '../../contexts/CartContext';
import { AddToCartButton } from '../cart';
import { WishlistButton } from '../wishlist';
import { Star, Image as ImageIcon } from 'lucide-react';
import { formatPrice } from '../../utils/formatting';
import { getSellerCatalogue, getSellerCatalogueBySlug } from '../../services/authService';
import { getProductRating } from '../../services/ratingService';

export default function ProductCard({ product }) {
  const [sellerProfilePicture, setSellerProfilePicture] = useState(null);
  const [sellerSlug, setSellerSlug] = useState(null);
  const [sellerName, setSellerName] = useState(null);
  const [imageError, setImageError] = useState(false);
  const [imageLoading, setImageLoading] = useState(true);
  const [ratingInfo, setRatingInfo] = useState({ averageRating: 0, totalRatings: 0 });

  // Fetch seller data and product rating from backend
  useEffect(() => {
    const fetchData = async () => {
      // Fetch seller data
      if (product.seller?.id) {
        try {
          const catalogueData = product.seller.slug 
            ? await getSellerCatalogueBySlug(product.seller.slug)
            : await getSellerCatalogue(product.seller.id);
          
          if (catalogueData.seller?.user?.profilePicture) {
            setSellerProfilePicture(catalogueData.seller.user.profilePicture);
          }
          
          if (catalogueData.seller?.slug) {
            setSellerSlug(catalogueData.seller.slug);
          }
          
          if (catalogueData.seller?.catalogueName) {
            setSellerName(catalogueData.seller.catalogueName);
          }
        } catch (error) {
          console.warn('Failed to fetch seller data:', error);
        }
      }

      // Fetch product rating
      if (product.id) {
        try {
          const rating = await getProductRating(product.id);
          if (rating) {
            setRatingInfo({
              averageRating: rating.averageRating || 0,
              totalRatings: rating.totalRatings || 0
            });
          }
        } catch (error) {
          // Silently fail if rating can't be fetched
        }
      }
    };

    fetchData();
  }, [product.seller?.id, product.seller?.slug, product.id]);

  const formatDate = (dateString) => {
    const date = new Date(dateString);
    const now = new Date();
    const diffTime = Math.abs(now - date);
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    if (diffDays === 1) return '1 day ago';
    if (diffDays < 7) return `${diffDays} days ago`;
    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
    if (diffDays < 365) return `${Math.floor(diffDays / 30)} months ago`;
    return `${Math.floor(diffDays / 365)} years ago`;
  };

  return (
    <div className="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow">
      {/* Product Image */}
      <Link to={`/product/${product.slug || product.id}`} className="block">
        <div className="aspect-square bg-gray-100 relative overflow-hidden">
          {/* Loading State */}
          {imageLoading && !imageError && (
            <div className="absolute inset-0 flex items-center justify-center bg-gray-100">
              <div className="w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"></div>
            </div>
          )}
          
          {/* Image or Placeholder */}
          {!imageError && product.imageUrls?.[0] ? (
            <img
              src={product.imageUrls[0]}
              alt={product.name}
              className="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
              onLoad={() => setImageLoading(false)}
              onError={() => {
                setImageError(true);
                setImageLoading(false);
              }}
            />
          ) : (
            <div className="w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 text-gray-400">
              {/* Branded placeholder with category context */}
              <div className="w-16 h-16 bg-white rounded-lg shadow-sm flex items-center justify-center mb-3">
                {product.category?.name ? (
                  <div className="text-center">
                    <div className="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-1">
                      <span className="text-blue-600 font-semibold text-sm">
                        {product.category.name.charAt(0).toUpperCase()}
                      </span>
                    </div>
                    <span className="text-xs text-gray-500 font-medium">
                      {product.category.name}
                    </span>
                  </div>
                ) : (
                  <ImageIcon className="w-8 h-8 text-gray-300" />
                )}
              </div>
              <span className="text-xs text-center px-2 text-gray-500">
                {product.category?.name ? `${product.category.name} product` : 'Product image'}
              </span>
            </div>
          )}
          
          {/* Stock Badge */}
          {(product.stockQuantity <= 0 || !product.stockQuantity || product.status === 'OUT_OF_STOCK') && (
            <div className="absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">
              Out of Stock
            </div>
          )}
        </div>
      </Link>

      {/* Product Info */}
      <div className="p-4">
        {/* Category */}
        {product.category && (
          <div className="mb-2">
            <span className="text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded">
              {product.category.name}
            </span>
          </div>
        )}

        {/* Product Name */}
        <Link to={`/product/${product.slug || product.id}`} className="block">
          <h3 className="font-medium text-gray-900 mb-2 line-clamp-2 hover:text-blue-600 transition-colors">
            {product.name}
          </h3>
        </Link>

        {/* Price */}
        <div className="flex items-center justify-between mb-3">
          <span className="text-lg font-bold text-gray-900">
            {formatPrice(product.price)}
          </span>
          <span className="text-sm text-gray-500">
            {(product.stockQuantity > 0 && product.stockQuantity) ? `${product.stockQuantity} left` : 'Out of stock'}
          </span>
        </div>

        {/* Seller Info */}
        {product.seller && (
          <Link 
            to={sellerSlug || product.seller.slug ? `/seller/${sellerSlug || product.seller.slug}/catalogue` : `/seller/${product.seller.id}/catalogue`}
            className="flex items-center gap-2 mb-3 hover:bg-gray-50 rounded-lg p-1 -m-1 transition-colors group"
            onClick={(e) => e.stopPropagation()}
          >
            <div className="w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center group-hover:bg-blue-100 transition-colors overflow-hidden">
              {(product.seller.user?.profilePicture || sellerProfilePicture) ? (
                <img 
                  src={product.seller.user?.profilePicture || sellerProfilePicture} 
                  alt={product.seller.catalogueName || 'Seller'} 
                  className="w-full h-full object-cover"
                />
              ) : (
                <span className="text-xs font-medium text-gray-600 group-hover:text-blue-600">
                  {product.seller.catalogueName?.charAt(0) || 'S'}
                </span>
              )}
            </div>
            <span className="text-sm text-gray-600 truncate group-hover:text-blue-600 transition-colors">
              {sellerName || product.seller.catalogueName || 'Unknown Seller'}
            </span>
          </Link>
        )}

        {/* Rating */}
        {ratingInfo.totalRatings > 0 && (
          <div className="flex items-center gap-2 mb-3">
            <div className="flex items-center">
              {[...Array(5)].map((_, i) => (
                <Star 
                  key={i} 
                  className={`w-3 h-3 ${i < Math.round(ratingInfo.averageRating) ? 'text-yellow-400 fill-current' : 'text-gray-300'}`} 
                />
              ))}
            </div>
            <span className="text-xs text-gray-500">
              ({ratingInfo.totalRatings})
            </span>
          </div>
        )}

        {/* Add to Cart and Wishlist Buttons */}
        <div className="mt-auto">
          <div className="flex items-center gap-2">
            <div className={`flex-1 ${(product.stockQuantity <= 0 || !product.stockQuantity) ? 'opacity-50 pointer-events-none' : ''}`}>
              <AddToCartButton 
                productId={product.id} 
                sellerId={product.seller?.id}
                className="w-full"
              />
            </div>
            <WishlistButton 
              productId={product.id}
            />
          </div>
        </div>
      </div>
    </div>
  );
}







================================================
FILE: src/components/search/AdvancedFilters.jsx
================================================
import { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { parsePriceRange } from '../../services/searchService';

export default function AdvancedFilters({ 
  filters, 
  onFiltersChange, 
  categories = [], 
  brands = [],
  priceRanges = [],
  isOpen = false,
  onToggle 
}) {
  const [localFilters, setLocalFilters] = useState({
    category: 'All',
    brand: 'All',
    priceRange: 'All',
    inStock: false,
    minRating: 0,
    ...filters
  });

  const [priceSliderValue, setPriceSliderValue] = useState([0, 100000]);
  const [showMoreCategories, setShowMoreCategories] = useState(false);
  const [showMoreBrands, setShowMoreBrands] = useState(false);

  // Update local filters when props change
  useEffect(() => {
    setLocalFilters(prev => ({ ...prev, ...filters }));
  }, [filters]);

  // Handle filter change
  const handleFilterChange = (key, value) => {
    const newFilters = { ...localFilters, [key]: value };
    setLocalFilters(newFilters);
    onFiltersChange(newFilters);
  };

  // Handle price range change
  const handlePriceRangeChange = (range) => {
    handleFilterChange('priceRange', range);
    
    if (range !== 'All') {
      const { min, max } = parsePriceRange(range);
      setPriceSliderValue([min, max === Infinity ? 100000 : max]);
    }
  };

  // Handle price slider change
  const handlePriceSliderChange = (values) => {
    setPriceSliderValue(values);
    
    // Convert slider values to price range string
    const min = values[0];
    const max = values[1];
    
    if (min === 0 && max === 100000) {
      handleFilterChange('priceRange', 'All');
    } else if (max === 100000) {
      handleFilterChange('priceRange', `₦${min.toLocaleString()}+`);
    } else {
      handleFilterChange('priceRange', `₦${min.toLocaleString()} - ₦${max.toLocaleString()}`);
    }
  };

  // Clear all filters
  const clearAllFilters = () => {
    const clearedFilters = {
      category: 'All',
      brand: 'All',
      priceRange: 'All',
      inStock: false,
      minRating: 0
    };
    setLocalFilters(clearedFilters);
    setPriceSliderValue([0, 100000]);
    onFiltersChange(clearedFilters);
  };

  // Check if any filters are applied
  const hasActiveFilters = Object.values(localFilters).some(value => 
    value !== 'All' && value !== false && value !== 0
  );

  return (
    <div className={`bg-white rounded-lg shadow-sm border border-gray-200 transition-all duration-300 ${isOpen ? 'block' : 'hidden md:block'}`}>
      <div className="p-4 border-b border-gray-200">
        <div className="flex items-center justify-between">
          <h3 className="text-lg font-semibold text-gray-900">Filters</h3>
          {hasActiveFilters && (
            <button
              onClick={clearAllFilters}
              className="text-sm text-blue-600 hover:text-blue-700 font-medium"
            >
              Clear All
            </button>
          )}
        </div>
      </div>

      <div className="p-4 space-y-6">
        {/* Backend Support Note */}
        <div className="bg-green-50 border border-green-200 rounded-lg p-3">
          <div className="flex items-start space-x-2">
            <svg className="w-5 h-5 text-green-600 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <div className="text-sm text-green-800">
              <p className="font-medium">All Filters Now Supported with Algolia! 🚀</p>
              <p className="text-xs mt-1">• Category • Brand • Price Range • Stock • Rating</p>
              <p className="text-xs text-green-600 mt-1">Lightning-fast search powered by Algolia.</p>
            </div>
          </div>
        </div>

        {/* Category Filter */}
        <div>
          <h4 className="text-sm font-medium text-gray-900 mb-3">Category</h4>
          <div className="space-y-2">
            {categories.slice(0, showMoreCategories ? categories.length : 5).map((category) => {
              // Handle both string categories (legacy) and object categories (new)
              const categoryName = typeof category === 'string' ? category : category.name;
              const categoryId = typeof category === 'object' ? category.id : null;
              
              // Only show "View All" for categories with valid numeric IDs
              const hasValidId = categoryId && !isNaN(categoryId) && categoryId !== 'all';
              
              return (
                <div key={categoryName} className="flex items-center justify-between">
                  <label className="flex items-center space-x-2 cursor-pointer flex-1">
                    <input
                      type="radio"
                      name="category"
                      value={categoryName}
                      checked={localFilters.category === categoryName}
                      onChange={(e) => handleFilterChange('category', e.target.value)}
                      className="w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"
                    />
                    <span className="text-sm text-gray-700">{categoryName}</span>
                  </label>
                  {hasValidId && categoryName !== 'All' && (
                    <Link
                      to={`/category/${categoryId}`}
                      className="text-xs text-blue-600 hover:text-blue-700 ml-2"
                      onClick={(e) => e.stopPropagation()}
                    >
                      View All
                    </Link>
                  )}
                </div>
              );
            })}
            {categories.length > 5 && (
              <button
                onClick={() => setShowMoreCategories(!showMoreCategories)}
                className="text-sm text-blue-600 hover:text-blue-700 font-medium"
              >
                {showMoreCategories ? 'Show Less' : `Show ${categories.length - 5} More`}
              </button>
            )}
          </div>
        </div>

        {/* Brand Filter */}
        <div>
          <h4 className="text-sm font-medium text-gray-900 mb-3">Brand</h4>
          <div className="space-y-2">
            {brands.slice(0, showMoreBrands ? brands.length : 5).map((brand) => (
              <label key={brand} className="flex items-center space-x-2 cursor-pointer">
                <input
                  type="radio"
                  name="brand"
                  value={brand}
                  checked={localFilters.brand === brand}
                  onChange={(e) => handleFilterChange('brand', e.target.value)}
                  className="w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"
                />
                <span className="text-sm text-gray-700">{brand}</span>
              </label>
            ))}
            {brands.length > 5 && (
              <button
                onClick={() => setShowMoreBrands(!showMoreBrands)}
                className="text-sm text-blue-600 hover:text-blue-700 font-medium"
              >
                {showMoreBrands ? 'Show Less' : `Show ${brands.length - 5} More`}
              </button>
            )}
          </div>
        </div>

        {/* Price Range Filter */}
        <div>
          <h4 className="text-sm font-medium text-gray-900 mb-3">Price Range</h4>
          <div className="space-y-3">
            {/* Predefined Price Ranges */}
            <div className="space-y-2">
              {priceRanges.map((range) => (
                <label key={range} className="flex items-center space-x-2 cursor-pointer">
                  <input
                    type="radio"
                    name="priceRange"
                    value={range}
                    checked={localFilters.priceRange === range}
                    onChange={(e) => handlePriceRangeChange(e.target.value)}
                    className="w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"
                  />
                  <span className="text-sm text-gray-700">{range}</span>
                </label>
              ))}
            </div>

            {/* Custom Price Slider */}
            <div className="pt-2">
              <div className="flex justify-between text-xs text-gray-500 mb-2">
                <span>₦{priceSliderValue[0].toLocaleString()}</span>
                <span>₦{priceSliderValue[1].toLocaleString()}</span>
              </div>
              <input
                type="range"
                min="0"
                max="100000"
                step="1000"
                value={priceSliderValue[1]}
                onChange={(e) => handlePriceSliderChange([priceSliderValue[0], parseInt(e.target.value)])}
                className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"
              />
              <input
                type="range"
                min="0"
                max="100000"
                step="1000"
                value={priceSliderValue[0]}
                onChange={(e) => handlePriceSliderChange([parseInt(e.target.value), priceSliderValue[1]])}
                className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider mt-2"
              />
            </div>
          </div>
        </div>

        {/* Stock Filter */}
        <div>
          <h4 className="text-sm font-medium text-gray-900 mb-3">Availability</h4>
          <label className="flex items-center space-x-2 cursor-pointer">
            <input
              type="checkbox"
              checked={localFilters.inStock}
              onChange={(e) => handleFilterChange('inStock', e.target.checked)}
              className="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
            />
            <span className="text-sm text-gray-700">In Stock Only</span>
          </label>
        </div>

        {/* Rating Filter */}
        <div>
          <h4 className="text-sm font-medium text-gray-900 mb-3">Minimum Rating</h4>
          <div className="flex items-center space-x-2">
            {[1, 2, 3, 4, 5].map((rating) => (
              <button
                key={rating}
                onClick={() => handleFilterChange('minRating', localFilters.minRating === rating ? 0 : rating)}
                className={`p-1 rounded ${
                  localFilters.minR